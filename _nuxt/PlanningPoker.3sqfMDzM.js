var R_=Object.defineProperty;var T_=(s,r,n)=>r in s?R_(s,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[r]=n;var Rt=(s,r,n)=>(T_(s,typeof r!="symbol"?r+"":r,n),n);var fr=(s,r,n)=>{if(r.has(s))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(s):r.set(s,n)};import{R as k_,J as E_}from"./entry.iaiyWZvb.js";function P_(s,r){for(var n=0;n<r.length;n++){const o=r[n];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in s)){const f=Object.getOwnPropertyDescriptor(o,c);f&&Object.defineProperty(s,c,f.get?f:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var $f={exports:{}};(function(s){var r=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function c(g,x,v){this.fn=g,this.context=x,this.once=v||!1}function f(g,x,v,S,M){if(typeof v!="function")throw new TypeError("The listener must be a function");var B=new c(v,S||g,M),G=n?n+x:x;return g._events[G]?g._events[G].fn?g._events[G]=[g._events[G],B]:g._events[G].push(B):(g._events[G]=B,g._eventsCount++),g}function l(g,x){--g._eventsCount===0?g._events=new o:delete g._events[x]}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var x=[],v,S;if(this._eventsCount===0)return x;for(S in v=this._events)r.call(v,S)&&x.push(n?S.slice(1):S);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(v)):x},d.prototype.listeners=function(x){var v=n?n+x:x,S=this._events[v];if(!S)return[];if(S.fn)return[S.fn];for(var M=0,B=S.length,G=new Array(B);M<B;M++)G[M]=S[M].fn;return G},d.prototype.listenerCount=function(x){var v=n?n+x:x,S=this._events[v];return S?S.fn?1:S.length:0},d.prototype.emit=function(x,v,S,M,B,G){var Z=n?n+x:x;if(!this._events[Z])return!1;var V=this._events[Z],ke=arguments.length,Ne,N;if(V.fn){switch(V.once&&this.removeListener(x,V.fn,void 0,!0),ke){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,v),!0;case 3:return V.fn.call(V.context,v,S),!0;case 4:return V.fn.call(V.context,v,S,M),!0;case 5:return V.fn.call(V.context,v,S,M,B),!0;case 6:return V.fn.call(V.context,v,S,M,B,G),!0}for(N=1,Ne=new Array(ke-1);N<ke;N++)Ne[N-1]=arguments[N];V.fn.apply(V.context,Ne)}else{var ot=V.length,xe;for(N=0;N<ot;N++)switch(V[N].once&&this.removeListener(x,V[N].fn,void 0,!0),ke){case 1:V[N].fn.call(V[N].context);break;case 2:V[N].fn.call(V[N].context,v);break;case 3:V[N].fn.call(V[N].context,v,S);break;case 4:V[N].fn.call(V[N].context,v,S,M);break;default:if(!Ne)for(xe=1,Ne=new Array(ke-1);xe<ke;xe++)Ne[xe-1]=arguments[xe];V[N].fn.apply(V[N].context,Ne)}}return!0},d.prototype.on=function(x,v,S){return f(this,x,v,S,!1)},d.prototype.once=function(x,v,S){return f(this,x,v,S,!0)},d.prototype.removeListener=function(x,v,S,M){var B=n?n+x:x;if(!this._events[B])return this;if(!v)return l(this,B),this;var G=this._events[B];if(G.fn)G.fn===v&&(!M||G.once)&&(!S||G.context===S)&&l(this,B);else{for(var Z=0,V=[],ke=G.length;Z<ke;Z++)(G[Z].fn!==v||M&&!G[Z].once||S&&G[Z].context!==S)&&V.push(G[Z]);V.length?this._events[B]=V.length===1?V[0]:V:l(this,B)}return this},d.prototype.removeAllListeners=function(x){var v;return x?(v=n?n+x:x,this._events[v]&&l(this,v)):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,s.exports=d})($f);var A_=$f.exports;const Nf=wi(A_);var Pi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Pi.exports;(function(s,r){(function(){var n,o="4.17.21",c=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",x=500,v="__lodash_placeholder__",S=1,M=2,B=4,G=1,Z=2,V=1,ke=2,Ne=4,N=8,ot=16,xe=32,Ke=64,at=128,ct=256,en=512,tn=30,Cr="...",Sr=800,T=16,F=1,w=2,L=3,O=1/0,K=9007199254740991,X=17976931348623157e292,Q=NaN,Y=4294967295,oe=Y-1,Rr=Y>>>1,Fu=[["ary",at],["bind",V],["bindKey",ke],["curry",N],["curryRight",ot],["flip",en],["partial",xe],["partialRight",Ke],["rearg",ct]],vn="[object Arguments]",Tr="[object Array]",$u="[object AsyncFunction]",zn="[object Boolean]",Wn="[object Date]",Nu="[object DOMException]",kr="[object Error]",Er="[object Function]",Bo="[object GeneratorFunction]",yt="[object Map]",jn="[object Number]",zu="[object Null]",wt="[object Object]",Uo="[object Promise]",Wu="[object Proxy]",Gn="[object RegExp]",vt="[object Set]",Vn="[object String]",Pr="[object Symbol]",ju="[object Undefined]",Kn="[object WeakMap]",Gu="[object WeakSet]",Hn="[object ArrayBuffer]",xn="[object DataView]",Bi="[object Float32Array]",Ui="[object Float64Array]",Fi="[object Int8Array]",$i="[object Int16Array]",Ni="[object Int32Array]",zi="[object Uint8Array]",Wi="[object Uint8ClampedArray]",ji="[object Uint16Array]",Gi="[object Uint32Array]",Vu=/\b__p \+= '';/g,Ku=/\b(__p \+=) '' \+/g,Hu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fo=/&(?:amp|lt|gt|quot|#39);/g,$o=/[&<>"']/g,Ju=RegExp(Fo.source),qu=RegExp($o.source),Yu=/<%-([\s\S]+?)%>/g,Zu=/<%([\s\S]+?)%>/g,No=/<%=([\s\S]+?)%>/g,Xu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qu=/^\w*$/,el=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vi=/[\\^$.*+?()[\]{}|]/g,tl=RegExp(Vi.source),Ki=/^\s+/,nl=/\s/,rl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,il=/\{\n\/\* \[wrapped with (.+)\] \*/,sl=/,? & /,ol=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,al=/[()=,{}\[\]\/\s]/,cl=/\\(\\)?/g,fl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zo=/\w*$/,ul=/^[-+]0x[0-9a-f]+$/i,ll=/^0b[01]+$/i,hl=/^\[object .+?Constructor\]$/,pl=/^0o[0-7]+$/i,dl=/^(?:0|[1-9]\d*)$/,gl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ar=/($^)/,ml=/['\n\r\u2028\u2029\\]/g,Ir="\\ud800-\\udfff",_l="\\u0300-\\u036f",yl="\\ufe20-\\ufe2f",vl="\\u20d0-\\u20ff",Wo=_l+yl+vl,jo="\\u2700-\\u27bf",Go="a-z\\xdf-\\xf6\\xf8-\\xff",xl="\\xac\\xb1\\xd7\\xf7",bl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Cl="\\u2000-\\u206f",Sl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vo="A-Z\\xc0-\\xd6\\xd8-\\xde",Ko="\\ufe0e\\ufe0f",Ho=xl+bl+Cl+Sl,Hi="['’]",Rl="["+Ir+"]",Jo="["+Ho+"]",Or="["+Wo+"]",qo="\\d+",Tl="["+jo+"]",Yo="["+Go+"]",Zo="[^"+Ir+Ho+qo+jo+Go+Vo+"]",Ji="\\ud83c[\\udffb-\\udfff]",kl="(?:"+Or+"|"+Ji+")",Xo="[^"+Ir+"]",qi="(?:\\ud83c[\\udde6-\\uddff]){2}",Yi="[\\ud800-\\udbff][\\udc00-\\udfff]",bn="["+Vo+"]",Qo="\\u200d",ea="(?:"+Yo+"|"+Zo+")",El="(?:"+bn+"|"+Zo+")",ta="(?:"+Hi+"(?:d|ll|m|re|s|t|ve))?",na="(?:"+Hi+"(?:D|LL|M|RE|S|T|VE))?",ra=kl+"?",ia="["+Ko+"]?",Pl="(?:"+Qo+"(?:"+[Xo,qi,Yi].join("|")+")"+ia+ra+")*",Al="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Il="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sa=ia+ra+Pl,Ol="(?:"+[Tl,qi,Yi].join("|")+")"+sa,Ml="(?:"+[Xo+Or+"?",Or,qi,Yi,Rl].join("|")+")",Dl=RegExp(Hi,"g"),wl=RegExp(Or,"g"),Zi=RegExp(Ji+"(?="+Ji+")|"+Ml+sa,"g"),Ll=RegExp([bn+"?"+Yo+"+"+ta+"(?="+[Jo,bn,"$"].join("|")+")",El+"+"+na+"(?="+[Jo,bn+ea,"$"].join("|")+")",bn+"?"+ea+"+"+ta,bn+"+"+na,Il,Al,qo,Ol].join("|"),"g"),Bl=RegExp("["+Qo+Ir+Wo+Ko+"]"),Ul=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$l=-1,me={};me[Bi]=me[Ui]=me[Fi]=me[$i]=me[Ni]=me[zi]=me[Wi]=me[ji]=me[Gi]=!0,me[vn]=me[Tr]=me[Hn]=me[zn]=me[xn]=me[Wn]=me[kr]=me[Er]=me[yt]=me[jn]=me[wt]=me[Gn]=me[vt]=me[Vn]=me[Kn]=!1;var ge={};ge[vn]=ge[Tr]=ge[Hn]=ge[xn]=ge[zn]=ge[Wn]=ge[Bi]=ge[Ui]=ge[Fi]=ge[$i]=ge[Ni]=ge[yt]=ge[jn]=ge[wt]=ge[Gn]=ge[vt]=ge[Vn]=ge[Pr]=ge[zi]=ge[Wi]=ge[ji]=ge[Gi]=!0,ge[kr]=ge[Er]=ge[Kn]=!1;var Nl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},zl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gl=parseFloat,Vl=parseInt,oa=typeof ur=="object"&&ur&&ur.Object===Object&&ur,Kl=typeof self=="object"&&self&&self.Object===Object&&self,Le=oa||Kl||Function("return this")(),Xi=r&&!r.nodeType&&r,nn=Xi&&!0&&s&&!s.nodeType&&s,aa=nn&&nn.exports===Xi,Qi=aa&&oa.process,ft=function(){try{var b=nn&&nn.require&&nn.require("util").types;return b||Qi&&Qi.binding&&Qi.binding("util")}catch{}}(),ca=ft&&ft.isArrayBuffer,fa=ft&&ft.isDate,ua=ft&&ft.isMap,la=ft&&ft.isRegExp,ha=ft&&ft.isSet,pa=ft&&ft.isTypedArray;function Qe(b,E,k){switch(k.length){case 0:return b.call(E);case 1:return b.call(E,k[0]);case 2:return b.call(E,k[0],k[1]);case 3:return b.call(E,k[0],k[1],k[2])}return b.apply(E,k)}function Hl(b,E,k,$){for(var ee=-1,le=b==null?0:b.length;++ee<le;){var Pe=b[ee];E($,Pe,k(Pe),b)}return $}function ut(b,E){for(var k=-1,$=b==null?0:b.length;++k<$&&E(b[k],k,b)!==!1;);return b}function Jl(b,E){for(var k=b==null?0:b.length;k--&&E(b[k],k,b)!==!1;);return b}function da(b,E){for(var k=-1,$=b==null?0:b.length;++k<$;)if(!E(b[k],k,b))return!1;return!0}function Gt(b,E){for(var k=-1,$=b==null?0:b.length,ee=0,le=[];++k<$;){var Pe=b[k];E(Pe,k,b)&&(le[ee++]=Pe)}return le}function Mr(b,E){var k=b==null?0:b.length;return!!k&&Cn(b,E,0)>-1}function es(b,E,k){for(var $=-1,ee=b==null?0:b.length;++$<ee;)if(k(E,b[$]))return!0;return!1}function ye(b,E){for(var k=-1,$=b==null?0:b.length,ee=Array($);++k<$;)ee[k]=E(b[k],k,b);return ee}function Vt(b,E){for(var k=-1,$=E.length,ee=b.length;++k<$;)b[ee+k]=E[k];return b}function ts(b,E,k,$){var ee=-1,le=b==null?0:b.length;for($&&le&&(k=b[++ee]);++ee<le;)k=E(k,b[ee],ee,b);return k}function ql(b,E,k,$){var ee=b==null?0:b.length;for($&&ee&&(k=b[--ee]);ee--;)k=E(k,b[ee],ee,b);return k}function ns(b,E){for(var k=-1,$=b==null?0:b.length;++k<$;)if(E(b[k],k,b))return!0;return!1}var Yl=rs("length");function Zl(b){return b.split("")}function Xl(b){return b.match(ol)||[]}function ga(b,E,k){var $;return k(b,function(ee,le,Pe){if(E(ee,le,Pe))return $=le,!1}),$}function Dr(b,E,k,$){for(var ee=b.length,le=k+($?1:-1);$?le--:++le<ee;)if(E(b[le],le,b))return le;return-1}function Cn(b,E,k){return E===E?uh(b,E,k):Dr(b,ma,k)}function Ql(b,E,k,$){for(var ee=k-1,le=b.length;++ee<le;)if($(b[ee],E))return ee;return-1}function ma(b){return b!==b}function _a(b,E){var k=b==null?0:b.length;return k?ss(b,E)/k:Q}function rs(b){return function(E){return E==null?n:E[b]}}function is(b){return function(E){return b==null?n:b[E]}}function ya(b,E,k,$,ee){return ee(b,function(le,Pe,de){k=$?($=!1,le):E(k,le,Pe,de)}),k}function eh(b,E){var k=b.length;for(b.sort(E);k--;)b[k]=b[k].value;return b}function ss(b,E){for(var k,$=-1,ee=b.length;++$<ee;){var le=E(b[$]);le!==n&&(k=k===n?le:k+le)}return k}function os(b,E){for(var k=-1,$=Array(b);++k<b;)$[k]=E(k);return $}function th(b,E){return ye(E,function(k){return[k,b[k]]})}function va(b){return b&&b.slice(0,Sa(b)+1).replace(Ki,"")}function et(b){return function(E){return b(E)}}function as(b,E){return ye(E,function(k){return b[k]})}function Jn(b,E){return b.has(E)}function xa(b,E){for(var k=-1,$=b.length;++k<$&&Cn(E,b[k],0)>-1;);return k}function ba(b,E){for(var k=b.length;k--&&Cn(E,b[k],0)>-1;);return k}function nh(b,E){for(var k=b.length,$=0;k--;)b[k]===E&&++$;return $}var rh=is(Nl),ih=is(zl);function sh(b){return"\\"+jl[b]}function oh(b,E){return b==null?n:b[E]}function Sn(b){return Bl.test(b)}function ah(b){return Ul.test(b)}function ch(b){for(var E,k=[];!(E=b.next()).done;)k.push(E.value);return k}function cs(b){var E=-1,k=Array(b.size);return b.forEach(function($,ee){k[++E]=[ee,$]}),k}function Ca(b,E){return function(k){return b(E(k))}}function Kt(b,E){for(var k=-1,$=b.length,ee=0,le=[];++k<$;){var Pe=b[k];(Pe===E||Pe===v)&&(b[k]=v,le[ee++]=k)}return le}function wr(b){var E=-1,k=Array(b.size);return b.forEach(function($){k[++E]=$}),k}function fh(b){var E=-1,k=Array(b.size);return b.forEach(function($){k[++E]=[$,$]}),k}function uh(b,E,k){for(var $=k-1,ee=b.length;++$<ee;)if(b[$]===E)return $;return-1}function lh(b,E,k){for(var $=k+1;$--;)if(b[$]===E)return $;return $}function Rn(b){return Sn(b)?ph(b):Yl(b)}function xt(b){return Sn(b)?dh(b):Zl(b)}function Sa(b){for(var E=b.length;E--&&nl.test(b.charAt(E)););return E}var hh=is(Wl);function ph(b){for(var E=Zi.lastIndex=0;Zi.test(b);)++E;return E}function dh(b){return b.match(Zi)||[]}function gh(b){return b.match(Ll)||[]}var mh=function b(E){E=E==null?Le:Tn.defaults(Le.Object(),E,Tn.pick(Le,Fl));var k=E.Array,$=E.Date,ee=E.Error,le=E.Function,Pe=E.Math,de=E.Object,fs=E.RegExp,_h=E.String,lt=E.TypeError,Lr=k.prototype,yh=le.prototype,kn=de.prototype,Br=E["__core-js_shared__"],Ur=yh.toString,pe=kn.hasOwnProperty,vh=0,Ra=function(){var e=/[^.]+$/.exec(Br&&Br.keys&&Br.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fr=kn.toString,xh=Ur.call(de),bh=Le._,Ch=fs("^"+Ur.call(pe).replace(Vi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$r=aa?E.Buffer:n,Ht=E.Symbol,Nr=E.Uint8Array,Ta=$r?$r.allocUnsafe:n,zr=Ca(de.getPrototypeOf,de),ka=de.create,Ea=kn.propertyIsEnumerable,Wr=Lr.splice,Pa=Ht?Ht.isConcatSpreadable:n,qn=Ht?Ht.iterator:n,rn=Ht?Ht.toStringTag:n,jr=function(){try{var e=fn(de,"defineProperty");return e({},"",{}),e}catch{}}(),Sh=E.clearTimeout!==Le.clearTimeout&&E.clearTimeout,Rh=$&&$.now!==Le.Date.now&&$.now,Th=E.setTimeout!==Le.setTimeout&&E.setTimeout,Gr=Pe.ceil,Vr=Pe.floor,us=de.getOwnPropertySymbols,kh=$r?$r.isBuffer:n,Aa=E.isFinite,Eh=Lr.join,Ph=Ca(de.keys,de),Ae=Pe.max,Ue=Pe.min,Ah=$.now,Ih=E.parseInt,Ia=Pe.random,Oh=Lr.reverse,ls=fn(E,"DataView"),Yn=fn(E,"Map"),hs=fn(E,"Promise"),En=fn(E,"Set"),Zn=fn(E,"WeakMap"),Xn=fn(de,"create"),Kr=Zn&&new Zn,Pn={},Mh=un(ls),Dh=un(Yn),wh=un(hs),Lh=un(En),Bh=un(Zn),Hr=Ht?Ht.prototype:n,Qn=Hr?Hr.valueOf:n,Oa=Hr?Hr.toString:n;function h(e){if(be(e)&&!te(e)&&!(e instanceof ae)){if(e instanceof ht)return e;if(pe.call(e,"__wrapped__"))return Mc(e)}return new ht(e)}var An=function(){function e(){}return function(t){if(!ve(t))return{};if(ka)return ka(t);e.prototype=t;var i=new e;return e.prototype=n,i}}();function Jr(){}function ht(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}h.templateSettings={escape:Yu,evaluate:Zu,interpolate:No,variable:"",imports:{_:h}},h.prototype=Jr.prototype,h.prototype.constructor=h,ht.prototype=An(Jr.prototype),ht.prototype.constructor=ht;function ae(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function Uh(){var e=new ae(this.__wrapped__);return e.__actions__=He(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=He(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=He(this.__views__),e}function Fh(){if(this.__filtered__){var e=new ae(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function $h(){var e=this.__wrapped__.value(),t=this.__dir__,i=te(e),a=t<0,u=i?e.length:0,p=Zp(0,u,this.__views__),m=p.start,_=p.end,C=_-m,A=a?_:m-1,I=this.__iteratees__,D=I.length,U=0,j=Ue(C,this.__takeCount__);if(!i||!a&&u==C&&j==C)return tc(e,this.__actions__);var J=[];e:for(;C--&&U<j;){A+=t;for(var re=-1,q=e[A];++re<D;){var se=I[re],ce=se.iteratee,rt=se.type,je=ce(q);if(rt==w)q=je;else if(!je){if(rt==F)continue e;break e}}J[U++]=q}return J}ae.prototype=An(Jr.prototype),ae.prototype.constructor=ae;function sn(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Nh(){this.__data__=Xn?Xn(null):{},this.size=0}function zh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Wh(e){var t=this.__data__;if(Xn){var i=t[e];return i===g?n:i}return pe.call(t,e)?t[e]:n}function jh(e){var t=this.__data__;return Xn?t[e]!==n:pe.call(t,e)}function Gh(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Xn&&t===n?g:t,this}sn.prototype.clear=Nh,sn.prototype.delete=zh,sn.prototype.get=Wh,sn.prototype.has=jh,sn.prototype.set=Gh;function Lt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Vh(){this.__data__=[],this.size=0}function Kh(e){var t=this.__data__,i=qr(t,e);if(i<0)return!1;var a=t.length-1;return i==a?t.pop():Wr.call(t,i,1),--this.size,!0}function Hh(e){var t=this.__data__,i=qr(t,e);return i<0?n:t[i][1]}function Jh(e){return qr(this.__data__,e)>-1}function qh(e,t){var i=this.__data__,a=qr(i,e);return a<0?(++this.size,i.push([e,t])):i[a][1]=t,this}Lt.prototype.clear=Vh,Lt.prototype.delete=Kh,Lt.prototype.get=Hh,Lt.prototype.has=Jh,Lt.prototype.set=qh;function Bt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}function Yh(){this.size=0,this.__data__={hash:new sn,map:new(Yn||Lt),string:new sn}}function Zh(e){var t=ai(this,e).delete(e);return this.size-=t?1:0,t}function Xh(e){return ai(this,e).get(e)}function Qh(e){return ai(this,e).has(e)}function ep(e,t){var i=ai(this,e),a=i.size;return i.set(e,t),this.size+=i.size==a?0:1,this}Bt.prototype.clear=Yh,Bt.prototype.delete=Zh,Bt.prototype.get=Xh,Bt.prototype.has=Qh,Bt.prototype.set=ep;function on(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Bt;++t<i;)this.add(e[t])}function tp(e){return this.__data__.set(e,g),this}function np(e){return this.__data__.has(e)}on.prototype.add=on.prototype.push=tp,on.prototype.has=np;function bt(e){var t=this.__data__=new Lt(e);this.size=t.size}function rp(){this.__data__=new Lt,this.size=0}function ip(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function sp(e){return this.__data__.get(e)}function op(e){return this.__data__.has(e)}function ap(e,t){var i=this.__data__;if(i instanceof Lt){var a=i.__data__;if(!Yn||a.length<c-1)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new Bt(a)}return i.set(e,t),this.size=i.size,this}bt.prototype.clear=rp,bt.prototype.delete=ip,bt.prototype.get=sp,bt.prototype.has=op,bt.prototype.set=ap;function Ma(e,t){var i=te(e),a=!i&&ln(e),u=!i&&!a&&Xt(e),p=!i&&!a&&!u&&Dn(e),m=i||a||u||p,_=m?os(e.length,_h):[],C=_.length;for(var A in e)(t||pe.call(e,A))&&!(m&&(A=="length"||u&&(A=="offset"||A=="parent")||p&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||Nt(A,C)))&&_.push(A);return _}function Da(e){var t=e.length;return t?e[Ss(0,t-1)]:n}function cp(e,t){return ci(He(e),an(t,0,e.length))}function fp(e){return ci(He(e))}function ps(e,t,i){(i!==n&&!Ct(e[t],i)||i===n&&!(t in e))&&Ut(e,t,i)}function er(e,t,i){var a=e[t];(!(pe.call(e,t)&&Ct(a,i))||i===n&&!(t in e))&&Ut(e,t,i)}function qr(e,t){for(var i=e.length;i--;)if(Ct(e[i][0],t))return i;return-1}function up(e,t,i,a){return Jt(e,function(u,p,m){t(a,u,i(u),m)}),a}function wa(e,t){return e&&Et(t,Me(t),e)}function lp(e,t){return e&&Et(t,qe(t),e)}function Ut(e,t,i){t=="__proto__"&&jr?jr(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function ds(e,t){for(var i=-1,a=t.length,u=k(a),p=e==null;++i<a;)u[i]=p?n:Js(e,t[i]);return u}function an(e,t,i){return e===e&&(i!==n&&(e=e<=i?e:i),t!==n&&(e=e>=t?e:t)),e}function pt(e,t,i,a,u,p){var m,_=t&S,C=t&M,A=t&B;if(i&&(m=u?i(e,a,u,p):i(e)),m!==n)return m;if(!ve(e))return e;var I=te(e);if(I){if(m=Qp(e),!_)return He(e,m)}else{var D=Fe(e),U=D==Er||D==Bo;if(Xt(e))return ic(e,_);if(D==wt||D==vn||U&&!u){if(m=C||U?{}:Sc(e),!_)return C?Wp(e,lp(m,e)):zp(e,wa(m,e))}else{if(!ge[D])return u?e:{};m=ed(e,D,_)}}p||(p=new bt);var j=p.get(e);if(j)return j;p.set(e,m),Xc(e)?e.forEach(function(q){m.add(pt(q,t,i,q,e,p))}):Yc(e)&&e.forEach(function(q,se){m.set(se,pt(q,t,i,se,e,p))});var J=A?C?ws:Ds:C?qe:Me,re=I?n:J(e);return ut(re||e,function(q,se){re&&(se=q,q=e[se]),er(m,se,pt(q,t,i,se,e,p))}),m}function hp(e){var t=Me(e);return function(i){return La(i,e,t)}}function La(e,t,i){var a=i.length;if(e==null)return!a;for(e=de(e);a--;){var u=i[a],p=t[u],m=e[u];if(m===n&&!(u in e)||!p(m))return!1}return!0}function Ba(e,t,i){if(typeof e!="function")throw new lt(l);return ar(function(){e.apply(n,i)},t)}function tr(e,t,i,a){var u=-1,p=Mr,m=!0,_=e.length,C=[],A=t.length;if(!_)return C;i&&(t=ye(t,et(i))),a?(p=es,m=!1):t.length>=c&&(p=Jn,m=!1,t=new on(t));e:for(;++u<_;){var I=e[u],D=i==null?I:i(I);if(I=a||I!==0?I:0,m&&D===D){for(var U=A;U--;)if(t[U]===D)continue e;C.push(I)}else p(t,D,a)||C.push(I)}return C}var Jt=fc(kt),Ua=fc(ms,!0);function pp(e,t){var i=!0;return Jt(e,function(a,u,p){return i=!!t(a,u,p),i}),i}function Yr(e,t,i){for(var a=-1,u=e.length;++a<u;){var p=e[a],m=t(p);if(m!=null&&(_===n?m===m&&!nt(m):i(m,_)))var _=m,C=p}return C}function dp(e,t,i,a){var u=e.length;for(i=ne(i),i<0&&(i=-i>u?0:u+i),a=a===n||a>u?u:ne(a),a<0&&(a+=u),a=i>a?0:ef(a);i<a;)e[i++]=t;return e}function Fa(e,t){var i=[];return Jt(e,function(a,u,p){t(a,u,p)&&i.push(a)}),i}function Be(e,t,i,a,u){var p=-1,m=e.length;for(i||(i=nd),u||(u=[]);++p<m;){var _=e[p];t>0&&i(_)?t>1?Be(_,t-1,i,a,u):Vt(u,_):a||(u[u.length]=_)}return u}var gs=uc(),$a=uc(!0);function kt(e,t){return e&&gs(e,t,Me)}function ms(e,t){return e&&$a(e,t,Me)}function Zr(e,t){return Gt(t,function(i){return zt(e[i])})}function cn(e,t){t=Yt(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[Pt(t[i++])];return i&&i==a?e:n}function Na(e,t,i){var a=t(e);return te(e)?a:Vt(a,i(e))}function ze(e){return e==null?e===n?ju:zu:rn&&rn in de(e)?Yp(e):fd(e)}function _s(e,t){return e>t}function gp(e,t){return e!=null&&pe.call(e,t)}function mp(e,t){return e!=null&&t in de(e)}function _p(e,t,i){return e>=Ue(t,i)&&e<Ae(t,i)}function ys(e,t,i){for(var a=i?es:Mr,u=e[0].length,p=e.length,m=p,_=k(p),C=1/0,A=[];m--;){var I=e[m];m&&t&&(I=ye(I,et(t))),C=Ue(I.length,C),_[m]=!i&&(t||u>=120&&I.length>=120)?new on(m&&I):n}I=e[0];var D=-1,U=_[0];e:for(;++D<u&&A.length<C;){var j=I[D],J=t?t(j):j;if(j=i||j!==0?j:0,!(U?Jn(U,J):a(A,J,i))){for(m=p;--m;){var re=_[m];if(!(re?Jn(re,J):a(e[m],J,i)))continue e}U&&U.push(J),A.push(j)}}return A}function yp(e,t,i,a){return kt(e,function(u,p,m){t(a,i(u),p,m)}),a}function nr(e,t,i){t=Yt(t,e),e=Ec(e,t);var a=e==null?e:e[Pt(gt(t))];return a==null?n:Qe(a,e,i)}function za(e){return be(e)&&ze(e)==vn}function vp(e){return be(e)&&ze(e)==Hn}function xp(e){return be(e)&&ze(e)==Wn}function rr(e,t,i,a,u){return e===t?!0:e==null||t==null||!be(e)&&!be(t)?e!==e&&t!==t:bp(e,t,i,a,rr,u)}function bp(e,t,i,a,u,p){var m=te(e),_=te(t),C=m?Tr:Fe(e),A=_?Tr:Fe(t);C=C==vn?wt:C,A=A==vn?wt:A;var I=C==wt,D=A==wt,U=C==A;if(U&&Xt(e)){if(!Xt(t))return!1;m=!0,I=!1}if(U&&!I)return p||(p=new bt),m||Dn(e)?xc(e,t,i,a,u,p):Jp(e,t,C,i,a,u,p);if(!(i&G)){var j=I&&pe.call(e,"__wrapped__"),J=D&&pe.call(t,"__wrapped__");if(j||J){var re=j?e.value():e,q=J?t.value():t;return p||(p=new bt),u(re,q,i,a,p)}}return U?(p||(p=new bt),qp(e,t,i,a,u,p)):!1}function Cp(e){return be(e)&&Fe(e)==yt}function vs(e,t,i,a){var u=i.length,p=u,m=!a;if(e==null)return!p;for(e=de(e);u--;){var _=i[u];if(m&&_[2]?_[1]!==e[_[0]]:!(_[0]in e))return!1}for(;++u<p;){_=i[u];var C=_[0],A=e[C],I=_[1];if(m&&_[2]){if(A===n&&!(C in e))return!1}else{var D=new bt;if(a)var U=a(A,I,C,e,t,D);if(!(U===n?rr(I,A,G|Z,a,D):U))return!1}}return!0}function Wa(e){if(!ve(e)||id(e))return!1;var t=zt(e)?Ch:hl;return t.test(un(e))}function Sp(e){return be(e)&&ze(e)==Gn}function Rp(e){return be(e)&&Fe(e)==vt}function Tp(e){return be(e)&&di(e.length)&&!!me[ze(e)]}function ja(e){return typeof e=="function"?e:e==null?Ye:typeof e=="object"?te(e)?Ka(e[0],e[1]):Va(e):hf(e)}function xs(e){if(!or(e))return Ph(e);var t=[];for(var i in de(e))pe.call(e,i)&&i!="constructor"&&t.push(i);return t}function kp(e){if(!ve(e))return cd(e);var t=or(e),i=[];for(var a in e)a=="constructor"&&(t||!pe.call(e,a))||i.push(a);return i}function bs(e,t){return e<t}function Ga(e,t){var i=-1,a=Je(e)?k(e.length):[];return Jt(e,function(u,p,m){a[++i]=t(u,p,m)}),a}function Va(e){var t=Bs(e);return t.length==1&&t[0][2]?Tc(t[0][0],t[0][1]):function(i){return i===e||vs(i,e,t)}}function Ka(e,t){return Fs(e)&&Rc(t)?Tc(Pt(e),t):function(i){var a=Js(i,e);return a===n&&a===t?qs(i,e):rr(t,a,G|Z)}}function Xr(e,t,i,a,u){e!==t&&gs(t,function(p,m){if(u||(u=new bt),ve(p))Ep(e,t,m,i,Xr,a,u);else{var _=a?a(Ns(e,m),p,m+"",e,t,u):n;_===n&&(_=p),ps(e,m,_)}},qe)}function Ep(e,t,i,a,u,p,m){var _=Ns(e,i),C=Ns(t,i),A=m.get(C);if(A){ps(e,i,A);return}var I=p?p(_,C,i+"",e,t,m):n,D=I===n;if(D){var U=te(C),j=!U&&Xt(C),J=!U&&!j&&Dn(C);I=C,U||j||J?te(_)?I=_:Re(_)?I=He(_):j?(D=!1,I=ic(C,!0)):J?(D=!1,I=sc(C,!0)):I=[]:cr(C)||ln(C)?(I=_,ln(_)?I=tf(_):(!ve(_)||zt(_))&&(I=Sc(C))):D=!1}D&&(m.set(C,I),u(I,C,a,p,m),m.delete(C)),ps(e,i,I)}function Ha(e,t){var i=e.length;if(i)return t+=t<0?i:0,Nt(t,i)?e[t]:n}function Ja(e,t,i){t.length?t=ye(t,function(p){return te(p)?function(m){return cn(m,p.length===1?p[0]:p)}:p}):t=[Ye];var a=-1;t=ye(t,et(H()));var u=Ga(e,function(p,m,_){var C=ye(t,function(A){return A(p)});return{criteria:C,index:++a,value:p}});return eh(u,function(p,m){return Np(p,m,i)})}function Pp(e,t){return qa(e,t,function(i,a){return qs(e,a)})}function qa(e,t,i){for(var a=-1,u=t.length,p={};++a<u;){var m=t[a],_=cn(e,m);i(_,m)&&ir(p,Yt(m,e),_)}return p}function Ap(e){return function(t){return cn(t,e)}}function Cs(e,t,i,a){var u=a?Ql:Cn,p=-1,m=t.length,_=e;for(e===t&&(t=He(t)),i&&(_=ye(e,et(i)));++p<m;)for(var C=0,A=t[p],I=i?i(A):A;(C=u(_,I,C,a))>-1;)_!==e&&Wr.call(_,C,1),Wr.call(e,C,1);return e}function Ya(e,t){for(var i=e?t.length:0,a=i-1;i--;){var u=t[i];if(i==a||u!==p){var p=u;Nt(u)?Wr.call(e,u,1):ks(e,u)}}return e}function Ss(e,t){return e+Vr(Ia()*(t-e+1))}function Ip(e,t,i,a){for(var u=-1,p=Ae(Gr((t-e)/(i||1)),0),m=k(p);p--;)m[a?p:++u]=e,e+=i;return m}function Rs(e,t){var i="";if(!e||t<1||t>K)return i;do t%2&&(i+=e),t=Vr(t/2),t&&(e+=e);while(t);return i}function ie(e,t){return zs(kc(e,t,Ye),e+"")}function Op(e){return Da(wn(e))}function Mp(e,t){var i=wn(e);return ci(i,an(t,0,i.length))}function ir(e,t,i,a){if(!ve(e))return e;t=Yt(t,e);for(var u=-1,p=t.length,m=p-1,_=e;_!=null&&++u<p;){var C=Pt(t[u]),A=i;if(C==="__proto__"||C==="constructor"||C==="prototype")return e;if(u!=m){var I=_[C];A=a?a(I,C,_):n,A===n&&(A=ve(I)?I:Nt(t[u+1])?[]:{})}er(_,C,A),_=_[C]}return e}var Za=Kr?function(e,t){return Kr.set(e,t),e}:Ye,Dp=jr?function(e,t){return jr(e,"toString",{configurable:!0,enumerable:!1,value:Zs(t),writable:!0})}:Ye;function wp(e){return ci(wn(e))}function dt(e,t,i){var a=-1,u=e.length;t<0&&(t=-t>u?0:u+t),i=i>u?u:i,i<0&&(i+=u),u=t>i?0:i-t>>>0,t>>>=0;for(var p=k(u);++a<u;)p[a]=e[a+t];return p}function Lp(e,t){var i;return Jt(e,function(a,u,p){return i=t(a,u,p),!i}),!!i}function Qr(e,t,i){var a=0,u=e==null?a:e.length;if(typeof t=="number"&&t===t&&u<=Rr){for(;a<u;){var p=a+u>>>1,m=e[p];m!==null&&!nt(m)&&(i?m<=t:m<t)?a=p+1:u=p}return u}return Ts(e,t,Ye,i)}function Ts(e,t,i,a){var u=0,p=e==null?0:e.length;if(p===0)return 0;t=i(t);for(var m=t!==t,_=t===null,C=nt(t),A=t===n;u<p;){var I=Vr((u+p)/2),D=i(e[I]),U=D!==n,j=D===null,J=D===D,re=nt(D);if(m)var q=a||J;else A?q=J&&(a||U):_?q=J&&U&&(a||!j):C?q=J&&U&&!j&&(a||!re):j||re?q=!1:q=a?D<=t:D<t;q?u=I+1:p=I}return Ue(p,oe)}function Xa(e,t){for(var i=-1,a=e.length,u=0,p=[];++i<a;){var m=e[i],_=t?t(m):m;if(!i||!Ct(_,C)){var C=_;p[u++]=m===0?0:m}}return p}function Qa(e){return typeof e=="number"?e:nt(e)?Q:+e}function tt(e){if(typeof e=="string")return e;if(te(e))return ye(e,tt)+"";if(nt(e))return Oa?Oa.call(e):"";var t=e+"";return t=="0"&&1/e==-O?"-0":t}function qt(e,t,i){var a=-1,u=Mr,p=e.length,m=!0,_=[],C=_;if(i)m=!1,u=es;else if(p>=c){var A=t?null:Kp(e);if(A)return wr(A);m=!1,u=Jn,C=new on}else C=t?[]:_;e:for(;++a<p;){var I=e[a],D=t?t(I):I;if(I=i||I!==0?I:0,m&&D===D){for(var U=C.length;U--;)if(C[U]===D)continue e;t&&C.push(D),_.push(I)}else u(C,D,i)||(C!==_&&C.push(D),_.push(I))}return _}function ks(e,t){return t=Yt(t,e),e=Ec(e,t),e==null||delete e[Pt(gt(t))]}function ec(e,t,i,a){return ir(e,t,i(cn(e,t)),a)}function ei(e,t,i,a){for(var u=e.length,p=a?u:-1;(a?p--:++p<u)&&t(e[p],p,e););return i?dt(e,a?0:p,a?p+1:u):dt(e,a?p+1:0,a?u:p)}function tc(e,t){var i=e;return i instanceof ae&&(i=i.value()),ts(t,function(a,u){return u.func.apply(u.thisArg,Vt([a],u.args))},i)}function Es(e,t,i){var a=e.length;if(a<2)return a?qt(e[0]):[];for(var u=-1,p=k(a);++u<a;)for(var m=e[u],_=-1;++_<a;)_!=u&&(p[u]=tr(p[u]||m,e[_],t,i));return qt(Be(p,1),t,i)}function nc(e,t,i){for(var a=-1,u=e.length,p=t.length,m={};++a<u;){var _=a<p?t[a]:n;i(m,e[a],_)}return m}function Ps(e){return Re(e)?e:[]}function As(e){return typeof e=="function"?e:Ye}function Yt(e,t){return te(e)?e:Fs(e,t)?[e]:Oc(he(e))}var Bp=ie;function Zt(e,t,i){var a=e.length;return i=i===n?a:i,!t&&i>=a?e:dt(e,t,i)}var rc=Sh||function(e){return Le.clearTimeout(e)};function ic(e,t){if(t)return e.slice();var i=e.length,a=Ta?Ta(i):new e.constructor(i);return e.copy(a),a}function Is(e){var t=new e.constructor(e.byteLength);return new Nr(t).set(new Nr(e)),t}function Up(e,t){var i=t?Is(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Fp(e){var t=new e.constructor(e.source,zo.exec(e));return t.lastIndex=e.lastIndex,t}function $p(e){return Qn?de(Qn.call(e)):{}}function sc(e,t){var i=t?Is(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function oc(e,t){if(e!==t){var i=e!==n,a=e===null,u=e===e,p=nt(e),m=t!==n,_=t===null,C=t===t,A=nt(t);if(!_&&!A&&!p&&e>t||p&&m&&C&&!_&&!A||a&&m&&C||!i&&C||!u)return 1;if(!a&&!p&&!A&&e<t||A&&i&&u&&!a&&!p||_&&i&&u||!m&&u||!C)return-1}return 0}function Np(e,t,i){for(var a=-1,u=e.criteria,p=t.criteria,m=u.length,_=i.length;++a<m;){var C=oc(u[a],p[a]);if(C){if(a>=_)return C;var A=i[a];return C*(A=="desc"?-1:1)}}return e.index-t.index}function ac(e,t,i,a){for(var u=-1,p=e.length,m=i.length,_=-1,C=t.length,A=Ae(p-m,0),I=k(C+A),D=!a;++_<C;)I[_]=t[_];for(;++u<m;)(D||u<p)&&(I[i[u]]=e[u]);for(;A--;)I[_++]=e[u++];return I}function cc(e,t,i,a){for(var u=-1,p=e.length,m=-1,_=i.length,C=-1,A=t.length,I=Ae(p-_,0),D=k(I+A),U=!a;++u<I;)D[u]=e[u];for(var j=u;++C<A;)D[j+C]=t[C];for(;++m<_;)(U||u<p)&&(D[j+i[m]]=e[u++]);return D}function He(e,t){var i=-1,a=e.length;for(t||(t=k(a));++i<a;)t[i]=e[i];return t}function Et(e,t,i,a){var u=!i;i||(i={});for(var p=-1,m=t.length;++p<m;){var _=t[p],C=a?a(i[_],e[_],_,i,e):n;C===n&&(C=e[_]),u?Ut(i,_,C):er(i,_,C)}return i}function zp(e,t){return Et(e,Us(e),t)}function Wp(e,t){return Et(e,bc(e),t)}function ti(e,t){return function(i,a){var u=te(i)?Hl:up,p=t?t():{};return u(i,e,H(a,2),p)}}function In(e){return ie(function(t,i){var a=-1,u=i.length,p=u>1?i[u-1]:n,m=u>2?i[2]:n;for(p=e.length>3&&typeof p=="function"?(u--,p):n,m&&We(i[0],i[1],m)&&(p=u<3?n:p,u=1),t=de(t);++a<u;){var _=i[a];_&&e(t,_,a,p)}return t})}function fc(e,t){return function(i,a){if(i==null)return i;if(!Je(i))return e(i,a);for(var u=i.length,p=t?u:-1,m=de(i);(t?p--:++p<u)&&a(m[p],p,m)!==!1;);return i}}function uc(e){return function(t,i,a){for(var u=-1,p=de(t),m=a(t),_=m.length;_--;){var C=m[e?_:++u];if(i(p[C],C,p)===!1)break}return t}}function jp(e,t,i){var a=t&V,u=sr(e);function p(){var m=this&&this!==Le&&this instanceof p?u:e;return m.apply(a?i:this,arguments)}return p}function lc(e){return function(t){t=he(t);var i=Sn(t)?xt(t):n,a=i?i[0]:t.charAt(0),u=i?Zt(i,1).join(""):t.slice(1);return a[e]()+u}}function On(e){return function(t){return ts(uf(ff(t).replace(Dl,"")),e,"")}}function sr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=An(e.prototype),a=e.apply(i,t);return ve(a)?a:i}}function Gp(e,t,i){var a=sr(e);function u(){for(var p=arguments.length,m=k(p),_=p,C=Mn(u);_--;)m[_]=arguments[_];var A=p<3&&m[0]!==C&&m[p-1]!==C?[]:Kt(m,C);if(p-=A.length,p<i)return mc(e,t,ni,u.placeholder,n,m,A,n,n,i-p);var I=this&&this!==Le&&this instanceof u?a:e;return Qe(I,this,m)}return u}function hc(e){return function(t,i,a){var u=de(t);if(!Je(t)){var p=H(i,3);t=Me(t),i=function(_){return p(u[_],_,u)}}var m=e(t,i,a);return m>-1?u[p?t[m]:m]:n}}function pc(e){return $t(function(t){var i=t.length,a=i,u=ht.prototype.thru;for(e&&t.reverse();a--;){var p=t[a];if(typeof p!="function")throw new lt(l);if(u&&!m&&oi(p)=="wrapper")var m=new ht([],!0)}for(a=m?a:i;++a<i;){p=t[a];var _=oi(p),C=_=="wrapper"?Ls(p):n;C&&$s(C[0])&&C[1]==(at|N|xe|ct)&&!C[4].length&&C[9]==1?m=m[oi(C[0])].apply(m,C[3]):m=p.length==1&&$s(p)?m[_]():m.thru(p)}return function(){var A=arguments,I=A[0];if(m&&A.length==1&&te(I))return m.plant(I).value();for(var D=0,U=i?t[D].apply(this,A):I;++D<i;)U=t[D].call(this,U);return U}})}function ni(e,t,i,a,u,p,m,_,C,A){var I=t&at,D=t&V,U=t&ke,j=t&(N|ot),J=t&en,re=U?n:sr(e);function q(){for(var se=arguments.length,ce=k(se),rt=se;rt--;)ce[rt]=arguments[rt];if(j)var je=Mn(q),it=nh(ce,je);if(a&&(ce=ac(ce,a,u,j)),p&&(ce=cc(ce,p,m,j)),se-=it,j&&se<A){var Te=Kt(ce,je);return mc(e,t,ni,q.placeholder,i,ce,Te,_,C,A-se)}var St=D?i:this,jt=U?St[e]:e;return se=ce.length,_?ce=ud(ce,_):J&&se>1&&ce.reverse(),I&&C<se&&(ce.length=C),this&&this!==Le&&this instanceof q&&(jt=re||sr(jt)),jt.apply(St,ce)}return q}function dc(e,t){return function(i,a){return yp(i,e,t(a),{})}}function ri(e,t){return function(i,a){var u;if(i===n&&a===n)return t;if(i!==n&&(u=i),a!==n){if(u===n)return a;typeof i=="string"||typeof a=="string"?(i=tt(i),a=tt(a)):(i=Qa(i),a=Qa(a)),u=e(i,a)}return u}}function Os(e){return $t(function(t){return t=ye(t,et(H())),ie(function(i){var a=this;return e(t,function(u){return Qe(u,a,i)})})})}function ii(e,t){t=t===n?" ":tt(t);var i=t.length;if(i<2)return i?Rs(t,e):t;var a=Rs(t,Gr(e/Rn(t)));return Sn(t)?Zt(xt(a),0,e).join(""):a.slice(0,e)}function Vp(e,t,i,a){var u=t&V,p=sr(e);function m(){for(var _=-1,C=arguments.length,A=-1,I=a.length,D=k(I+C),U=this&&this!==Le&&this instanceof m?p:e;++A<I;)D[A]=a[A];for(;C--;)D[A++]=arguments[++_];return Qe(U,u?i:this,D)}return m}function gc(e){return function(t,i,a){return a&&typeof a!="number"&&We(t,i,a)&&(i=a=n),t=Wt(t),i===n?(i=t,t=0):i=Wt(i),a=a===n?t<i?1:-1:Wt(a),Ip(t,i,a,e)}}function si(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=mt(t),i=mt(i)),e(t,i)}}function mc(e,t,i,a,u,p,m,_,C,A){var I=t&N,D=I?m:n,U=I?n:m,j=I?p:n,J=I?n:p;t|=I?xe:Ke,t&=~(I?Ke:xe),t&Ne||(t&=~(V|ke));var re=[e,t,u,j,D,J,U,_,C,A],q=i.apply(n,re);return $s(e)&&Pc(q,re),q.placeholder=a,Ac(q,e,t)}function Ms(e){var t=Pe[e];return function(i,a){if(i=mt(i),a=a==null?0:Ue(ne(a),292),a&&Aa(i)){var u=(he(i)+"e").split("e"),p=t(u[0]+"e"+(+u[1]+a));return u=(he(p)+"e").split("e"),+(u[0]+"e"+(+u[1]-a))}return t(i)}}var Kp=En&&1/wr(new En([,-0]))[1]==O?function(e){return new En(e)}:eo;function _c(e){return function(t){var i=Fe(t);return i==yt?cs(t):i==vt?fh(t):th(t,e(t))}}function Ft(e,t,i,a,u,p,m,_){var C=t&ke;if(!C&&typeof e!="function")throw new lt(l);var A=a?a.length:0;if(A||(t&=~(xe|Ke),a=u=n),m=m===n?m:Ae(ne(m),0),_=_===n?_:ne(_),A-=u?u.length:0,t&Ke){var I=a,D=u;a=u=n}var U=C?n:Ls(e),j=[e,t,i,a,u,I,D,p,m,_];if(U&&ad(j,U),e=j[0],t=j[1],i=j[2],a=j[3],u=j[4],_=j[9]=j[9]===n?C?0:e.length:Ae(j[9]-A,0),!_&&t&(N|ot)&&(t&=~(N|ot)),!t||t==V)var J=jp(e,t,i);else t==N||t==ot?J=Gp(e,t,_):(t==xe||t==(V|xe))&&!u.length?J=Vp(e,t,i,a):J=ni.apply(n,j);var re=U?Za:Pc;return Ac(re(J,j),e,t)}function yc(e,t,i,a){return e===n||Ct(e,kn[i])&&!pe.call(a,i)?t:e}function vc(e,t,i,a,u,p){return ve(e)&&ve(t)&&(p.set(t,e),Xr(e,t,n,vc,p),p.delete(t)),e}function Hp(e){return cr(e)?n:e}function xc(e,t,i,a,u,p){var m=i&G,_=e.length,C=t.length;if(_!=C&&!(m&&C>_))return!1;var A=p.get(e),I=p.get(t);if(A&&I)return A==t&&I==e;var D=-1,U=!0,j=i&Z?new on:n;for(p.set(e,t),p.set(t,e);++D<_;){var J=e[D],re=t[D];if(a)var q=m?a(re,J,D,t,e,p):a(J,re,D,e,t,p);if(q!==n){if(q)continue;U=!1;break}if(j){if(!ns(t,function(se,ce){if(!Jn(j,ce)&&(J===se||u(J,se,i,a,p)))return j.push(ce)})){U=!1;break}}else if(!(J===re||u(J,re,i,a,p))){U=!1;break}}return p.delete(e),p.delete(t),U}function Jp(e,t,i,a,u,p,m){switch(i){case xn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Hn:return!(e.byteLength!=t.byteLength||!p(new Nr(e),new Nr(t)));case zn:case Wn:case jn:return Ct(+e,+t);case kr:return e.name==t.name&&e.message==t.message;case Gn:case Vn:return e==t+"";case yt:var _=cs;case vt:var C=a&G;if(_||(_=wr),e.size!=t.size&&!C)return!1;var A=m.get(e);if(A)return A==t;a|=Z,m.set(e,t);var I=xc(_(e),_(t),a,u,p,m);return m.delete(e),I;case Pr:if(Qn)return Qn.call(e)==Qn.call(t)}return!1}function qp(e,t,i,a,u,p){var m=i&G,_=Ds(e),C=_.length,A=Ds(t),I=A.length;if(C!=I&&!m)return!1;for(var D=C;D--;){var U=_[D];if(!(m?U in t:pe.call(t,U)))return!1}var j=p.get(e),J=p.get(t);if(j&&J)return j==t&&J==e;var re=!0;p.set(e,t),p.set(t,e);for(var q=m;++D<C;){U=_[D];var se=e[U],ce=t[U];if(a)var rt=m?a(ce,se,U,t,e,p):a(se,ce,U,e,t,p);if(!(rt===n?se===ce||u(se,ce,i,a,p):rt)){re=!1;break}q||(q=U=="constructor")}if(re&&!q){var je=e.constructor,it=t.constructor;je!=it&&"constructor"in e&&"constructor"in t&&!(typeof je=="function"&&je instanceof je&&typeof it=="function"&&it instanceof it)&&(re=!1)}return p.delete(e),p.delete(t),re}function $t(e){return zs(kc(e,n,Lc),e+"")}function Ds(e){return Na(e,Me,Us)}function ws(e){return Na(e,qe,bc)}var Ls=Kr?function(e){return Kr.get(e)}:eo;function oi(e){for(var t=e.name+"",i=Pn[t],a=pe.call(Pn,t)?i.length:0;a--;){var u=i[a],p=u.func;if(p==null||p==e)return u.name}return t}function Mn(e){var t=pe.call(h,"placeholder")?h:e;return t.placeholder}function H(){var e=h.iteratee||Xs;return e=e===Xs?ja:e,arguments.length?e(arguments[0],arguments[1]):e}function ai(e,t){var i=e.__data__;return rd(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Bs(e){for(var t=Me(e),i=t.length;i--;){var a=t[i],u=e[a];t[i]=[a,u,Rc(u)]}return t}function fn(e,t){var i=oh(e,t);return Wa(i)?i:n}function Yp(e){var t=pe.call(e,rn),i=e[rn];try{e[rn]=n;var a=!0}catch{}var u=Fr.call(e);return a&&(t?e[rn]=i:delete e[rn]),u}var Us=us?function(e){return e==null?[]:(e=de(e),Gt(us(e),function(t){return Ea.call(e,t)}))}:to,bc=us?function(e){for(var t=[];e;)Vt(t,Us(e)),e=zr(e);return t}:to,Fe=ze;(ls&&Fe(new ls(new ArrayBuffer(1)))!=xn||Yn&&Fe(new Yn)!=yt||hs&&Fe(hs.resolve())!=Uo||En&&Fe(new En)!=vt||Zn&&Fe(new Zn)!=Kn)&&(Fe=function(e){var t=ze(e),i=t==wt?e.constructor:n,a=i?un(i):"";if(a)switch(a){case Mh:return xn;case Dh:return yt;case wh:return Uo;case Lh:return vt;case Bh:return Kn}return t});function Zp(e,t,i){for(var a=-1,u=i.length;++a<u;){var p=i[a],m=p.size;switch(p.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Ue(t,e+m);break;case"takeRight":e=Ae(e,t-m);break}}return{start:e,end:t}}function Xp(e){var t=e.match(il);return t?t[1].split(sl):[]}function Cc(e,t,i){t=Yt(t,e);for(var a=-1,u=t.length,p=!1;++a<u;){var m=Pt(t[a]);if(!(p=e!=null&&i(e,m)))break;e=e[m]}return p||++a!=u?p:(u=e==null?0:e.length,!!u&&di(u)&&Nt(m,u)&&(te(e)||ln(e)))}function Qp(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&pe.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Sc(e){return typeof e.constructor=="function"&&!or(e)?An(zr(e)):{}}function ed(e,t,i){var a=e.constructor;switch(t){case Hn:return Is(e);case zn:case Wn:return new a(+e);case xn:return Up(e,i);case Bi:case Ui:case Fi:case $i:case Ni:case zi:case Wi:case ji:case Gi:return sc(e,i);case yt:return new a;case jn:case Vn:return new a(e);case Gn:return Fp(e);case vt:return new a;case Pr:return $p(e)}}function td(e,t){var i=t.length;if(!i)return e;var a=i-1;return t[a]=(i>1?"& ":"")+t[a],t=t.join(i>2?", ":" "),e.replace(rl,`{
/* [wrapped with `+t+`] */
`)}function nd(e){return te(e)||ln(e)||!!(Pa&&e&&e[Pa])}function Nt(e,t){var i=typeof e;return t=t??K,!!t&&(i=="number"||i!="symbol"&&dl.test(e))&&e>-1&&e%1==0&&e<t}function We(e,t,i){if(!ve(i))return!1;var a=typeof t;return(a=="number"?Je(i)&&Nt(t,i.length):a=="string"&&t in i)?Ct(i[t],e):!1}function Fs(e,t){if(te(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||nt(e)?!0:Qu.test(e)||!Xu.test(e)||t!=null&&e in de(t)}function rd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function $s(e){var t=oi(e),i=h[t];if(typeof i!="function"||!(t in ae.prototype))return!1;if(e===i)return!0;var a=Ls(i);return!!a&&e===a[0]}function id(e){return!!Ra&&Ra in e}var sd=Br?zt:no;function or(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||kn;return e===i}function Rc(e){return e===e&&!ve(e)}function Tc(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==n||e in de(i))}}function od(e){var t=hi(e,function(a){return i.size===x&&i.clear(),a}),i=t.cache;return t}function ad(e,t){var i=e[1],a=t[1],u=i|a,p=u<(V|ke|at),m=a==at&&i==N||a==at&&i==ct&&e[7].length<=t[8]||a==(at|ct)&&t[7].length<=t[8]&&i==N;if(!(p||m))return e;a&V&&(e[2]=t[2],u|=i&V?0:Ne);var _=t[3];if(_){var C=e[3];e[3]=C?ac(C,_,t[4]):_,e[4]=C?Kt(e[3],v):t[4]}return _=t[5],_&&(C=e[5],e[5]=C?cc(C,_,t[6]):_,e[6]=C?Kt(e[5],v):t[6]),_=t[7],_&&(e[7]=_),a&at&&(e[8]=e[8]==null?t[8]:Ue(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}function cd(e){var t=[];if(e!=null)for(var i in de(e))t.push(i);return t}function fd(e){return Fr.call(e)}function kc(e,t,i){return t=Ae(t===n?e.length-1:t,0),function(){for(var a=arguments,u=-1,p=Ae(a.length-t,0),m=k(p);++u<p;)m[u]=a[t+u];u=-1;for(var _=k(t+1);++u<t;)_[u]=a[u];return _[t]=i(m),Qe(e,this,_)}}function Ec(e,t){return t.length<2?e:cn(e,dt(t,0,-1))}function ud(e,t){for(var i=e.length,a=Ue(t.length,i),u=He(e);a--;){var p=t[a];e[a]=Nt(p,i)?u[p]:n}return e}function Ns(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Pc=Ic(Za),ar=Th||function(e,t){return Le.setTimeout(e,t)},zs=Ic(Dp);function Ac(e,t,i){var a=t+"";return zs(e,td(a,ld(Xp(a),i)))}function Ic(e){var t=0,i=0;return function(){var a=Ah(),u=T-(a-i);if(i=a,u>0){if(++t>=Sr)return arguments[0]}else t=0;return e.apply(n,arguments)}}function ci(e,t){var i=-1,a=e.length,u=a-1;for(t=t===n?a:t;++i<t;){var p=Ss(i,u),m=e[p];e[p]=e[i],e[i]=m}return e.length=t,e}var Oc=od(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(el,function(i,a,u,p){t.push(u?p.replace(cl,"$1"):a||i)}),t});function Pt(e){if(typeof e=="string"||nt(e))return e;var t=e+"";return t=="0"&&1/e==-O?"-0":t}function un(e){if(e!=null){try{return Ur.call(e)}catch{}try{return e+""}catch{}}return""}function ld(e,t){return ut(Fu,function(i){var a="_."+i[0];t&i[1]&&!Mr(e,a)&&e.push(a)}),e.sort()}function Mc(e){if(e instanceof ae)return e.clone();var t=new ht(e.__wrapped__,e.__chain__);return t.__actions__=He(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function hd(e,t,i){(i?We(e,t,i):t===n)?t=1:t=Ae(ne(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var u=0,p=0,m=k(Gr(a/t));u<a;)m[p++]=dt(e,u,u+=t);return m}function pd(e){for(var t=-1,i=e==null?0:e.length,a=0,u=[];++t<i;){var p=e[t];p&&(u[a++]=p)}return u}function dd(){var e=arguments.length;if(!e)return[];for(var t=k(e-1),i=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Vt(te(i)?He(i):[i],Be(t,1))}var gd=ie(function(e,t){return Re(e)?tr(e,Be(t,1,Re,!0)):[]}),md=ie(function(e,t){var i=gt(t);return Re(i)&&(i=n),Re(e)?tr(e,Be(t,1,Re,!0),H(i,2)):[]}),_d=ie(function(e,t){var i=gt(t);return Re(i)&&(i=n),Re(e)?tr(e,Be(t,1,Re,!0),n,i):[]});function yd(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===n?1:ne(t),dt(e,t<0?0:t,a)):[]}function vd(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===n?1:ne(t),t=a-t,dt(e,0,t<0?0:t)):[]}function xd(e,t){return e&&e.length?ei(e,H(t,3),!0,!0):[]}function bd(e,t){return e&&e.length?ei(e,H(t,3),!0):[]}function Cd(e,t,i,a){var u=e==null?0:e.length;return u?(i&&typeof i!="number"&&We(e,t,i)&&(i=0,a=u),dp(e,t,i,a)):[]}function Dc(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var u=i==null?0:ne(i);return u<0&&(u=Ae(a+u,0)),Dr(e,H(t,3),u)}function wc(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var u=a-1;return i!==n&&(u=ne(i),u=i<0?Ae(a+u,0):Ue(u,a-1)),Dr(e,H(t,3),u,!0)}function Lc(e){var t=e==null?0:e.length;return t?Be(e,1):[]}function Sd(e){var t=e==null?0:e.length;return t?Be(e,O):[]}function Rd(e,t){var i=e==null?0:e.length;return i?(t=t===n?1:ne(t),Be(e,t)):[]}function Td(e){for(var t=-1,i=e==null?0:e.length,a={};++t<i;){var u=e[t];a[u[0]]=u[1]}return a}function Bc(e){return e&&e.length?e[0]:n}function kd(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var u=i==null?0:ne(i);return u<0&&(u=Ae(a+u,0)),Cn(e,t,u)}function Ed(e){var t=e==null?0:e.length;return t?dt(e,0,-1):[]}var Pd=ie(function(e){var t=ye(e,Ps);return t.length&&t[0]===e[0]?ys(t):[]}),Ad=ie(function(e){var t=gt(e),i=ye(e,Ps);return t===gt(i)?t=n:i.pop(),i.length&&i[0]===e[0]?ys(i,H(t,2)):[]}),Id=ie(function(e){var t=gt(e),i=ye(e,Ps);return t=typeof t=="function"?t:n,t&&i.pop(),i.length&&i[0]===e[0]?ys(i,n,t):[]});function Od(e,t){return e==null?"":Eh.call(e,t)}function gt(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Md(e,t,i){var a=e==null?0:e.length;if(!a)return-1;var u=a;return i!==n&&(u=ne(i),u=u<0?Ae(a+u,0):Ue(u,a-1)),t===t?lh(e,t,u):Dr(e,ma,u,!0)}function Dd(e,t){return e&&e.length?Ha(e,ne(t)):n}var wd=ie(Uc);function Uc(e,t){return e&&e.length&&t&&t.length?Cs(e,t):e}function Ld(e,t,i){return e&&e.length&&t&&t.length?Cs(e,t,H(i,2)):e}function Bd(e,t,i){return e&&e.length&&t&&t.length?Cs(e,t,n,i):e}var Ud=$t(function(e,t){var i=e==null?0:e.length,a=ds(e,t);return Ya(e,ye(t,function(u){return Nt(u,i)?+u:u}).sort(oc)),a});function Fd(e,t){var i=[];if(!(e&&e.length))return i;var a=-1,u=[],p=e.length;for(t=H(t,3);++a<p;){var m=e[a];t(m,a,e)&&(i.push(m),u.push(a))}return Ya(e,u),i}function Ws(e){return e==null?e:Oh.call(e)}function $d(e,t,i){var a=e==null?0:e.length;return a?(i&&typeof i!="number"&&We(e,t,i)?(t=0,i=a):(t=t==null?0:ne(t),i=i===n?a:ne(i)),dt(e,t,i)):[]}function Nd(e,t){return Qr(e,t)}function zd(e,t,i){return Ts(e,t,H(i,2))}function Wd(e,t){var i=e==null?0:e.length;if(i){var a=Qr(e,t);if(a<i&&Ct(e[a],t))return a}return-1}function jd(e,t){return Qr(e,t,!0)}function Gd(e,t,i){return Ts(e,t,H(i,2),!0)}function Vd(e,t){var i=e==null?0:e.length;if(i){var a=Qr(e,t,!0)-1;if(Ct(e[a],t))return a}return-1}function Kd(e){return e&&e.length?Xa(e):[]}function Hd(e,t){return e&&e.length?Xa(e,H(t,2)):[]}function Jd(e){var t=e==null?0:e.length;return t?dt(e,1,t):[]}function qd(e,t,i){return e&&e.length?(t=i||t===n?1:ne(t),dt(e,0,t<0?0:t)):[]}function Yd(e,t,i){var a=e==null?0:e.length;return a?(t=i||t===n?1:ne(t),t=a-t,dt(e,t<0?0:t,a)):[]}function Zd(e,t){return e&&e.length?ei(e,H(t,3),!1,!0):[]}function Xd(e,t){return e&&e.length?ei(e,H(t,3)):[]}var Qd=ie(function(e){return qt(Be(e,1,Re,!0))}),e0=ie(function(e){var t=gt(e);return Re(t)&&(t=n),qt(Be(e,1,Re,!0),H(t,2))}),t0=ie(function(e){var t=gt(e);return t=typeof t=="function"?t:n,qt(Be(e,1,Re,!0),n,t)});function n0(e){return e&&e.length?qt(e):[]}function r0(e,t){return e&&e.length?qt(e,H(t,2)):[]}function i0(e,t){return t=typeof t=="function"?t:n,e&&e.length?qt(e,n,t):[]}function js(e){if(!(e&&e.length))return[];var t=0;return e=Gt(e,function(i){if(Re(i))return t=Ae(i.length,t),!0}),os(t,function(i){return ye(e,rs(i))})}function Fc(e,t){if(!(e&&e.length))return[];var i=js(e);return t==null?i:ye(i,function(a){return Qe(t,n,a)})}var s0=ie(function(e,t){return Re(e)?tr(e,t):[]}),o0=ie(function(e){return Es(Gt(e,Re))}),a0=ie(function(e){var t=gt(e);return Re(t)&&(t=n),Es(Gt(e,Re),H(t,2))}),c0=ie(function(e){var t=gt(e);return t=typeof t=="function"?t:n,Es(Gt(e,Re),n,t)}),f0=ie(js);function u0(e,t){return nc(e||[],t||[],er)}function l0(e,t){return nc(e||[],t||[],ir)}var h0=ie(function(e){var t=e.length,i=t>1?e[t-1]:n;return i=typeof i=="function"?(e.pop(),i):n,Fc(e,i)});function $c(e){var t=h(e);return t.__chain__=!0,t}function p0(e,t){return t(e),e}function fi(e,t){return t(e)}var d0=$t(function(e){var t=e.length,i=t?e[0]:0,a=this.__wrapped__,u=function(p){return ds(p,e)};return t>1||this.__actions__.length||!(a instanceof ae)||!Nt(i)?this.thru(u):(a=a.slice(i,+i+(t?1:0)),a.__actions__.push({func:fi,args:[u],thisArg:n}),new ht(a,this.__chain__).thru(function(p){return t&&!p.length&&p.push(n),p}))});function g0(){return $c(this)}function m0(){return new ht(this.value(),this.__chain__)}function _0(){this.__values__===n&&(this.__values__=Qc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function y0(){return this}function v0(e){for(var t,i=this;i instanceof Jr;){var a=Mc(i);a.__index__=0,a.__values__=n,t?u.__wrapped__=a:t=a;var u=a;i=i.__wrapped__}return u.__wrapped__=e,t}function x0(){var e=this.__wrapped__;if(e instanceof ae){var t=e;return this.__actions__.length&&(t=new ae(this)),t=t.reverse(),t.__actions__.push({func:fi,args:[Ws],thisArg:n}),new ht(t,this.__chain__)}return this.thru(Ws)}function b0(){return tc(this.__wrapped__,this.__actions__)}var C0=ti(function(e,t,i){pe.call(e,i)?++e[i]:Ut(e,i,1)});function S0(e,t,i){var a=te(e)?da:pp;return i&&We(e,t,i)&&(t=n),a(e,H(t,3))}function R0(e,t){var i=te(e)?Gt:Fa;return i(e,H(t,3))}var T0=hc(Dc),k0=hc(wc);function E0(e,t){return Be(ui(e,t),1)}function P0(e,t){return Be(ui(e,t),O)}function A0(e,t,i){return i=i===n?1:ne(i),Be(ui(e,t),i)}function Nc(e,t){var i=te(e)?ut:Jt;return i(e,H(t,3))}function zc(e,t){var i=te(e)?Jl:Ua;return i(e,H(t,3))}var I0=ti(function(e,t,i){pe.call(e,i)?e[i].push(t):Ut(e,i,[t])});function O0(e,t,i,a){e=Je(e)?e:wn(e),i=i&&!a?ne(i):0;var u=e.length;return i<0&&(i=Ae(u+i,0)),gi(e)?i<=u&&e.indexOf(t,i)>-1:!!u&&Cn(e,t,i)>-1}var M0=ie(function(e,t,i){var a=-1,u=typeof t=="function",p=Je(e)?k(e.length):[];return Jt(e,function(m){p[++a]=u?Qe(t,m,i):nr(m,t,i)}),p}),D0=ti(function(e,t,i){Ut(e,i,t)});function ui(e,t){var i=te(e)?ye:Ga;return i(e,H(t,3))}function w0(e,t,i,a){return e==null?[]:(te(t)||(t=t==null?[]:[t]),i=a?n:i,te(i)||(i=i==null?[]:[i]),Ja(e,t,i))}var L0=ti(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function B0(e,t,i){var a=te(e)?ts:ya,u=arguments.length<3;return a(e,H(t,4),i,u,Jt)}function U0(e,t,i){var a=te(e)?ql:ya,u=arguments.length<3;return a(e,H(t,4),i,u,Ua)}function F0(e,t){var i=te(e)?Gt:Fa;return i(e,pi(H(t,3)))}function $0(e){var t=te(e)?Da:Op;return t(e)}function N0(e,t,i){(i?We(e,t,i):t===n)?t=1:t=ne(t);var a=te(e)?cp:Mp;return a(e,t)}function z0(e){var t=te(e)?fp:wp;return t(e)}function W0(e){if(e==null)return 0;if(Je(e))return gi(e)?Rn(e):e.length;var t=Fe(e);return t==yt||t==vt?e.size:xs(e).length}function j0(e,t,i){var a=te(e)?ns:Lp;return i&&We(e,t,i)&&(t=n),a(e,H(t,3))}var G0=ie(function(e,t){if(e==null)return[];var i=t.length;return i>1&&We(e,t[0],t[1])?t=[]:i>2&&We(t[0],t[1],t[2])&&(t=[t[0]]),Ja(e,Be(t,1),[])}),li=Rh||function(){return Le.Date.now()};function V0(e,t){if(typeof t!="function")throw new lt(l);return e=ne(e),function(){if(--e<1)return t.apply(this,arguments)}}function Wc(e,t,i){return t=i?n:t,t=e&&t==null?e.length:t,Ft(e,at,n,n,n,n,t)}function jc(e,t){var i;if(typeof t!="function")throw new lt(l);return e=ne(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Gs=ie(function(e,t,i){var a=V;if(i.length){var u=Kt(i,Mn(Gs));a|=xe}return Ft(e,a,t,i,u)}),Gc=ie(function(e,t,i){var a=V|ke;if(i.length){var u=Kt(i,Mn(Gc));a|=xe}return Ft(t,a,e,i,u)});function Vc(e,t,i){t=i?n:t;var a=Ft(e,N,n,n,n,n,n,t);return a.placeholder=Vc.placeholder,a}function Kc(e,t,i){t=i?n:t;var a=Ft(e,ot,n,n,n,n,n,t);return a.placeholder=Kc.placeholder,a}function Hc(e,t,i){var a,u,p,m,_,C,A=0,I=!1,D=!1,U=!0;if(typeof e!="function")throw new lt(l);t=mt(t)||0,ve(i)&&(I=!!i.leading,D="maxWait"in i,p=D?Ae(mt(i.maxWait)||0,t):p,U="trailing"in i?!!i.trailing:U);function j(Te){var St=a,jt=u;return a=u=n,A=Te,m=e.apply(jt,St),m}function J(Te){return A=Te,_=ar(se,t),I?j(Te):m}function re(Te){var St=Te-C,jt=Te-A,pf=t-St;return D?Ue(pf,p-jt):pf}function q(Te){var St=Te-C,jt=Te-A;return C===n||St>=t||St<0||D&&jt>=p}function se(){var Te=li();if(q(Te))return ce(Te);_=ar(se,re(Te))}function ce(Te){return _=n,U&&a?j(Te):(a=u=n,m)}function rt(){_!==n&&rc(_),A=0,a=C=u=_=n}function je(){return _===n?m:ce(li())}function it(){var Te=li(),St=q(Te);if(a=arguments,u=this,C=Te,St){if(_===n)return J(C);if(D)return rc(_),_=ar(se,t),j(C)}return _===n&&(_=ar(se,t)),m}return it.cancel=rt,it.flush=je,it}var K0=ie(function(e,t){return Ba(e,1,t)}),H0=ie(function(e,t,i){return Ba(e,mt(t)||0,i)});function J0(e){return Ft(e,en)}function hi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new lt(l);var i=function(){var a=arguments,u=t?t.apply(this,a):a[0],p=i.cache;if(p.has(u))return p.get(u);var m=e.apply(this,a);return i.cache=p.set(u,m)||p,m};return i.cache=new(hi.Cache||Bt),i}hi.Cache=Bt;function pi(e){if(typeof e!="function")throw new lt(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function q0(e){return jc(2,e)}var Y0=Bp(function(e,t){t=t.length==1&&te(t[0])?ye(t[0],et(H())):ye(Be(t,1),et(H()));var i=t.length;return ie(function(a){for(var u=-1,p=Ue(a.length,i);++u<p;)a[u]=t[u].call(this,a[u]);return Qe(e,this,a)})}),Vs=ie(function(e,t){var i=Kt(t,Mn(Vs));return Ft(e,xe,n,t,i)}),Jc=ie(function(e,t){var i=Kt(t,Mn(Jc));return Ft(e,Ke,n,t,i)}),Z0=$t(function(e,t){return Ft(e,ct,n,n,n,t)});function X0(e,t){if(typeof e!="function")throw new lt(l);return t=t===n?t:ne(t),ie(e,t)}function Q0(e,t){if(typeof e!="function")throw new lt(l);return t=t==null?0:Ae(ne(t),0),ie(function(i){var a=i[t],u=Zt(i,0,t);return a&&Vt(u,a),Qe(e,this,u)})}function eg(e,t,i){var a=!0,u=!0;if(typeof e!="function")throw new lt(l);return ve(i)&&(a="leading"in i?!!i.leading:a,u="trailing"in i?!!i.trailing:u),Hc(e,t,{leading:a,maxWait:t,trailing:u})}function tg(e){return Wc(e,1)}function ng(e,t){return Vs(As(t),e)}function rg(){if(!arguments.length)return[];var e=arguments[0];return te(e)?e:[e]}function ig(e){return pt(e,B)}function sg(e,t){return t=typeof t=="function"?t:n,pt(e,B,t)}function og(e){return pt(e,S|B)}function ag(e,t){return t=typeof t=="function"?t:n,pt(e,S|B,t)}function cg(e,t){return t==null||La(e,t,Me(t))}function Ct(e,t){return e===t||e!==e&&t!==t}var fg=si(_s),ug=si(function(e,t){return e>=t}),ln=za(function(){return arguments}())?za:function(e){return be(e)&&pe.call(e,"callee")&&!Ea.call(e,"callee")},te=k.isArray,lg=ca?et(ca):vp;function Je(e){return e!=null&&di(e.length)&&!zt(e)}function Re(e){return be(e)&&Je(e)}function hg(e){return e===!0||e===!1||be(e)&&ze(e)==zn}var Xt=kh||no,pg=fa?et(fa):xp;function dg(e){return be(e)&&e.nodeType===1&&!cr(e)}function gg(e){if(e==null)return!0;if(Je(e)&&(te(e)||typeof e=="string"||typeof e.splice=="function"||Xt(e)||Dn(e)||ln(e)))return!e.length;var t=Fe(e);if(t==yt||t==vt)return!e.size;if(or(e))return!xs(e).length;for(var i in e)if(pe.call(e,i))return!1;return!0}function mg(e,t){return rr(e,t)}function _g(e,t,i){i=typeof i=="function"?i:n;var a=i?i(e,t):n;return a===n?rr(e,t,n,i):!!a}function Ks(e){if(!be(e))return!1;var t=ze(e);return t==kr||t==Nu||typeof e.message=="string"&&typeof e.name=="string"&&!cr(e)}function yg(e){return typeof e=="number"&&Aa(e)}function zt(e){if(!ve(e))return!1;var t=ze(e);return t==Er||t==Bo||t==$u||t==Wu}function qc(e){return typeof e=="number"&&e==ne(e)}function di(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=K}function ve(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function be(e){return e!=null&&typeof e=="object"}var Yc=ua?et(ua):Cp;function vg(e,t){return e===t||vs(e,t,Bs(t))}function xg(e,t,i){return i=typeof i=="function"?i:n,vs(e,t,Bs(t),i)}function bg(e){return Zc(e)&&e!=+e}function Cg(e){if(sd(e))throw new ee(f);return Wa(e)}function Sg(e){return e===null}function Rg(e){return e==null}function Zc(e){return typeof e=="number"||be(e)&&ze(e)==jn}function cr(e){if(!be(e)||ze(e)!=wt)return!1;var t=zr(e);if(t===null)return!0;var i=pe.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&Ur.call(i)==xh}var Hs=la?et(la):Sp;function Tg(e){return qc(e)&&e>=-K&&e<=K}var Xc=ha?et(ha):Rp;function gi(e){return typeof e=="string"||!te(e)&&be(e)&&ze(e)==Vn}function nt(e){return typeof e=="symbol"||be(e)&&ze(e)==Pr}var Dn=pa?et(pa):Tp;function kg(e){return e===n}function Eg(e){return be(e)&&Fe(e)==Kn}function Pg(e){return be(e)&&ze(e)==Gu}var Ag=si(bs),Ig=si(function(e,t){return e<=t});function Qc(e){if(!e)return[];if(Je(e))return gi(e)?xt(e):He(e);if(qn&&e[qn])return ch(e[qn]());var t=Fe(e),i=t==yt?cs:t==vt?wr:wn;return i(e)}function Wt(e){if(!e)return e===0?e:0;if(e=mt(e),e===O||e===-O){var t=e<0?-1:1;return t*X}return e===e?e:0}function ne(e){var t=Wt(e),i=t%1;return t===t?i?t-i:t:0}function ef(e){return e?an(ne(e),0,Y):0}function mt(e){if(typeof e=="number")return e;if(nt(e))return Q;if(ve(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ve(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=va(e);var i=ll.test(e);return i||pl.test(e)?Vl(e.slice(2),i?2:8):ul.test(e)?Q:+e}function tf(e){return Et(e,qe(e))}function Og(e){return e?an(ne(e),-K,K):e===0?e:0}function he(e){return e==null?"":tt(e)}var Mg=In(function(e,t){if(or(t)||Je(t)){Et(t,Me(t),e);return}for(var i in t)pe.call(t,i)&&er(e,i,t[i])}),nf=In(function(e,t){Et(t,qe(t),e)}),mi=In(function(e,t,i,a){Et(t,qe(t),e,a)}),Dg=In(function(e,t,i,a){Et(t,Me(t),e,a)}),wg=$t(ds);function Lg(e,t){var i=An(e);return t==null?i:wa(i,t)}var Bg=ie(function(e,t){e=de(e);var i=-1,a=t.length,u=a>2?t[2]:n;for(u&&We(t[0],t[1],u)&&(a=1);++i<a;)for(var p=t[i],m=qe(p),_=-1,C=m.length;++_<C;){var A=m[_],I=e[A];(I===n||Ct(I,kn[A])&&!pe.call(e,A))&&(e[A]=p[A])}return e}),Ug=ie(function(e){return e.push(n,vc),Qe(rf,n,e)});function Fg(e,t){return ga(e,H(t,3),kt)}function $g(e,t){return ga(e,H(t,3),ms)}function Ng(e,t){return e==null?e:gs(e,H(t,3),qe)}function zg(e,t){return e==null?e:$a(e,H(t,3),qe)}function Wg(e,t){return e&&kt(e,H(t,3))}function jg(e,t){return e&&ms(e,H(t,3))}function Gg(e){return e==null?[]:Zr(e,Me(e))}function Vg(e){return e==null?[]:Zr(e,qe(e))}function Js(e,t,i){var a=e==null?n:cn(e,t);return a===n?i:a}function Kg(e,t){return e!=null&&Cc(e,t,gp)}function qs(e,t){return e!=null&&Cc(e,t,mp)}var Hg=dc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Fr.call(t)),e[t]=i},Zs(Ye)),Jg=dc(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=Fr.call(t)),pe.call(e,t)?e[t].push(i):e[t]=[i]},H),qg=ie(nr);function Me(e){return Je(e)?Ma(e):xs(e)}function qe(e){return Je(e)?Ma(e,!0):kp(e)}function Yg(e,t){var i={};return t=H(t,3),kt(e,function(a,u,p){Ut(i,t(a,u,p),a)}),i}function Zg(e,t){var i={};return t=H(t,3),kt(e,function(a,u,p){Ut(i,u,t(a,u,p))}),i}var Xg=In(function(e,t,i){Xr(e,t,i)}),rf=In(function(e,t,i,a){Xr(e,t,i,a)}),Qg=$t(function(e,t){var i={};if(e==null)return i;var a=!1;t=ye(t,function(p){return p=Yt(p,e),a||(a=p.length>1),p}),Et(e,ws(e),i),a&&(i=pt(i,S|M|B,Hp));for(var u=t.length;u--;)ks(i,t[u]);return i});function em(e,t){return sf(e,pi(H(t)))}var tm=$t(function(e,t){return e==null?{}:Pp(e,t)});function sf(e,t){if(e==null)return{};var i=ye(ws(e),function(a){return[a]});return t=H(t),qa(e,i,function(a,u){return t(a,u[0])})}function nm(e,t,i){t=Yt(t,e);var a=-1,u=t.length;for(u||(u=1,e=n);++a<u;){var p=e==null?n:e[Pt(t[a])];p===n&&(a=u,p=i),e=zt(p)?p.call(e):p}return e}function rm(e,t,i){return e==null?e:ir(e,t,i)}function im(e,t,i,a){return a=typeof a=="function"?a:n,e==null?e:ir(e,t,i,a)}var of=_c(Me),af=_c(qe);function sm(e,t,i){var a=te(e),u=a||Xt(e)||Dn(e);if(t=H(t,4),i==null){var p=e&&e.constructor;u?i=a?new p:[]:ve(e)?i=zt(p)?An(zr(e)):{}:i={}}return(u?ut:kt)(e,function(m,_,C){return t(i,m,_,C)}),i}function om(e,t){return e==null?!0:ks(e,t)}function am(e,t,i){return e==null?e:ec(e,t,As(i))}function cm(e,t,i,a){return a=typeof a=="function"?a:n,e==null?e:ec(e,t,As(i),a)}function wn(e){return e==null?[]:as(e,Me(e))}function fm(e){return e==null?[]:as(e,qe(e))}function um(e,t,i){return i===n&&(i=t,t=n),i!==n&&(i=mt(i),i=i===i?i:0),t!==n&&(t=mt(t),t=t===t?t:0),an(mt(e),t,i)}function lm(e,t,i){return t=Wt(t),i===n?(i=t,t=0):i=Wt(i),e=mt(e),_p(e,t,i)}function hm(e,t,i){if(i&&typeof i!="boolean"&&We(e,t,i)&&(t=i=n),i===n&&(typeof t=="boolean"?(i=t,t=n):typeof e=="boolean"&&(i=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Wt(e),t===n?(t=e,e=0):t=Wt(t)),e>t){var a=e;e=t,t=a}if(i||e%1||t%1){var u=Ia();return Ue(e+u*(t-e+Gl("1e-"+((u+"").length-1))),t)}return Ss(e,t)}var pm=On(function(e,t,i){return t=t.toLowerCase(),e+(i?cf(t):t)});function cf(e){return Ys(he(e).toLowerCase())}function ff(e){return e=he(e),e&&e.replace(gl,rh).replace(wl,"")}function dm(e,t,i){e=he(e),t=tt(t);var a=e.length;i=i===n?a:an(ne(i),0,a);var u=i;return i-=t.length,i>=0&&e.slice(i,u)==t}function gm(e){return e=he(e),e&&qu.test(e)?e.replace($o,ih):e}function mm(e){return e=he(e),e&&tl.test(e)?e.replace(Vi,"\\$&"):e}var _m=On(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),ym=On(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),vm=lc("toLowerCase");function xm(e,t,i){e=he(e),t=ne(t);var a=t?Rn(e):0;if(!t||a>=t)return e;var u=(t-a)/2;return ii(Vr(u),i)+e+ii(Gr(u),i)}function bm(e,t,i){e=he(e),t=ne(t);var a=t?Rn(e):0;return t&&a<t?e+ii(t-a,i):e}function Cm(e,t,i){e=he(e),t=ne(t);var a=t?Rn(e):0;return t&&a<t?ii(t-a,i)+e:e}function Sm(e,t,i){return i||t==null?t=0:t&&(t=+t),Ih(he(e).replace(Ki,""),t||0)}function Rm(e,t,i){return(i?We(e,t,i):t===n)?t=1:t=ne(t),Rs(he(e),t)}function Tm(){var e=arguments,t=he(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var km=On(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function Em(e,t,i){return i&&typeof i!="number"&&We(e,t,i)&&(t=i=n),i=i===n?Y:i>>>0,i?(e=he(e),e&&(typeof t=="string"||t!=null&&!Hs(t))&&(t=tt(t),!t&&Sn(e))?Zt(xt(e),0,i):e.split(t,i)):[]}var Pm=On(function(e,t,i){return e+(i?" ":"")+Ys(t)});function Am(e,t,i){return e=he(e),i=i==null?0:an(ne(i),0,e.length),t=tt(t),e.slice(i,i+t.length)==t}function Im(e,t,i){var a=h.templateSettings;i&&We(e,t,i)&&(t=n),e=he(e),t=mi({},t,a,yc);var u=mi({},t.imports,a.imports,yc),p=Me(u),m=as(u,p),_,C,A=0,I=t.interpolate||Ar,D="__p += '",U=fs((t.escape||Ar).source+"|"+I.source+"|"+(I===No?fl:Ar).source+"|"+(t.evaluate||Ar).source+"|$","g"),j="//# sourceURL="+(pe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$l+"]")+`
`;e.replace(U,function(q,se,ce,rt,je,it){return ce||(ce=rt),D+=e.slice(A,it).replace(ml,sh),se&&(_=!0,D+=`' +
__e(`+se+`) +
'`),je&&(C=!0,D+=`';
`+je+`;
__p += '`),ce&&(D+=`' +
((__t = (`+ce+`)) == null ? '' : __t) +
'`),A=it+q.length,q}),D+=`';
`;var J=pe.call(t,"variable")&&t.variable;if(!J)D=`with (obj) {
`+D+`
}
`;else if(al.test(J))throw new ee(d);D=(C?D.replace(Vu,""):D).replace(Ku,"$1").replace(Hu,"$1;"),D="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+D+`return __p
}`;var re=lf(function(){return le(p,j+"return "+D).apply(n,m)});if(re.source=D,Ks(re))throw re;return re}function Om(e){return he(e).toLowerCase()}function Mm(e){return he(e).toUpperCase()}function Dm(e,t,i){if(e=he(e),e&&(i||t===n))return va(e);if(!e||!(t=tt(t)))return e;var a=xt(e),u=xt(t),p=xa(a,u),m=ba(a,u)+1;return Zt(a,p,m).join("")}function wm(e,t,i){if(e=he(e),e&&(i||t===n))return e.slice(0,Sa(e)+1);if(!e||!(t=tt(t)))return e;var a=xt(e),u=ba(a,xt(t))+1;return Zt(a,0,u).join("")}function Lm(e,t,i){if(e=he(e),e&&(i||t===n))return e.replace(Ki,"");if(!e||!(t=tt(t)))return e;var a=xt(e),u=xa(a,xt(t));return Zt(a,u).join("")}function Bm(e,t){var i=tn,a=Cr;if(ve(t)){var u="separator"in t?t.separator:u;i="length"in t?ne(t.length):i,a="omission"in t?tt(t.omission):a}e=he(e);var p=e.length;if(Sn(e)){var m=xt(e);p=m.length}if(i>=p)return e;var _=i-Rn(a);if(_<1)return a;var C=m?Zt(m,0,_).join(""):e.slice(0,_);if(u===n)return C+a;if(m&&(_+=C.length-_),Hs(u)){if(e.slice(_).search(u)){var A,I=C;for(u.global||(u=fs(u.source,he(zo.exec(u))+"g")),u.lastIndex=0;A=u.exec(I);)var D=A.index;C=C.slice(0,D===n?_:D)}}else if(e.indexOf(tt(u),_)!=_){var U=C.lastIndexOf(u);U>-1&&(C=C.slice(0,U))}return C+a}function Um(e){return e=he(e),e&&Ju.test(e)?e.replace(Fo,hh):e}var Fm=On(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),Ys=lc("toUpperCase");function uf(e,t,i){return e=he(e),t=i?n:t,t===n?ah(e)?gh(e):Xl(e):e.match(t)||[]}var lf=ie(function(e,t){try{return Qe(e,n,t)}catch(i){return Ks(i)?i:new ee(i)}}),$m=$t(function(e,t){return ut(t,function(i){i=Pt(i),Ut(e,i,Gs(e[i],e))}),e});function Nm(e){var t=e==null?0:e.length,i=H();return e=t?ye(e,function(a){if(typeof a[1]!="function")throw new lt(l);return[i(a[0]),a[1]]}):[],ie(function(a){for(var u=-1;++u<t;){var p=e[u];if(Qe(p[0],this,a))return Qe(p[1],this,a)}})}function zm(e){return hp(pt(e,S))}function Zs(e){return function(){return e}}function Wm(e,t){return e==null||e!==e?t:e}var jm=pc(),Gm=pc(!0);function Ye(e){return e}function Xs(e){return ja(typeof e=="function"?e:pt(e,S))}function Vm(e){return Va(pt(e,S))}function Km(e,t){return Ka(e,pt(t,S))}var Hm=ie(function(e,t){return function(i){return nr(i,e,t)}}),Jm=ie(function(e,t){return function(i){return nr(e,i,t)}});function Qs(e,t,i){var a=Me(t),u=Zr(t,a);i==null&&!(ve(t)&&(u.length||!a.length))&&(i=t,t=e,e=this,u=Zr(t,Me(t)));var p=!(ve(i)&&"chain"in i)||!!i.chain,m=zt(e);return ut(u,function(_){var C=t[_];e[_]=C,m&&(e.prototype[_]=function(){var A=this.__chain__;if(p||A){var I=e(this.__wrapped__),D=I.__actions__=He(this.__actions__);return D.push({func:C,args:arguments,thisArg:e}),I.__chain__=A,I}return C.apply(e,Vt([this.value()],arguments))})}),e}function qm(){return Le._===this&&(Le._=bh),this}function eo(){}function Ym(e){return e=ne(e),ie(function(t){return Ha(t,e)})}var Zm=Os(ye),Xm=Os(da),Qm=Os(ns);function hf(e){return Fs(e)?rs(Pt(e)):Ap(e)}function e_(e){return function(t){return e==null?n:cn(e,t)}}var t_=gc(),n_=gc(!0);function to(){return[]}function no(){return!1}function r_(){return{}}function i_(){return""}function s_(){return!0}function o_(e,t){if(e=ne(e),e<1||e>K)return[];var i=Y,a=Ue(e,Y);t=H(t),e-=Y;for(var u=os(a,t);++i<e;)t(i);return u}function a_(e){return te(e)?ye(e,Pt):nt(e)?[e]:He(Oc(he(e)))}function c_(e){var t=++vh;return he(e)+t}var f_=ri(function(e,t){return e+t},0),u_=Ms("ceil"),l_=ri(function(e,t){return e/t},1),h_=Ms("floor");function p_(e){return e&&e.length?Yr(e,Ye,_s):n}function d_(e,t){return e&&e.length?Yr(e,H(t,2),_s):n}function g_(e){return _a(e,Ye)}function m_(e,t){return _a(e,H(t,2))}function __(e){return e&&e.length?Yr(e,Ye,bs):n}function y_(e,t){return e&&e.length?Yr(e,H(t,2),bs):n}var v_=ri(function(e,t){return e*t},1),x_=Ms("round"),b_=ri(function(e,t){return e-t},0);function C_(e){return e&&e.length?ss(e,Ye):0}function S_(e,t){return e&&e.length?ss(e,H(t,2)):0}return h.after=V0,h.ary=Wc,h.assign=Mg,h.assignIn=nf,h.assignInWith=mi,h.assignWith=Dg,h.at=wg,h.before=jc,h.bind=Gs,h.bindAll=$m,h.bindKey=Gc,h.castArray=rg,h.chain=$c,h.chunk=hd,h.compact=pd,h.concat=dd,h.cond=Nm,h.conforms=zm,h.constant=Zs,h.countBy=C0,h.create=Lg,h.curry=Vc,h.curryRight=Kc,h.debounce=Hc,h.defaults=Bg,h.defaultsDeep=Ug,h.defer=K0,h.delay=H0,h.difference=gd,h.differenceBy=md,h.differenceWith=_d,h.drop=yd,h.dropRight=vd,h.dropRightWhile=xd,h.dropWhile=bd,h.fill=Cd,h.filter=R0,h.flatMap=E0,h.flatMapDeep=P0,h.flatMapDepth=A0,h.flatten=Lc,h.flattenDeep=Sd,h.flattenDepth=Rd,h.flip=J0,h.flow=jm,h.flowRight=Gm,h.fromPairs=Td,h.functions=Gg,h.functionsIn=Vg,h.groupBy=I0,h.initial=Ed,h.intersection=Pd,h.intersectionBy=Ad,h.intersectionWith=Id,h.invert=Hg,h.invertBy=Jg,h.invokeMap=M0,h.iteratee=Xs,h.keyBy=D0,h.keys=Me,h.keysIn=qe,h.map=ui,h.mapKeys=Yg,h.mapValues=Zg,h.matches=Vm,h.matchesProperty=Km,h.memoize=hi,h.merge=Xg,h.mergeWith=rf,h.method=Hm,h.methodOf=Jm,h.mixin=Qs,h.negate=pi,h.nthArg=Ym,h.omit=Qg,h.omitBy=em,h.once=q0,h.orderBy=w0,h.over=Zm,h.overArgs=Y0,h.overEvery=Xm,h.overSome=Qm,h.partial=Vs,h.partialRight=Jc,h.partition=L0,h.pick=tm,h.pickBy=sf,h.property=hf,h.propertyOf=e_,h.pull=wd,h.pullAll=Uc,h.pullAllBy=Ld,h.pullAllWith=Bd,h.pullAt=Ud,h.range=t_,h.rangeRight=n_,h.rearg=Z0,h.reject=F0,h.remove=Fd,h.rest=X0,h.reverse=Ws,h.sampleSize=N0,h.set=rm,h.setWith=im,h.shuffle=z0,h.slice=$d,h.sortBy=G0,h.sortedUniq=Kd,h.sortedUniqBy=Hd,h.split=Em,h.spread=Q0,h.tail=Jd,h.take=qd,h.takeRight=Yd,h.takeRightWhile=Zd,h.takeWhile=Xd,h.tap=p0,h.throttle=eg,h.thru=fi,h.toArray=Qc,h.toPairs=of,h.toPairsIn=af,h.toPath=a_,h.toPlainObject=tf,h.transform=sm,h.unary=tg,h.union=Qd,h.unionBy=e0,h.unionWith=t0,h.uniq=n0,h.uniqBy=r0,h.uniqWith=i0,h.unset=om,h.unzip=js,h.unzipWith=Fc,h.update=am,h.updateWith=cm,h.values=wn,h.valuesIn=fm,h.without=s0,h.words=uf,h.wrap=ng,h.xor=o0,h.xorBy=a0,h.xorWith=c0,h.zip=f0,h.zipObject=u0,h.zipObjectDeep=l0,h.zipWith=h0,h.entries=of,h.entriesIn=af,h.extend=nf,h.extendWith=mi,Qs(h,h),h.add=f_,h.attempt=lf,h.camelCase=pm,h.capitalize=cf,h.ceil=u_,h.clamp=um,h.clone=ig,h.cloneDeep=og,h.cloneDeepWith=ag,h.cloneWith=sg,h.conformsTo=cg,h.deburr=ff,h.defaultTo=Wm,h.divide=l_,h.endsWith=dm,h.eq=Ct,h.escape=gm,h.escapeRegExp=mm,h.every=S0,h.find=T0,h.findIndex=Dc,h.findKey=Fg,h.findLast=k0,h.findLastIndex=wc,h.findLastKey=$g,h.floor=h_,h.forEach=Nc,h.forEachRight=zc,h.forIn=Ng,h.forInRight=zg,h.forOwn=Wg,h.forOwnRight=jg,h.get=Js,h.gt=fg,h.gte=ug,h.has=Kg,h.hasIn=qs,h.head=Bc,h.identity=Ye,h.includes=O0,h.indexOf=kd,h.inRange=lm,h.invoke=qg,h.isArguments=ln,h.isArray=te,h.isArrayBuffer=lg,h.isArrayLike=Je,h.isArrayLikeObject=Re,h.isBoolean=hg,h.isBuffer=Xt,h.isDate=pg,h.isElement=dg,h.isEmpty=gg,h.isEqual=mg,h.isEqualWith=_g,h.isError=Ks,h.isFinite=yg,h.isFunction=zt,h.isInteger=qc,h.isLength=di,h.isMap=Yc,h.isMatch=vg,h.isMatchWith=xg,h.isNaN=bg,h.isNative=Cg,h.isNil=Rg,h.isNull=Sg,h.isNumber=Zc,h.isObject=ve,h.isObjectLike=be,h.isPlainObject=cr,h.isRegExp=Hs,h.isSafeInteger=Tg,h.isSet=Xc,h.isString=gi,h.isSymbol=nt,h.isTypedArray=Dn,h.isUndefined=kg,h.isWeakMap=Eg,h.isWeakSet=Pg,h.join=Od,h.kebabCase=_m,h.last=gt,h.lastIndexOf=Md,h.lowerCase=ym,h.lowerFirst=vm,h.lt=Ag,h.lte=Ig,h.max=p_,h.maxBy=d_,h.mean=g_,h.meanBy=m_,h.min=__,h.minBy=y_,h.stubArray=to,h.stubFalse=no,h.stubObject=r_,h.stubString=i_,h.stubTrue=s_,h.multiply=v_,h.nth=Dd,h.noConflict=qm,h.noop=eo,h.now=li,h.pad=xm,h.padEnd=bm,h.padStart=Cm,h.parseInt=Sm,h.random=hm,h.reduce=B0,h.reduceRight=U0,h.repeat=Rm,h.replace=Tm,h.result=nm,h.round=x_,h.runInContext=b,h.sample=$0,h.size=W0,h.snakeCase=km,h.some=j0,h.sortedIndex=Nd,h.sortedIndexBy=zd,h.sortedIndexOf=Wd,h.sortedLastIndex=jd,h.sortedLastIndexBy=Gd,h.sortedLastIndexOf=Vd,h.startCase=Pm,h.startsWith=Am,h.subtract=b_,h.sum=C_,h.sumBy=S_,h.template=Im,h.times=o_,h.toFinite=Wt,h.toInteger=ne,h.toLength=ef,h.toLower=Om,h.toNumber=mt,h.toSafeInteger=Og,h.toString=he,h.toUpper=Mm,h.trim=Dm,h.trimEnd=wm,h.trimStart=Lm,h.truncate=Bm,h.unescape=Um,h.uniqueId=c_,h.upperCase=Fm,h.upperFirst=Ys,h.each=Nc,h.eachRight=zc,h.first=Bc,Qs(h,function(){var e={};return kt(h,function(t,i){pe.call(h.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),h.VERSION=o,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){h[e].placeholder=h}),ut(["drop","take"],function(e,t){ae.prototype[e]=function(i){i=i===n?1:Ae(ne(i),0);var a=this.__filtered__&&!t?new ae(this):this.clone();return a.__filtered__?a.__takeCount__=Ue(i,a.__takeCount__):a.__views__.push({size:Ue(i,Y),type:e+(a.__dir__<0?"Right":"")}),a},ae.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),ut(["filter","map","takeWhile"],function(e,t){var i=t+1,a=i==F||i==L;ae.prototype[e]=function(u){var p=this.clone();return p.__iteratees__.push({iteratee:H(u,3),type:i}),p.__filtered__=p.__filtered__||a,p}}),ut(["head","last"],function(e,t){var i="take"+(t?"Right":"");ae.prototype[e]=function(){return this[i](1).value()[0]}}),ut(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");ae.prototype[e]=function(){return this.__filtered__?new ae(this):this[i](1)}}),ae.prototype.compact=function(){return this.filter(Ye)},ae.prototype.find=function(e){return this.filter(e).head()},ae.prototype.findLast=function(e){return this.reverse().find(e)},ae.prototype.invokeMap=ie(function(e,t){return typeof e=="function"?new ae(this):this.map(function(i){return nr(i,e,t)})}),ae.prototype.reject=function(e){return this.filter(pi(H(e)))},ae.prototype.slice=function(e,t){e=ne(e);var i=this;return i.__filtered__&&(e>0||t<0)?new ae(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==n&&(t=ne(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},ae.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ae.prototype.toArray=function(){return this.take(Y)},kt(ae.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),u=h[a?"take"+(t=="last"?"Right":""):t],p=a||/^find/.test(t);u&&(h.prototype[t]=function(){var m=this.__wrapped__,_=a?[1]:arguments,C=m instanceof ae,A=_[0],I=C||te(m),D=function(se){var ce=u.apply(h,Vt([se],_));return a&&U?ce[0]:ce};I&&i&&typeof A=="function"&&A.length!=1&&(C=I=!1);var U=this.__chain__,j=!!this.__actions__.length,J=p&&!U,re=C&&!j;if(!p&&I){m=re?m:new ae(this);var q=e.apply(m,_);return q.__actions__.push({func:fi,args:[D],thisArg:n}),new ht(q,U)}return J&&re?e.apply(this,_):(q=this.thru(D),J?a?q.value()[0]:q.value():q)})}),ut(["pop","push","shift","sort","splice","unshift"],function(e){var t=Lr[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);h.prototype[e]=function(){var u=arguments;if(a&&!this.__chain__){var p=this.value();return t.apply(te(p)?p:[],u)}return this[i](function(m){return t.apply(te(m)?m:[],u)})}}),kt(ae.prototype,function(e,t){var i=h[t];if(i){var a=i.name+"";pe.call(Pn,a)||(Pn[a]=[]),Pn[a].push({name:t,func:i})}}),Pn[ni(n,ke).name]=[{name:"wrapper",func:n}],ae.prototype.clone=Uh,ae.prototype.reverse=Fh,ae.prototype.value=$h,h.prototype.at=d0,h.prototype.chain=g0,h.prototype.commit=m0,h.prototype.next=_0,h.prototype.plant=v0,h.prototype.reverse=x0,h.prototype.toJSON=h.prototype.valueOf=h.prototype.value=b0,h.prototype.first=h.prototype.head,qn&&(h.prototype[qn]=y0),h},Tn=mh();nn?((nn.exports=Tn)._=Tn,Xi._=Tn):Le._=Tn}).call(ur)})(Pi,Pi.exports);var I_=Pi.exports;const Ln=wi(I_);var Eo={exports:{}};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var O_=function(r){var n=typeof r;if(n==="string"||r instanceof String){if(!r.trim())return!1}else if(n!=="number"&&!(r instanceof Number))return!1;return r-r+1>=0},M_=Object.prototype.toString,D_=function(r){if(r===void 0)return"undefined";if(r===null)return"null";var n=typeof r;if(n==="boolean")return"boolean";if(n==="string")return"string";if(n==="number")return"number";if(n==="symbol")return"symbol";if(n==="function")return F_(r)?"generatorfunction":"function";if(w_(r))return"array";if(z_(r))return"buffer";if(N_(r))return"arguments";if(B_(r))return"date";if(L_(r))return"error";if(U_(r))return"regexp";switch(zf(r)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if($_(r))return"generator";switch(n=M_.call(r),n){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")};function zf(s){return typeof s.constructor=="function"?s.constructor.name:null}function w_(s){return Array.isArray?Array.isArray(s):s instanceof Array}function L_(s){return s instanceof Error||typeof s.message=="string"&&s.constructor&&typeof s.constructor.stackTraceLimit=="number"}function B_(s){return s instanceof Date?!0:typeof s.toDateString=="function"&&typeof s.getDate=="function"&&typeof s.setDate=="function"}function U_(s){return s instanceof RegExp?!0:typeof s.flags=="string"&&typeof s.ignoreCase=="boolean"&&typeof s.multiline=="boolean"&&typeof s.global=="boolean"}function F_(s,r){return zf(s)==="GeneratorFunction"}function $_(s){return typeof s.throw=="function"&&typeof s.return=="function"&&typeof s.next=="function"}function N_(s){try{if(typeof s.length=="number"&&typeof s.callee=="function")return!0}catch(r){if(r.message.indexOf("callee")!==-1)return!0}return!1}function z_(s){return s.constructor&&typeof s.constructor.isBuffer=="function"?s.constructor.isBuffer(s):!1}var W_=function(s){var r="Uint32Array"in s,n=s.crypto||s.msCrypto,o=n&&typeof n.getRandomValues=="function",c=r&&o;if(!c)return Math.random;var f=new Uint32Array(1),l=Math.pow(2,32);function d(){return n.getRandomValues(f),f[0]/l}return d.cryptographic=!0,d}(typeof self<"u"?self:window);/*!
 * randomatic <https://github.com/jonschlinkert/randomatic>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var j_=O_,df=D_,Wf=W_;Eo.exports=G_;Eo.exports.isCrypto=!!Wf.cryptographic;var Ot={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",special:"~!@#$%^&()_+-={}[];',."};Ot.all=Ot.lower+Ot.upper+Ot.number+Ot.special;function G_(s,r,n){if(typeof s>"u")throw new Error("randomatic expects a string or number.");var o=!1;arguments.length===1&&(typeof s=="string"?r=s.length:j_(s)&&(n={},r=s,s="*")),df(r)==="object"&&r.hasOwnProperty("chars")&&(n=r,s=n.chars,r=s.length,o=!0);var c=n||{},f="",l="";if(s.indexOf("?")!==-1&&(f+=c.chars),s.indexOf("a")!==-1&&(f+=Ot.lower),s.indexOf("A")!==-1&&(f+=Ot.upper),s.indexOf("0")!==-1&&(f+=Ot.number),s.indexOf("!")!==-1&&(f+=Ot.special),s.indexOf("*")!==-1&&(f+=Ot.all),o&&(f+=s),c.exclude){var d=df(c.exclude)==="string"?c.exclude:c.exclude.join("");d=d.replace(new RegExp("[\\]]+","g"),""),f=f.replace(new RegExp("["+d+"]+","g"),""),c.exclude.indexOf("]")!==-1&&(f=f.replace(new RegExp("[\\]]+","g"),""))}for(;r--;)l+=f.charAt(parseInt(Wf()*f.length,10));return l}var V_=Eo.exports;const K_=wi(V_);class H_{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(r){this.flush(),this._parts.push(r)}append(r){this._pieces.push(r)}flush(){if(this._pieces.length>0){const r=new Uint8Array(this._pieces);this._parts.push(r),this._pieces=[]}}toArrayBuffer(){const r=[];for(const n of this._parts)r.push(n);return J_(r).buffer}}function J_(s){let r=0;for(const c of s)r+=c.byteLength;const n=new Uint8Array(r);let o=0;for(const c of s){const f=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n.set(f,o),o+=c.byteLength}return n}function jf(s){return new q_(s).unpack()}function Gf(s){const r=new Y_,n=r.pack(s);return n instanceof Promise?n.then(()=>r.getBuffer()):r.getBuffer()}class q_{constructor(r){this.index=0,this.dataBuffer=r,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const r=this.unpack_uint8();if(r<128)return r;if((r^224)<32)return(r^224)-32;let n;if((n=r^160)<=15)return this.unpack_raw(n);if((n=r^176)<=15)return this.unpack_string(n);if((n=r^144)<=15)return this.unpack_array(n);if((n=r^128)<=15)return this.unpack_map(n);switch(r){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const r=this.dataView[this.index]&255;return this.index++,r}unpack_uint16(){const r=this.read(2),n=(r[0]&255)*256+(r[1]&255);return this.index+=2,n}unpack_uint32(){const r=this.read(4),n=((r[0]*256+r[1])*256+r[2])*256+r[3];return this.index+=4,n}unpack_uint64(){const r=this.read(8),n=((((((r[0]*256+r[1])*256+r[2])*256+r[3])*256+r[4])*256+r[5])*256+r[6])*256+r[7];return this.index+=8,n}unpack_int8(){const r=this.unpack_uint8();return r<128?r:r-256}unpack_int16(){const r=this.unpack_uint16();return r<32768?r:r-65536}unpack_int32(){const r=this.unpack_uint32();return r<2**31?r:r-2**32}unpack_int64(){const r=this.unpack_uint64();return r<2**63?r:r-2**64}unpack_raw(r){if(this.length<this.index+r)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${r} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+r);return this.index+=r,n}unpack_string(r){const n=this.read(r);let o=0,c="",f,l;for(;o<r;)f=n[o],f<160?(l=f,o++):(f^192)<32?(l=(f&31)<<6|n[o+1]&63,o+=2):(f^224)<16?(l=(f&15)<<12|(n[o+1]&63)<<6|n[o+2]&63,o+=3):(l=(f&7)<<18|(n[o+1]&63)<<12|(n[o+2]&63)<<6|n[o+3]&63,o+=4),c+=String.fromCodePoint(l);return this.index+=r,c}unpack_array(r){const n=new Array(r);for(let o=0;o<r;o++)n[o]=this.unpack();return n}unpack_map(r){const n={};for(let o=0;o<r;o++){const c=this.unpack();n[c]=this.unpack()}return n}unpack_float(){const r=this.unpack_uint32(),n=r>>31,o=(r>>23&255)-127,c=r&8388607|8388608;return(n===0?1:-1)*c*2**(o-23)}unpack_double(){const r=this.unpack_uint32(),n=this.unpack_uint32(),o=r>>31,c=(r>>20&2047)-1023,l=(r&1048575|1048576)*2**(c-20)+n*2**(c-52);return(o===0?1:-1)*l}read(r){const n=this.index;if(n+r<=this.length)return this.dataView.subarray(n,n+r);throw new Error("BinaryPackFailure: read index out of range")}}class Y_{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(r){if(typeof r=="string")this.pack_string(r);else if(typeof r=="number")Math.floor(r)===r?this.pack_integer(r):this.pack_double(r);else if(typeof r=="boolean")r===!0?this._bufferBuilder.append(195):r===!1&&this._bufferBuilder.append(194);else if(r===void 0)this._bufferBuilder.append(192);else if(typeof r=="object")if(r===null)this._bufferBuilder.append(192);else{const n=r.constructor;if(r instanceof Array){const o=this.pack_array(r);if(o instanceof Promise)return o.then(()=>this._bufferBuilder.flush())}else if(r instanceof ArrayBuffer)this.pack_bin(new Uint8Array(r));else if("BYTES_PER_ELEMENT"in r){const o=r;this.pack_bin(new Uint8Array(o.buffer,o.byteOffset,o.byteLength))}else if(r instanceof Date)this.pack_string(r.toString());else{if(r instanceof Blob)return r.arrayBuffer().then(o=>{this.pack_bin(new Uint8Array(o)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const o=this.pack_object(r);if(o instanceof Promise)return o.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof r}" not yet supported`);this._bufferBuilder.flush()}pack_bin(r){const n=r.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_string(r){const n=this._textEncoder.encode(r),o=n.length;if(o<=15)this.pack_uint8(176+o);else if(o<=65535)this._bufferBuilder.append(216),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(o);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(r){const n=r.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const o=c=>{if(c<n){const f=this.pack(r[c]);return f instanceof Promise?f.then(()=>o(c+1)):o(c+1)}};return o(0)}pack_integer(r){if(r>=-32&&r<=127)this._bufferBuilder.append(r&255);else if(r>=0&&r<=255)this._bufferBuilder.append(204),this.pack_uint8(r);else if(r>=-128&&r<=127)this._bufferBuilder.append(208),this.pack_int8(r);else if(r>=0&&r<=65535)this._bufferBuilder.append(205),this.pack_uint16(r);else if(r>=-32768&&r<=32767)this._bufferBuilder.append(209),this.pack_int16(r);else if(r>=0&&r<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(r);else if(r>=-2147483648&&r<=2147483647)this._bufferBuilder.append(210),this.pack_int32(r);else if(r>=-9223372036854776e3&&r<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(r);else if(r>=0&&r<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(r);else throw new Error("Invalid integer")}pack_double(r){let n=0;r<0&&(n=1,r=-r);const o=Math.floor(Math.log(r)/Math.LN2),c=r/2**o-1,f=Math.floor(c*2**52),l=2**32,d=n<<31|o+1023<<20|f/l&1048575,g=f%l;this._bufferBuilder.append(203),this.pack_int32(d),this.pack_int32(g)}pack_object(r){const n=Object.keys(r),o=n.length;if(o<=15)this.pack_uint8(128+o);else if(o<=65535)this._bufferBuilder.append(222),this.pack_uint16(o);else if(o<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(o);else throw new Error("Invalid length");const c=f=>{if(f<n.length){const l=n[f];if(r.hasOwnProperty(l)){this.pack(l);const d=this.pack(r[l]);if(d instanceof Promise)return d.then(()=>c(f+1))}return c(f+1)}};return c(0)}pack_uint8(r){this._bufferBuilder.append(r)}pack_uint16(r){this._bufferBuilder.append(r>>8),this._bufferBuilder.append(r&255)}pack_uint32(r){const n=r&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(r){const n=r/4294967296,o=r%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}pack_int8(r){this._bufferBuilder.append(r&255)}pack_int16(r){this._bufferBuilder.append((r&65280)>>8),this._bufferBuilder.append(r&255)}pack_int32(r){this._bufferBuilder.append(r>>>24&255),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int64(r){const n=Math.floor(r/4294967296),o=r%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((o&4278190080)>>>24),this._bufferBuilder.append((o&16711680)>>>16),this._bufferBuilder.append((o&65280)>>>8),this._bufferBuilder.append(o&255)}constructor(){this._bufferBuilder=new H_,this._textEncoder=new TextEncoder}}let Vf=!0,Kf=!0;function vi(s,r,n){const o=s.match(r);return o&&o.length>=n&&parseInt(o[n],10)}function mn(s,r,n){if(!s.RTCPeerConnection)return;const o=s.RTCPeerConnection.prototype,c=o.addEventListener;o.addEventListener=function(l,d){if(l!==r)return c.apply(this,arguments);const g=x=>{const v=n(x);v&&(d.handleEvent?d.handleEvent(v):d(v))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(d,g),c.apply(this,[l,g])};const f=o.removeEventListener;o.removeEventListener=function(l,d){if(l!==r||!this._eventMap||!this._eventMap[r])return f.apply(this,arguments);if(!this._eventMap[r].has(d))return f.apply(this,arguments);const g=this._eventMap[r].get(d);return this._eventMap[r].delete(d),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,f.apply(this,[l,g])},Object.defineProperty(o,"on"+r,{get(){return this["_on"+r]},set(l){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),l&&this.addEventListener(r,this["_on"+r]=l)},enumerable:!0,configurable:!0})}function Z_(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(Vf=s,s?"adapter.js logging disabled":"adapter.js logging enabled")}function X_(s){return typeof s!="boolean"?new Error("Argument type: "+typeof s+". Please use a boolean."):(Kf=!s,"adapter.js deprecation warnings "+(s?"disabled":"enabled"))}function Hf(){if(typeof window=="object"){if(Vf)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Po(s,r){Kf&&console.warn(s+" is deprecated, please use "+r+" instead.")}function Q_(s){const r={browser:null,version:null};if(typeof s>"u"||!s.navigator||!s.navigator.userAgent)return r.browser="Not a browser.",r;const{navigator:n}=s;if(n.mozGetUserMedia)r.browser="firefox",r.version=vi(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||s.isSecureContext===!1&&s.webkitRTCPeerConnection)r.browser="chrome",r.version=vi(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=vi(n.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=s.RTCRtpTransceiver&&"currentDirection"in s.RTCRtpTransceiver.prototype;else return r.browser="Not a supported browser.",r;return r}function gf(s){return Object.prototype.toString.call(s)==="[object Object]"}function Jf(s){return gf(s)?Object.keys(s).reduce(function(r,n){const o=gf(s[n]),c=o?Jf(s[n]):s[n],f=o&&!Object.keys(c).length;return c===void 0||f?r:Object.assign(r,{[n]:c})},{}):s}function fo(s,r,n){!r||n.has(r.id)||(n.set(r.id,r),Object.keys(r).forEach(o=>{o.endsWith("Id")?fo(s,s.get(r[o]),n):o.endsWith("Ids")&&r[o].forEach(c=>{fo(s,s.get(c),n)})}))}function mf(s,r,n){const o=n?"outbound-rtp":"inbound-rtp",c=new Map;if(r===null)return c;const f=[];return s.forEach(l=>{l.type==="track"&&l.trackIdentifier===r.id&&f.push(l)}),f.forEach(l=>{s.forEach(d=>{d.type===o&&d.trackId===l.id&&fo(s,d,c)})}),c}const _f=Hf;function qf(s,r){const n=s&&s.navigator;if(!n.mediaDevices)return;const o=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const g={};return Object.keys(d).forEach(x=>{if(x==="require"||x==="advanced"||x==="mediaSource")return;const v=typeof d[x]=="object"?d[x]:{ideal:d[x]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const S=function(M,B){return M?M+B.charAt(0).toUpperCase()+B.slice(1):B==="deviceId"?"sourceId":B};if(v.ideal!==void 0){g.optional=g.optional||[];let M={};typeof v.ideal=="number"?(M[S("min",x)]=v.ideal,g.optional.push(M),M={},M[S("max",x)]=v.ideal,g.optional.push(M)):(M[S("",x)]=v.ideal,g.optional.push(M))}v.exact!==void 0&&typeof v.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[S("",x)]=v.exact):["min","max"].forEach(M=>{v[M]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[S(M,x)]=v[M])})}),d.advanced&&(g.optional=(g.optional||[]).concat(d.advanced)),g},c=function(d,g){if(r.version>=61)return g(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const x=function(v,S,M){S in v&&!(M in v)&&(v[M]=v[S],delete v[S])};d=JSON.parse(JSON.stringify(d)),x(d.audio,"autoGainControl","googAutoGainControl"),x(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=o(d.audio)}if(d&&typeof d.video=="object"){let x=d.video.facingMode;x=x&&(typeof x=="object"?x:{ideal:x});const v=r.version<66;if(x&&(x.exact==="user"||x.exact==="environment"||x.ideal==="user"||x.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete d.video.facingMode;let S;if(x.exact==="environment"||x.ideal==="environment"?S=["back","rear"]:(x.exact==="user"||x.ideal==="user")&&(S=["front"]),S)return n.mediaDevices.enumerateDevices().then(M=>{M=M.filter(G=>G.kind==="videoinput");let B=M.find(G=>S.some(Z=>G.label.toLowerCase().includes(Z)));return!B&&M.length&&S.includes("back")&&(B=M[M.length-1]),B&&(d.video.deviceId=x.exact?{exact:B.deviceId}:{ideal:B.deviceId}),d.video=o(d.video),_f("chrome: "+JSON.stringify(d)),g(d)})}d.video=o(d.video)}return _f("chrome: "+JSON.stringify(d)),g(d)},f=function(d){return r.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(d,g,x){c(d,v=>{n.webkitGetUserMedia(v,g,S=>{x&&x(f(S))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(g){return c(g,x=>d(x).then(v=>{if(x.audio&&!v.getAudioTracks().length||x.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(S=>{S.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(f(v))))}}}function ey(s,r){if(!(s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices)&&s.navigator.mediaDevices){if(typeof r!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}s.navigator.mediaDevices.getDisplayMedia=function(o){return r(o).then(c=>{const f=o.video&&o.video.width,l=o.video&&o.video.height,d=o.video&&o.video.frameRate;return o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c,maxFrameRate:d||3}},f&&(o.video.mandatory.maxWidth=f),l&&(o.video.mandatory.maxHeight=l),s.navigator.mediaDevices.getUserMedia(o)})}}}function Yf(s){s.MediaStream=s.MediaStream||s.webkitMediaStream}function Zf(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const r=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=o=>{o.stream.addEventListener("addtrack",c=>{let f;s.RTCPeerConnection.prototype.getReceivers?f=this.getReceivers().find(d=>d.track&&d.track.id===c.track.id):f={track:c.track};const l=new Event("track");l.track=c.track,l.receiver=f,l.transceiver={receiver:f},l.streams=[o.stream],this.dispatchEvent(l)}),o.stream.getTracks().forEach(c=>{let f;s.RTCPeerConnection.prototype.getReceivers?f=this.getReceivers().find(d=>d.track&&d.track.id===c.id):f={track:c};const l=new Event("track");l.track=c,l.receiver=f,l.transceiver={receiver:f},l.streams=[o.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}else mn(s,"track",r=>(r.transceiver||Object.defineProperty(r,"transceiver",{value:{receiver:r.receiver}}),r))}function Xf(s){if(typeof s=="object"&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){const r=function(c,f){return{track:f,get dtmf(){return this._dtmf===void 0&&(f.kind==="audio"?this._dtmf=c.createDTMFSender(f):this._dtmf=null),this._dtmf},_pc:c}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const c=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(d,g){let x=c.apply(this,arguments);return x||(x=r(this,d),this._senders.push(x)),x};const f=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(d){f.apply(this,arguments);const g=this._senders.indexOf(d);g!==-1&&this._senders.splice(g,1)}}const n=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(f){this._senders=this._senders||[],n.apply(this,[f]),f.getTracks().forEach(l=>{this._senders.push(r(this,l))})};const o=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(f){this._senders=this._senders||[],o.apply(this,[f]),f.getTracks().forEach(l=>{const d=this._senders.find(g=>g.track===l);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof s=="object"&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){const r=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){const o=r.apply(this,[]);return o.forEach(c=>c._pc=this),o},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Qf(s){if(!s.RTCPeerConnection)return;const r=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[o,c,f]=arguments;if(arguments.length>0&&typeof o=="function")return r.apply(this,arguments);if(r.length===0&&(arguments.length===0||typeof o!="function"))return r.apply(this,[]);const l=function(g){const x={};return g.result().forEach(S=>{const M={id:S.id,timestamp:S.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[S.type]||S.type};S.names().forEach(B=>{M[B]=S.stat(B)}),x[M.id]=M}),x},d=function(g){return new Map(Object.keys(g).map(x=>[x,g[x]]))};if(arguments.length>=2){const g=function(x){c(d(l(x)))};return r.apply(this,[g,o])}return new Promise((g,x)=>{r.apply(this,[function(v){g(d(l(v)))},x])}).then(c,f)}}function eu(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver))return;if(!("getStats"in s.RTCRtpSender.prototype)){const n=s.RTCPeerConnection.prototype.getSenders;n&&(s.RTCPeerConnection.prototype.getSenders=function(){const f=n.apply(this,[]);return f.forEach(l=>l._pc=this),f});const o=s.RTCPeerConnection.prototype.addTrack;o&&(s.RTCPeerConnection.prototype.addTrack=function(){const f=o.apply(this,arguments);return f._pc=this,f}),s.RTCRtpSender.prototype.getStats=function(){const f=this;return this._pc.getStats().then(l=>mf(l,f.track,!0))}}if(!("getStats"in s.RTCRtpReceiver.prototype)){const n=s.RTCPeerConnection.prototype.getReceivers;n&&(s.RTCPeerConnection.prototype.getReceivers=function(){const c=n.apply(this,[]);return c.forEach(f=>f._pc=this),c}),mn(s,"track",o=>(o.receiver._pc=o.srcElement,o)),s.RTCRtpReceiver.prototype.getStats=function(){const c=this;return this._pc.getStats().then(f=>mf(f,c.track,!1))}}if(!("getStats"in s.RTCRtpSender.prototype&&"getStats"in s.RTCRtpReceiver.prototype))return;const r=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){const o=arguments[0];let c,f,l;return this.getSenders().forEach(d=>{d.track===o&&(c?l=!0:c=d)}),this.getReceivers().forEach(d=>(d.track===o&&(f?l=!0:f=d),d.track===o)),l||c&&f?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):c?c.getStats():f?f.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}function tu(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const r=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(l,d){if(!d)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=r.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(g)===-1&&this._shimmedLocalStreams[d.id].push(g):this._shimmedLocalStreams[d.id]=[d,g],g};const n=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(x=>{if(this.getSenders().find(S=>S.track===x))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();n.apply(this,arguments);const g=this.getSenders().filter(x=>d.indexOf(x)===-1);this._shimmedLocalStreams[l.id]=[l].concat(g)};const o=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],o.apply(this,arguments)};const c=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const g=this._shimmedLocalStreams[d].indexOf(l);g!==-1&&this._shimmedLocalStreams[d].splice(g,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),c.apply(this,arguments)}}function nu(s,r){if(!s.RTCPeerConnection)return;if(s.RTCPeerConnection.prototype.addTrack&&r.version>=65)return tu(s);const n=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){const v=n.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(S=>this._reverseStreams[S.id])};const o=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(S=>{if(this.getSenders().find(B=>B.track===S))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const S=new s.MediaStream(v.getTracks());this._streams[v.id]=S,this._reverseStreams[S.id]=v,v=S}o.apply(this,[v])};const c=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},s.RTCPeerConnection.prototype.addTrack=function(v,S){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const M=[].slice.call(arguments,1);if(M.length!==1||!M[0].getTracks().find(Z=>Z===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Z=>Z.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const G=this._streams[S.id];if(G)G.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Z=new s.MediaStream([v]);this._streams[S.id]=Z,this._reverseStreams[Z.id]=S,this.addStream(Z)}return this.getSenders().find(Z=>Z.track===v)};function f(x,v){let S=v.sdp;return Object.keys(x._reverseStreams||[]).forEach(M=>{const B=x._reverseStreams[M],G=x._streams[B.id];S=S.replace(new RegExp(G.id,"g"),B.id)}),new RTCSessionDescription({type:v.type,sdp:S})}function l(x,v){let S=v.sdp;return Object.keys(x._reverseStreams||[]).forEach(M=>{const B=x._reverseStreams[M],G=x._streams[B.id];S=S.replace(new RegExp(B.id,"g"),G.id)}),new RTCSessionDescription({type:v.type,sdp:S})}["createOffer","createAnswer"].forEach(function(x){const v=s.RTCPeerConnection.prototype[x],S={[x](){const M=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[G=>{const Z=f(this,G);M[0].apply(null,[Z])},G=>{M[1]&&M[1].apply(null,G)},arguments[2]]):v.apply(this,arguments).then(G=>f(this,G))}};s.RTCPeerConnection.prototype[x]=S[x]});const d=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=l(this,arguments[0]),d.apply(this,arguments))};const g=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get(){const x=g.get.apply(this);return x.type===""?x:f(this,x)}}),s.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let M;Object.keys(this._streams).forEach(B=>{this._streams[B].getTracks().find(Z=>v.track===Z)&&(M=this._streams[B])}),M&&(M.getTracks().length===1?this.removeStream(this._reverseStreams[M.id]):M.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function uo(s,r){!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=s.webkitRTCPeerConnection),s.RTCPeerConnection&&r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const o=s.RTCPeerConnection.prototype[n],c={[n](){return arguments[0]=new(n==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};s.RTCPeerConnection.prototype[n]=c[n]})}function ru(s,r){mn(s,"negotiationneeded",n=>{const o=n.target;if(!((r.version<72||o.getConfiguration&&o.getConfiguration().sdpSemantics==="plan-b")&&o.signalingState!=="stable"))return n})}const yf=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:ru,shimAddTrackRemoveTrack:nu,shimAddTrackRemoveTrackWithNative:tu,shimGetDisplayMedia:ey,shimGetSendersWithDtmf:Xf,shimGetStats:Qf,shimGetUserMedia:qf,shimMediaStream:Yf,shimOnTrack:Zf,shimPeerConnection:uo,shimSenderReceiverGetStats:eu},Symbol.toStringTag,{value:"Module"}));function iu(s,r){const n=s&&s.navigator,o=s&&s.MediaStreamTrack;if(n.getUserMedia=function(c,f,l){Po("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(f,l)},!(r.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const c=function(l,d,g){d in l&&!(g in l)&&(l[g]=l[d],delete l[d])},f=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","mozAutoGainControl"),c(l.audio,"noiseSuppression","mozNoiseSuppression")),f(l)},o&&o.prototype.getSettings){const l=o.prototype.getSettings;o.prototype.getSettings=function(){const d=l.apply(this,arguments);return c(d,"mozAutoGainControl","autoGainControl"),c(d,"mozNoiseSuppression","noiseSuppression"),d}}if(o&&o.prototype.applyConstraints){const l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),c(d,"autoGainControl","mozAutoGainControl"),c(d,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[d])}}}}function ty(s,r){s.navigator.mediaDevices&&"getDisplayMedia"in s.navigator.mediaDevices||s.navigator.mediaDevices&&(s.navigator.mediaDevices.getDisplayMedia=function(o){if(!(o&&o.video)){const c=new DOMException("getDisplayMedia without video constraints is undefined");return c.name="NotFoundError",c.code=8,Promise.reject(c)}return o.video===!0?o.video={mediaSource:r}:o.video.mediaSource=r,s.navigator.mediaDevices.getUserMedia(o)})}function su(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function lo(s,r){if(typeof s!="object"||!(s.RTCPeerConnection||s.mozRTCPeerConnection))return;!s.RTCPeerConnection&&s.mozRTCPeerConnection&&(s.RTCPeerConnection=s.mozRTCPeerConnection),r.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(c){const f=s.RTCPeerConnection.prototype[c],l={[c](){return arguments[0]=new(c==="addIceCandidate"?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),f.apply(this,arguments)}};s.RTCPeerConnection.prototype[c]=l[c]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){const[f,l,d]=arguments;return o.apply(this,[f||null]).then(g=>{if(r.version<53&&!l)try{g.forEach(x=>{x.type=n[x.type]||x.type})}catch(x){if(x.name!=="TypeError")throw x;g.forEach((v,S)=>{g.set(S,Object.assign({},v,{type:n[v.type]||v.type}))})}return g}).then(l,d)}}function ou(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpSender.prototype)return;const r=s.RTCPeerConnection.prototype.getSenders;r&&(s.RTCPeerConnection.prototype.getSenders=function(){const c=r.apply(this,[]);return c.forEach(f=>f._pc=this),c});const n=s.RTCPeerConnection.prototype.addTrack;n&&(s.RTCPeerConnection.prototype.addTrack=function(){const c=n.apply(this,arguments);return c._pc=this,c}),s.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function au(s){if(!(typeof s=="object"&&s.RTCPeerConnection&&s.RTCRtpSender)||s.RTCRtpSender&&"getStats"in s.RTCRtpReceiver.prototype)return;const r=s.RTCPeerConnection.prototype.getReceivers;r&&(s.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(c=>c._pc=this),o}),mn(s,"track",n=>(n.receiver._pc=n.srcElement,n)),s.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function cu(s){!s.RTCPeerConnection||"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(n){Po("removeStream","removeTrack"),this.getSenders().forEach(o=>{o.track&&n.getTracks().includes(o.track)&&this.removeTrack(o)})})}function fu(s){s.DataChannel&&!s.RTCDataChannel&&(s.RTCDataChannel=s.DataChannel)}function uu(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const r=s.RTCPeerConnection.prototype.addTransceiver;r&&(s.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let o=arguments[1]&&arguments[1].sendEncodings;o===void 0&&(o=[]),o=[...o];const c=o.length>0;c&&o.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const f=r.apply(this,arguments);if(c){const{sender:l}=f,d=l.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=o,l.sendEncodings=o,this.setParametersPromises.push(l.setParameters(d).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return f})}function lu(s){if(!(typeof s=="object"&&s.RTCRtpSender))return;const r=s.RTCRtpSender.prototype.getParameters;r&&(s.RTCRtpSender.prototype.getParameters=function(){const o=r.apply(this,arguments);return"encodings"in o||(o.encodings=[].concat(this.sendEncodings||[{}])),o})}function hu(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const r=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}function pu(s){if(!(typeof s=="object"&&s.RTCPeerConnection))return;const r=s.RTCPeerConnection.prototype.createAnswer;s.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>r.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):r.apply(this,arguments)}}const vf=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:uu,shimCreateAnswer:pu,shimCreateOffer:hu,shimGetDisplayMedia:ty,shimGetParameters:lu,shimGetUserMedia:iu,shimOnTrack:su,shimPeerConnection:lo,shimRTCDataChannel:fu,shimReceiverGetStats:au,shimRemoveStream:cu,shimSenderGetStats:ou},Symbol.toStringTag,{value:"Module"}));function du(s){if(!(typeof s!="object"||!s.RTCPeerConnection)){if("getLocalStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in s.RTCPeerConnection.prototype)){const r=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(c=>r.call(this,c,o)),o.getVideoTracks().forEach(c=>r.call(this,c,o))},s.RTCPeerConnection.prototype.addTrack=function(o,...c){return c&&c.forEach(f=>{this._localStreams?this._localStreams.includes(f)||this._localStreams.push(f):this._localStreams=[f]}),r.apply(this,arguments)}}"removeStream"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const o=this._localStreams.indexOf(n);if(o===-1)return;this._localStreams.splice(o,1);const c=n.getTracks();this.getSenders().forEach(f=>{c.includes(f.track)&&this.removeTrack(f)})})}}function gu(s){if(!(typeof s!="object"||!s.RTCPeerConnection)&&("getRemoteStreams"in s.RTCPeerConnection.prototype||(s.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in s.RTCPeerConnection.prototype))){Object.defineProperty(s.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=o=>{o.streams.forEach(c=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(c))return;this._remoteStreams.push(c);const f=new Event("addstream");f.stream=c,this.dispatchEvent(f)})})}});const r=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){const o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(f=>{if(o._remoteStreams||(o._remoteStreams=[]),o._remoteStreams.indexOf(f)>=0)return;o._remoteStreams.push(f);const l=new Event("addstream");l.stream=f,o.dispatchEvent(l)})}),r.apply(o,arguments)}}}function mu(s){if(typeof s!="object"||!s.RTCPeerConnection)return;const r=s.RTCPeerConnection.prototype,n=r.createOffer,o=r.createAnswer,c=r.setLocalDescription,f=r.setRemoteDescription,l=r.addIceCandidate;r.createOffer=function(x,v){const S=arguments.length>=2?arguments[2]:arguments[0],M=n.apply(this,[S]);return v?(M.then(x,v),Promise.resolve()):M},r.createAnswer=function(x,v){const S=arguments.length>=2?arguments[2]:arguments[0],M=o.apply(this,[S]);return v?(M.then(x,v),Promise.resolve()):M};let d=function(g,x,v){const S=c.apply(this,[g]);return v?(S.then(x,v),Promise.resolve()):S};r.setLocalDescription=d,d=function(g,x,v){const S=f.apply(this,[g]);return v?(S.then(x,v),Promise.resolve()):S},r.setRemoteDescription=d,d=function(g,x,v){const S=l.apply(this,[g]);return v?(S.then(x,v),Promise.resolve()):S},r.addIceCandidate=d}function _u(s){const r=s&&s.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){const n=r.mediaDevices,o=n.getUserMedia.bind(n);r.mediaDevices.getUserMedia=c=>o(yu(c))}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=(function(o,c,f){r.mediaDevices.getUserMedia(o).then(c,f)}).bind(r))}function yu(s){return s&&s.video!==void 0?Object.assign({},s,{video:Jf(s.video)}):s}function vu(s){if(!s.RTCPeerConnection)return;const r=s.RTCPeerConnection;s.RTCPeerConnection=function(o,c){if(o&&o.iceServers){const f=[];for(let l=0;l<o.iceServers.length;l++){let d=o.iceServers[l];d.urls===void 0&&d.url?(Po("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,f.push(d)):f.push(o.iceServers[l])}o.iceServers=f}return new r(o,c)},s.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get(){return r.generateCertificate}})}function xu(s){typeof s=="object"&&s.RTCTrackEvent&&"receiver"in s.RTCTrackEvent.prototype&&!("transceiver"in s.RTCTrackEvent.prototype)&&Object.defineProperty(s.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function bu(s){const r=s.RTCPeerConnection.prototype.createOffer;s.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);const c=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");o.offerToReceiveAudio===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):o.offerToReceiveAudio===!0&&!c&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);const f=this.getTransceivers().find(l=>l.receiver.track.kind==="video");o.offerToReceiveVideo===!1&&f?f.direction==="sendrecv"?f.setDirection?f.setDirection("sendonly"):f.direction="sendonly":f.direction==="recvonly"&&(f.setDirection?f.setDirection("inactive"):f.direction="inactive"):o.offerToReceiveVideo===!0&&!f&&this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function Cu(s){typeof s!="object"||s.AudioContext||(s.AudioContext=s.webkitAudioContext)}const xf=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Cu,shimCallbacksAPI:mu,shimConstraints:yu,shimCreateOfferLegacy:bu,shimGetUserMedia:_u,shimLocalStreamsAPI:du,shimRTCIceServerUrls:vu,shimRemoteStreamsAPI:gu,shimTrackEventTransceiver:xu},Symbol.toStringTag,{value:"Module"}));var Su={exports:{}};(function(s){const r={};r.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},r.localCName=r.generateIdentifier(),r.splitLines=function(n){return n.trim().split(`
`).map(o=>o.trim())},r.splitSections=function(n){return n.split(`
m=`).map((c,f)=>(f>0?"m="+c:c).trim()+`\r
`)},r.getDescription=function(n){const o=r.splitSections(n);return o&&o[0]},r.getMediaSections=function(n){const o=r.splitSections(n);return o.shift(),o},r.matchPrefix=function(n,o){return r.splitLines(n).filter(c=>c.indexOf(o)===0)},r.parseCandidate=function(n){let o;n.indexOf("a=candidate:")===0?o=n.substring(12).split(" "):o=n.substring(10).split(" ");const c={foundation:o[0],component:{1:"rtp",2:"rtcp"}[o[1]]||o[1],protocol:o[2].toLowerCase(),priority:parseInt(o[3],10),ip:o[4],address:o[4],port:parseInt(o[5],10),type:o[7]};for(let f=8;f<o.length;f+=2)switch(o[f]){case"raddr":c.relatedAddress=o[f+1];break;case"rport":c.relatedPort=parseInt(o[f+1],10);break;case"tcptype":c.tcpType=o[f+1];break;case"ufrag":c.ufrag=o[f+1],c.usernameFragment=o[f+1];break;default:c[o[f]]===void 0&&(c[o[f]]=o[f+1]);break}return c},r.writeCandidate=function(n){const o=[];o.push(n.foundation);const c=n.component;c==="rtp"?o.push(1):c==="rtcp"?o.push(2):o.push(c),o.push(n.protocol.toUpperCase()),o.push(n.priority),o.push(n.address||n.ip),o.push(n.port);const f=n.type;return o.push("typ"),o.push(f),f!=="host"&&n.relatedAddress&&n.relatedPort&&(o.push("raddr"),o.push(n.relatedAddress),o.push("rport"),o.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(o.push("tcptype"),o.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(o.push("ufrag"),o.push(n.usernameFragment||n.ufrag)),"candidate:"+o.join(" ")},r.parseIceOptions=function(n){return n.substring(14).split(" ")},r.parseRtpMap=function(n){let o=n.substring(9).split(" ");const c={payloadType:parseInt(o.shift(),10)};return o=o[0].split("/"),c.name=o[0],c.clockRate=parseInt(o[1],10),c.channels=o.length===3?parseInt(o[2],10):1,c.numChannels=c.channels,c},r.writeRtpMap=function(n){let o=n.payloadType;n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType);const c=n.channels||n.numChannels||1;return"a=rtpmap:"+o+" "+n.name+"/"+n.clockRate+(c!==1?"/"+c:"")+`\r
`},r.parseExtmap=function(n){const o=n.substring(9).split(" ");return{id:parseInt(o[0],10),direction:o[0].indexOf("/")>0?o[0].split("/")[1]:"sendrecv",uri:o[1],attributes:o.slice(2).join(" ")}},r.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},r.parseFmtp=function(n){const o={};let c;const f=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<f.length;l++)c=f[l].trim().split("="),o[c[0].trim()]=c[1];return o},r.writeFmtp=function(n){let o="",c=n.payloadType;if(n.preferredPayloadType!==void 0&&(c=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const f=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?f.push(l+"="+n.parameters[l]):f.push(l)}),o+="a=fmtp:"+c+" "+f.join(";")+`\r
`}return o},r.parseRtcpFb=function(n){const o=n.substring(n.indexOf(" ")+1).split(" ");return{type:o.shift(),parameter:o.join(" ")}},r.writeRtcpFb=function(n){let o="",c=n.payloadType;return n.preferredPayloadType!==void 0&&(c=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(f=>{o+="a=rtcp-fb:"+c+" "+f.type+(f.parameter&&f.parameter.length?" "+f.parameter:"")+`\r
`}),o},r.parseSsrcMedia=function(n){const o=n.indexOf(" "),c={ssrc:parseInt(n.substring(7,o),10)},f=n.indexOf(":",o);return f>-1?(c.attribute=n.substring(o+1,f),c.value=n.substring(f+1)):c.attribute=n.substring(o+1),c},r.parseSsrcGroup=function(n){const o=n.substring(13).split(" ");return{semantics:o.shift(),ssrcs:o.map(c=>parseInt(c,10))}},r.getMid=function(n){const o=r.matchPrefix(n,"a=mid:")[0];if(o)return o.substring(6)},r.parseFingerprint=function(n){const o=n.substring(14).split(" ");return{algorithm:o[0].toLowerCase(),value:o[1].toUpperCase()}},r.getDtlsParameters=function(n,o){return{role:"auto",fingerprints:r.matchPrefix(n+o,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(n,o){let c="a=setup:"+o+`\r
`;return n.fingerprints.forEach(f=>{c+="a=fingerprint:"+f.algorithm+" "+f.value+`\r
`}),c},r.parseCryptoLine=function(n){const o=n.substring(9).split(" ");return{tag:parseInt(o[0],10),cryptoSuite:o[1],keyParams:o[2],sessionParams:o.slice(3)}},r.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?r.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},r.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const o=n.substring(7).split("|");return{keyMethod:"inline",keySalt:o[0],lifeTime:o[1],mkiValue:o[2]?o[2].split(":")[0]:void 0,mkiLength:o[2]?o[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},r.getCryptoParameters=function(n,o){return r.matchPrefix(n+o,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(n,o){const c=r.matchPrefix(n+o,"a=ice-ufrag:")[0],f=r.matchPrefix(n+o,"a=ice-pwd:")[0];return c&&f?{usernameFragment:c.substring(12),password:f.substring(10)}:null},r.writeIceParameters=function(n){let o="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(o+=`a=ice-lite\r
`),o},r.parseRtpParameters=function(n){const o={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},f=r.splitLines(n)[0].split(" ");o.profile=f[2];for(let d=3;d<f.length;d++){const g=f[d],x=r.matchPrefix(n,"a=rtpmap:"+g+" ")[0];if(x){const v=r.parseRtpMap(x),S=r.matchPrefix(n,"a=fmtp:"+g+" ");switch(v.parameters=S.length?r.parseFmtp(S[0]):{},v.rtcpFeedback=r.matchPrefix(n,"a=rtcp-fb:"+g+" ").map(r.parseRtcpFb),o.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":o.fecMechanisms.push(v.name.toUpperCase());break}}}r.matchPrefix(n,"a=extmap:").forEach(d=>{o.headerExtensions.push(r.parseExtmap(d))});const l=r.matchPrefix(n,"a=rtcp-fb:* ").map(r.parseRtcpFb);return o.codecs.forEach(d=>{l.forEach(g=>{d.rtcpFeedback.find(v=>v.type===g.type&&v.parameter===g.parameter)||d.rtcpFeedback.push(g)})}),o},r.writeRtpDescription=function(n,o){let c="";c+="m="+n+" ",c+=o.codecs.length>0?"9":"0",c+=" "+(o.profile||"UDP/TLS/RTP/SAVPF")+" ",c+=o.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,c+=`c=IN IP4 0.0.0.0\r
`,c+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,o.codecs.forEach(l=>{c+=r.writeRtpMap(l),c+=r.writeFmtp(l),c+=r.writeRtcpFb(l)});let f=0;return o.codecs.forEach(l=>{l.maxptime>f&&(f=l.maxptime)}),f>0&&(c+="a=maxptime:"+f+`\r
`),o.headerExtensions&&o.headerExtensions.forEach(l=>{c+=r.writeExtmap(l)}),c},r.parseRtpEncodingParameters=function(n){const o=[],c=r.parseRtpParameters(n),f=c.fecMechanisms.indexOf("RED")!==-1,l=c.fecMechanisms.indexOf("ULPFEC")!==-1,d=r.matchPrefix(n,"a=ssrc:").map(M=>r.parseSsrcMedia(M)).filter(M=>M.attribute==="cname"),g=d.length>0&&d[0].ssrc;let x;const v=r.matchPrefix(n,"a=ssrc-group:FID").map(M=>M.substring(17).split(" ").map(G=>parseInt(G,10)));v.length>0&&v[0].length>1&&v[0][0]===g&&(x=v[0][1]),c.codecs.forEach(M=>{if(M.name.toUpperCase()==="RTX"&&M.parameters.apt){let B={ssrc:g,codecPayloadType:parseInt(M.parameters.apt,10)};g&&x&&(B.rtx={ssrc:x}),o.push(B),f&&(B=JSON.parse(JSON.stringify(B)),B.fec={ssrc:g,mechanism:l?"red+ulpfec":"red"},o.push(B))}}),o.length===0&&g&&o.push({ssrc:g});let S=r.matchPrefix(n,"b=");return S.length&&(S[0].indexOf("b=TIAS:")===0?S=parseInt(S[0].substring(7),10):S[0].indexOf("b=AS:")===0?S=parseInt(S[0].substring(5),10)*1e3*.95-50*40*8:S=void 0,o.forEach(M=>{M.maxBitrate=S})),o},r.parseRtcpParameters=function(n){const o={},c=r.matchPrefix(n,"a=ssrc:").map(d=>r.parseSsrcMedia(d)).filter(d=>d.attribute==="cname")[0];c&&(o.cname=c.value,o.ssrc=c.ssrc);const f=r.matchPrefix(n,"a=rtcp-rsize");o.reducedSize=f.length>0,o.compound=f.length===0;const l=r.matchPrefix(n,"a=rtcp-mux");return o.mux=l.length>0,o},r.writeRtcpParameters=function(n){let o="";return n.reducedSize&&(o+=`a=rtcp-rsize\r
`),n.mux&&(o+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(o+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),o},r.parseMsid=function(n){let o;const c=r.matchPrefix(n,"a=msid:");if(c.length===1)return o=c[0].substring(7).split(" "),{stream:o[0],track:o[1]};const f=r.matchPrefix(n,"a=ssrc:").map(l=>r.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(f.length>0)return o=f[0].value.split(" "),{stream:o[0],track:o[1]}},r.parseSctpDescription=function(n){const o=r.parseMLine(n),c=r.matchPrefix(n,"a=max-message-size:");let f;c.length>0&&(f=parseInt(c[0].substring(19),10)),isNaN(f)&&(f=65536);const l=r.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:o.fmt,maxMessageSize:f};const d=r.matchPrefix(n,"a=sctpmap:");if(d.length>0){const g=d[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:f}}},r.writeSctpDescription=function(n,o){let c=[];return n.protocol!=="DTLS/SCTP"?c=["m="+n.kind+" 9 "+n.protocol+" "+o.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+o.port+`\r
`]:c=["m="+n.kind+" 9 "+n.protocol+" "+o.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+o.port+" "+o.protocol+` 65535\r
`],o.maxMessageSize!==void 0&&c.push("a=max-message-size:"+o.maxMessageSize+`\r
`),c.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,22)},r.writeSessionBoilerplate=function(n,o,c){let f;const l=o!==void 0?o:2;return n?f=n:f=r.generateSessionId(),`v=0\r
o=`+(c||"thisisadapterortc")+" "+f+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},r.getDirection=function(n,o){const c=r.splitLines(n);for(let f=0;f<c.length;f++)switch(c[f]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return c[f].substring(2)}return o?r.getDirection(o):"sendrecv"},r.getKind=function(n){return r.splitLines(n)[0].split(" ")[0].substring(2)},r.isRejected=function(n){return n.split(" ",2)[1]==="0"},r.parseMLine=function(n){const c=r.splitLines(n)[0].substring(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},r.parseOLine=function(n){const c=r.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},r.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const o=r.splitLines(n);for(let c=0;c<o.length;c++)if(o[c].length<2||o[c].charAt(1)!=="=")return!1;return!0},s.exports=r})(Su);var Ru=Su.exports;const $n=wi(Ru),ny=P_({__proto__:null,default:$n},[Ru]);function xi(s){if(!s.RTCIceCandidate||s.RTCIceCandidate&&"foundation"in s.RTCIceCandidate.prototype)return;const r=s.RTCIceCandidate;s.RTCIceCandidate=function(o){if(typeof o=="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&(o=JSON.parse(JSON.stringify(o)),o.candidate=o.candidate.substring(2)),o.candidate&&o.candidate.length){const c=new r(o),f=$n.parseCandidate(o.candidate);for(const l in f)l in c||Object.defineProperty(c,l,{value:f[l]});return c.toJSON=function(){return{candidate:c.candidate,sdpMid:c.sdpMid,sdpMLineIndex:c.sdpMLineIndex,usernameFragment:c.usernameFragment}},c}return new r(o)},s.RTCIceCandidate.prototype=r.prototype,mn(s,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new s.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ho(s){!s.RTCIceCandidate||s.RTCIceCandidate&&"relayProtocol"in s.RTCIceCandidate.prototype||mn(s,"icecandidate",r=>{if(r.candidate){const n=$n.parseCandidate(r.candidate.candidate);n.type==="relay"&&(r.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return r})}function bi(s,r){if(!s.RTCPeerConnection)return;"sctp"in s.RTCPeerConnection.prototype||Object.defineProperty(s.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(d){if(!d||!d.sdp)return!1;const g=$n.splitSections(d.sdp);return g.shift(),g.some(x=>{const v=$n.parseMLine(x);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},o=function(d){const g=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const x=parseInt(g[1],10);return x!==x?-1:x},c=function(d){let g=65536;return r.browser==="firefox"&&(r.version<57?d===-1?g=16384:g=2147483637:r.version<60?g=r.version===57?65535:65536:g=2147483637),g},f=function(d,g){let x=65536;r.browser==="firefox"&&r.version===57&&(x=65535);const v=$n.matchPrefix(d.sdp,"a=max-message-size:");return v.length>0?x=parseInt(v[0].substring(19),10):r.browser==="firefox"&&g!==-1&&(x=2147483637),x},l=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r.browser==="chrome"&&r.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const g=o(arguments[0]),x=c(g),v=f(arguments[0],g);let S;x===0&&v===0?S=Number.POSITIVE_INFINITY:x===0||v===0?S=Math.max(x,v):S=Math.min(x,v);const M={};Object.defineProperty(M,"maxMessageSize",{get(){return S}}),this._sctp=M}return l.apply(this,arguments)}}function Ci(s){if(!(s.RTCPeerConnection&&"createDataChannel"in s.RTCPeerConnection.prototype))return;function r(o,c){const f=o.send;o.send=function(){const d=arguments[0],g=d.length||d.size||d.byteLength;if(o.readyState==="open"&&c.sctp&&g>c.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+c.sctp.maxMessageSize+" bytes)");return f.apply(o,arguments)}}const n=s.RTCPeerConnection.prototype.createDataChannel;s.RTCPeerConnection.prototype.createDataChannel=function(){const c=n.apply(this,arguments);return r(c,this),c},mn(s,"datachannel",o=>(r(o.channel,o.target),o))}function po(s){if(!s.RTCPeerConnection||"connectionState"in s.RTCPeerConnection.prototype)return;const r=s.RTCPeerConnection.prototype;Object.defineProperty(r,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const o=r[n];r[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=c=>{const f=c.target;if(f._lastConnectionState!==f.connectionState){f._lastConnectionState=f.connectionState;const l=new Event("connectionstatechange",c);f.dispatchEvent(l)}return c},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),o.apply(this,arguments)}})}function go(s,r){if(!s.RTCPeerConnection||r.browser==="chrome"&&r.version>=71||r.browser==="safari"&&r.version>=605)return;const n=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(c){if(c&&c.sdp&&c.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const f=c.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);s.RTCSessionDescription&&c instanceof s.RTCSessionDescription?arguments[0]=new s.RTCSessionDescription({type:c.type,sdp:f}):c.sdp=f}return n.apply(this,arguments)}}function Si(s,r){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const n=s.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(r.browser==="chrome"&&r.version<78||r.browser==="firefox"&&r.version<68||r.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ri(s,r){if(!(s.RTCPeerConnection&&s.RTCPeerConnection.prototype))return;const n=s.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(s.RTCPeerConnection.prototype.setLocalDescription=function(){let c=arguments[0]||{};if(typeof c!="object"||c.type&&c.sdp)return n.apply(this,arguments);if(c={type:c.type,sdp:c.sdp},!c.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":c.type="offer";break;default:c.type="answer";break}return c.sdp||c.type!=="offer"&&c.type!=="answer"?n.apply(this,[c]):(c.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const ry=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:go,shimAddIceCandidateNullOrEmpty:Si,shimConnectionState:po,shimMaxMessageSize:bi,shimParameterlessSetLocalDescription:Ri,shimRTCIceCandidate:xi,shimRTCIceCandidateRelayProtocol:ho,shimSendThrowTypeError:Ci},Symbol.toStringTag,{value:"Module"}));function iy({window:s}={},r={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Hf,o=Q_(s),c={browserDetails:o,commonShim:ry,extractVersion:vi,disableLog:Z_,disableWarnings:X_,sdp:ny};switch(o.browser){case"chrome":if(!yf||!uo||!r.shimChrome)return n("Chrome shim is not included in this adapter release."),c;if(o.version===null)return n("Chrome shim can not determine version, not shimming."),c;n("adapter.js shimming chrome."),c.browserShim=yf,Si(s,o),Ri(s),qf(s,o),Yf(s),uo(s,o),Zf(s),nu(s,o),Xf(s),Qf(s),eu(s),ru(s,o),xi(s),ho(s),po(s),bi(s,o),Ci(s),go(s,o);break;case"firefox":if(!vf||!lo||!r.shimFirefox)return n("Firefox shim is not included in this adapter release."),c;n("adapter.js shimming firefox."),c.browserShim=vf,Si(s,o),Ri(s),iu(s,o),lo(s,o),su(s),cu(s),ou(s),au(s),fu(s),uu(s),lu(s),hu(s),pu(s),xi(s),po(s),bi(s,o),Ci(s);break;case"safari":if(!xf||!r.shimSafari)return n("Safari shim is not included in this adapter release."),c;n("adapter.js shimming safari."),c.browserShim=xf,Si(s,o),Ri(s),vu(s),bu(s),mu(s),du(s),gu(s),xu(s),_u(s),Cu(s),xi(s),ho(s),bi(s,o),Ci(s),go(s,o);break;default:n("Unsupported browser!");break}return c}const bf=iy({window:typeof window>"u"?void 0:window});let mo;try{mo=new TextDecoder}catch{}let z,dn,P=0;const sy=105,oy=57342,ay=57343,Cf=57337,Sf=6,Bn={};let ue={},Se,Ai,Ii=0,gr=0,Oe,Tt,Ee=[],_o=[],Xe,Ge,hr,Rf={useRecords:!1,mapsAsObjects:!0},mr=!1,Tu=2;try{new Function("")}catch{Tu=1/0}class _r{constructor(r){if(r&&((r.keyMap||r._keyMap)&&!r.useRecords&&(r.useRecords=!1,r.mapsAsObjects=!0),r.useRecords===!1&&r.mapsAsObjects===void 0&&(r.mapsAsObjects=!0),r.getStructures&&(r.getShared=r.getStructures),r.getShared&&!r.structures&&((r.structures=[]).uninitialized=!0),r.keyMap)){this.mapKey=new Map;for(let[n,o]of Object.entries(r.keyMap))this.mapKey.set(o,n)}Object.assign(this,r)}decodeKey(r){return this.keyMap&&this.mapKey.get(r)||r}encodeKey(r){return this.keyMap&&this.keyMap.hasOwnProperty(r)?this.keyMap[r]:r}encodeKeys(r){if(!this._keyMap)return r;let n=new Map;for(let[o,c]of Object.entries(r))n.set(this._keyMap.hasOwnProperty(o)?this._keyMap[o]:o,c);return n}decodeKeys(r){if(!this._keyMap||r.constructor.name!="Map")return r;if(!this._mapKey){this._mapKey=new Map;for(let[o,c]of Object.entries(this._keyMap))this._mapKey.set(c,o)}let n={};return r.forEach((o,c)=>n[_t(this._mapKey.has(c)?this._mapKey.get(c):c)]=o),n}mapDecode(r,n){let o=this.decode(r);if(this._keyMap)switch(o.constructor.name){case"Array":return o.map(c=>this.decodeKeys(c))}return o}decode(r,n){if(z)return Au(()=>(bo(),this?this.decode(r,n):_r.prototype.decode.call(Rf,r,n)));dn=n>-1?n:r.length,P=0,gr=0,Ai=null,Oe=null,z=r;try{Ge=r.dataView||(r.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength))}catch(o){throw z=null,r instanceof Uint8Array?o:new Error("Source must be a Uint8Array or Buffer but was a "+(r&&typeof r=="object"?r.constructor.name:typeof r))}if(this instanceof _r){if(ue=this,Xe=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return Se=this.structures,_i();(!Se||Se.length>0)&&(Se=[])}else ue=Rf,(!Se||Se.length>0)&&(Se=[]),Xe=null;return _i()}decodeMultiple(r,n){let o,c=0;try{let f=r.length;mr=!0;let l=this?this.decode(r,f):Oo.decode(r,f);if(n){if(n(l)===!1)return;for(;P<f;)if(c=P,n(_i())===!1)return}else{for(o=[l];P<f;)c=P,o.push(_i());return o}}catch(f){throw f.lastPosition=c,f.values=o,f}finally{mr=!1,bo()}}}function _i(){try{let s=fe();if(Oe){if(P>=Oe.postBundlePosition){let r=new Error("Unexpected bundle position");throw r.incomplete=!0,r}P=Oe.postBundlePosition,Oe=null}if(P==dn)Se=null,z=null,Tt&&(Tt=null);else if(P>dn){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}else if(!mr)throw new Error("Data read, but end of buffer not reached");return s}catch(s){throw bo(),(s instanceof RangeError||s.message.startsWith("Unexpected end of buffer"))&&(s.incomplete=!0),s}}function fe(){let s=z[P++],r=s>>5;if(s=s&31,s>23)switch(s){case 24:s=z[P++];break;case 25:if(r==7)return ly();s=Ge.getUint16(P),P+=2;break;case 26:if(r==7){let n=Ge.getFloat32(P);if(ue.useFloat32>2){let o=Io[(z[P]&127)<<1|z[P+1]>>7];return P+=4,(o*n+(n>0?.5:-.5)>>0)/o}return P+=4,n}s=Ge.getUint32(P),P+=4;break;case 27:if(r==7){let n=Ge.getFloat64(P);return P+=8,n}if(r>1){if(Ge.getUint32(P)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");s=Ge.getUint32(P+4)}else ue.int64AsNumber?(s=Ge.getUint32(P)*4294967296,s+=Ge.getUint32(P+4)):s=Ge.getBigUint64(P);P+=8;break;case 31:switch(r){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],o,c=0;for(;(o=fe())!=Bn;)n[c++]=o;return r==4?n:r==3?n.join(""):Buffer.concat(n);case 5:let f;if(ue.mapsAsObjects){let l={};if(ue.keyMap)for(;(f=fe())!=Bn;)l[_t(ue.decodeKey(f))]=fe();else for(;(f=fe())!=Bn;)l[_t(f)]=fe();return l}else{hr&&(ue.mapsAsObjects=!0,hr=!1);let l=new Map;if(ue.keyMap)for(;(f=fe())!=Bn;)l.set(ue.decodeKey(f),fe());else for(;(f=fe())!=Bn;)l.set(f,fe());return l}case 7:return Bn;default:throw new Error("Invalid major type for indefinite length "+r)}default:throw new Error("Unknown token "+s)}switch(r){case 0:return s;case 1:return~s;case 2:return uy(s);case 3:if(gr>=P)return Ai.slice(P-Ii,(P+=s)-Ii);if(gr==0&&dn<140&&s<32){let c=s<16?ku(s):fy(s);if(c!=null)return c}return cy(s);case 4:let n=new Array(s);for(let c=0;c<s;c++)n[c]=fe();return n;case 5:if(ue.mapsAsObjects){let c={};if(ue.keyMap)for(let f=0;f<s;f++)c[_t(ue.decodeKey(fe()))]=fe();else for(let f=0;f<s;f++)c[_t(fe())]=fe();return c}else{hr&&(ue.mapsAsObjects=!0,hr=!1);let c=new Map;if(ue.keyMap)for(let f=0;f<s;f++)c.set(ue.decodeKey(fe()),fe());else for(let f=0;f<s;f++)c.set(fe(),fe());return c}case 6:if(s>=Cf){let c=Se[s&8191];if(c)return c.read||(c.read=yo(c)),c.read();if(s<65536){if(s==ay){let f=Fn(),l=fe(),d=fe();xo(l,d);let g={};if(ue.keyMap)for(let x=2;x<f;x++){let v=ue.decodeKey(d[x-2]);g[_t(v)]=fe()}else for(let x=2;x<f;x++){let v=d[x-2];g[_t(v)]=fe()}return g}else if(s==oy){let f=Fn(),l=fe();for(let d=2;d<f;d++)xo(l++,fe());return fe()}else if(s==Cf)return _y();if(ue.getShared&&(Ao(),c=Se[s&8191],c))return c.read||(c.read=yo(c)),c.read()}}let o=Ee[s];if(o)return o.handlesRead?o(fe):o(fe());{let c=fe();for(let f=0;f<_o.length;f++){let l=_o[f](s,c);if(l!==void 0)return l}return new gn(c,s)}case 7:switch(s){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let c=(Xe||hn())[s];if(c!==void 0)return c;throw new Error("Unknown token "+s)}default:if(isNaN(s)){let c=new Error("Unexpected end of CBOR data");throw c.incomplete=!0,c}throw new Error("Unknown CBOR token "+s)}}const Tf=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function yo(s){function r(){let n=z[P++];if(n=n&31,n>23)switch(n){case 24:n=z[P++];break;case 25:n=Ge.getUint16(P),P+=2;break;case 26:n=Ge.getUint32(P),P+=4;break;default:throw new Error("Expected array header, but got "+z[P-1])}let o=this.compiledReader;for(;o;){if(o.propertyCount===n)return o(fe);o=o.next}if(this.slowReads++>=Tu){let f=this.length==n?this:this.slice(0,n);return o=ue.keyMap?new Function("r","return {"+f.map(l=>ue.decodeKey(l)).map(l=>Tf.test(l)?_t(l)+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}"):new Function("r","return {"+f.map(l=>Tf.test(l)?_t(l)+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}"),this.compiledReader&&(o.next=this.compiledReader),o.propertyCount=n,this.compiledReader=o,o(fe)}let c={};if(ue.keyMap)for(let f=0;f<n;f++)c[_t(ue.decodeKey(this[f]))]=fe();else for(let f=0;f<n;f++)c[_t(this[f])]=fe();return c}return s.slowReads=0,r}function _t(s){return s==="__proto__"?"__proto_":s}let cy=vo;function vo(s){let r;if(s<16&&(r=ku(s)))return r;if(s>64&&mo)return mo.decode(z.subarray(P,P+=s));const n=P+s,o=[];for(r="";P<n;){const c=z[P++];if(!(c&128))o.push(c);else if((c&224)===192){const f=z[P++]&63;o.push((c&31)<<6|f)}else if((c&240)===224){const f=z[P++]&63,l=z[P++]&63;o.push((c&31)<<12|f<<6|l)}else if((c&248)===240){const f=z[P++]&63,l=z[P++]&63,d=z[P++]&63;let g=(c&7)<<18|f<<12|l<<6|d;g>65535&&(g-=65536,o.push(g>>>10&1023|55296),g=56320|g&1023),o.push(g)}else o.push(c);o.length>=4096&&(r+=De.apply(String,o),o.length=0)}return o.length>0&&(r+=De.apply(String,o)),r}let De=String.fromCharCode;function fy(s){let r=P,n=new Array(s);for(let o=0;o<s;o++){const c=z[P++];if((c&128)>0){P=r;return}n[o]=c}return De.apply(String,n)}function ku(s){if(s<4)if(s<2){if(s===0)return"";{let r=z[P++];if((r&128)>1){P-=1;return}return De(r)}}else{let r=z[P++],n=z[P++];if((r&128)>0||(n&128)>0){P-=2;return}if(s<3)return De(r,n);let o=z[P++];if((o&128)>0){P-=3;return}return De(r,n,o)}else{let r=z[P++],n=z[P++],o=z[P++],c=z[P++];if((r&128)>0||(n&128)>0||(o&128)>0||(c&128)>0){P-=4;return}if(s<6){if(s===4)return De(r,n,o,c);{let f=z[P++];if((f&128)>0){P-=5;return}return De(r,n,o,c,f)}}else if(s<8){let f=z[P++],l=z[P++];if((f&128)>0||(l&128)>0){P-=6;return}if(s<7)return De(r,n,o,c,f,l);let d=z[P++];if((d&128)>0){P-=7;return}return De(r,n,o,c,f,l,d)}else{let f=z[P++],l=z[P++],d=z[P++],g=z[P++];if((f&128)>0||(l&128)>0||(d&128)>0||(g&128)>0){P-=8;return}if(s<10){if(s===8)return De(r,n,o,c,f,l,d,g);{let x=z[P++];if((x&128)>0){P-=9;return}return De(r,n,o,c,f,l,d,g,x)}}else if(s<12){let x=z[P++],v=z[P++];if((x&128)>0||(v&128)>0){P-=10;return}if(s<11)return De(r,n,o,c,f,l,d,g,x,v);let S=z[P++];if((S&128)>0){P-=11;return}return De(r,n,o,c,f,l,d,g,x,v,S)}else{let x=z[P++],v=z[P++],S=z[P++],M=z[P++];if((x&128)>0||(v&128)>0||(S&128)>0||(M&128)>0){P-=12;return}if(s<14){if(s===12)return De(r,n,o,c,f,l,d,g,x,v,S,M);{let B=z[P++];if((B&128)>0){P-=13;return}return De(r,n,o,c,f,l,d,g,x,v,S,M,B)}}else{let B=z[P++],G=z[P++];if((B&128)>0||(G&128)>0){P-=14;return}if(s<15)return De(r,n,o,c,f,l,d,g,x,v,S,M,B,G);let Z=z[P++];if((Z&128)>0){P-=15;return}return De(r,n,o,c,f,l,d,g,x,v,S,M,B,G,Z)}}}}}function uy(s){return ue.copyBuffers?Uint8Array.prototype.slice.call(z,P,P+=s):z.subarray(P,P+=s)}let Eu=new Float32Array(1),yi=new Uint8Array(Eu.buffer,0,4);function ly(){let s=z[P++],r=z[P++],n=(s&127)>>2;if(n===31)return r||s&3?NaN:s&128?-1/0:1/0;if(n===0){let o=((s&3)<<8|r)/16777216;return s&128?-o:o}return yi[3]=s&128|(n>>1)+56,yi[2]=(s&7)<<5|r>>3,yi[1]=r<<5,yi[0]=0,Eu[0]}new Array(4096);class gn{constructor(r,n){this.value=r,this.tag=n}}Ee[0]=s=>new Date(s);Ee[1]=s=>new Date(Math.round(s*1e3));Ee[2]=s=>{let r=BigInt(0);for(let n=0,o=s.byteLength;n<o;n++)r=BigInt(s[n])+r<<BigInt(8);return r};Ee[3]=s=>BigInt(-1)-Ee[2](s);Ee[4]=s=>+(s[1]+"e"+s[0]);Ee[5]=s=>s[1]*Math.exp(s[0]*Math.log(2));const xo=(s,r)=>{s=s-57344;let n=Se[s];n&&n.isShared&&((Se.restoreStructures||(Se.restoreStructures=[]))[s]=n),Se[s]=r,r.read=yo(r)};Ee[sy]=s=>{let r=s.length,n=s[1];xo(s[0],n);let o={};for(let c=2;c<r;c++){let f=n[c-2];o[_t(f)]=s[c]}return o};Ee[14]=s=>Oe?Oe[0].slice(Oe.position0,Oe.position0+=s):new gn(s,14);Ee[15]=s=>Oe?Oe[1].slice(Oe.position1,Oe.position1+=s):new gn(s,15);let hy={Error,RegExp};Ee[27]=s=>(hy[s[0]]||Error)(s[1],s[2]);const Pu=s=>{if(z[P++]!=132)throw new Error("Packed values structure must be followed by a 4 element array");let r=s();return Xe=Xe?r.concat(Xe.slice(r.length)):r,Xe.prefixes=s(),Xe.suffixes=s(),s()};Pu.handlesRead=!0;Ee[51]=Pu;Ee[Sf]=s=>{if(!Xe)if(ue.getShared)Ao();else return new gn(s,Sf);if(typeof s=="number")return Xe[16+(s>=0?2*s:-2*s-1)];throw new Error("No support for non-integer packed references yet")};Ee[28]=s=>{Tt||(Tt=new Map,Tt.id=0);let r=Tt.id++,n=z[P],o;n>>5==4?o=[]:o={};let c={target:o};Tt.set(r,c);let f=s();return c.used?Object.assign(o,f):(c.target=f,f)};Ee[28].handlesRead=!0;Ee[29]=s=>{let r=Tt.get(s);return r.used=!0,r.target};Ee[258]=s=>new Set(s);(Ee[259]=s=>(ue.mapsAsObjects&&(ue.mapsAsObjects=!1,hr=!0),s())).handlesRead=!0;function Un(s,r){return typeof s=="string"?s+r:s instanceof Array?s.concat(r):Object.assign({},s,r)}function hn(){if(!Xe)if(ue.getShared)Ao();else throw new Error("No packed values available");return Xe}const py=1399353956;_o.push((s,r)=>{if(s>=225&&s<=255)return Un(hn().prefixes[s-224],r);if(s>=28704&&s<=32767)return Un(hn().prefixes[s-28672],r);if(s>=1879052288&&s<=2147483647)return Un(hn().prefixes[s-1879048192],r);if(s>=216&&s<=223)return Un(r,hn().suffixes[s-216]);if(s>=27647&&s<=28671)return Un(r,hn().suffixes[s-27639]);if(s>=1811940352&&s<=1879048191)return Un(r,hn().suffixes[s-1811939328]);if(s==py)return{packedValues:Xe,structures:Se.slice(0),version:r};if(s==55799)return r});const dy=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,kf=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],gy=[64,68,69,70,71,72,77,78,79,85,86];for(let s=0;s<kf.length;s++)my(kf[s],gy[s]);function my(s,r){let n="get"+s.name.slice(0,-5),o;typeof s=="function"?o=s.BYTES_PER_ELEMENT:s=null;for(let c=0;c<2;c++){if(!c&&o==1)continue;let f=o==2?1:o==4?2:3;Ee[c?r:r-4]=o==1||c==dy?l=>{if(!s)throw new Error("Could not find typed array for code "+r);return new s(Uint8Array.prototype.slice.call(l,0).buffer)}:l=>{if(!s)throw new Error("Could not find typed array for code "+r);let d=new DataView(l.buffer,l.byteOffset,l.byteLength),g=l.length>>f,x=new s(g),v=d[n];for(let S=0;S<g;S++)x[S]=v.call(d,S<<f,c);return x}}}function _y(){let s=Fn(),r=P+fe();for(let o=2;o<s;o++){let c=Fn();P+=c}let n=P;return P=r,Oe=[vo(Fn()),vo(Fn())],Oe.position0=0,Oe.position1=0,Oe.postBundlePosition=P,P=n,fe()}function Fn(){let s=z[P++]&31;if(s>23)switch(s){case 24:s=z[P++];break;case 25:s=Ge.getUint16(P),P+=2;break;case 26:s=Ge.getUint32(P),P+=4;break}return s}function Ao(){if(ue.getShared){let s=Au(()=>(z=null,ue.getShared()))||{},r=s.structures||[];ue.sharedVersion=s.version,Xe=ue.sharedValues=s.packedValues,Se===!0?ue.structures=Se=r:Se.splice.apply(Se,[0,r.length].concat(r))}}function Au(s){let r=dn,n=P,o=Ii,c=gr,f=Ai,l=Tt,d=Oe,g=new Uint8Array(z.slice(0,dn)),x=Se,v=ue,S=mr,M=s();return dn=r,P=n,Ii=o,gr=c,Ai=f,Tt=l,Oe=d,z=g,mr=S,Se=x,ue=v,Ge=new DataView(z.buffer,z.byteOffset,z.byteLength),M}function bo(){z=null,Tt=null,Se=null}const Io=new Array(147);for(let s=0;s<256;s++)Io[s]=+("1e"+Math.floor(45.15-s*.30103));let Oo=new _r({useRecords:!1});Oo.decode;Oo.decodeMultiple;let Ti;try{Ti=new TextEncoder}catch{}let Co,Iu;const Li=typeof globalThis=="object"&&globalThis.Buffer,br=typeof Li<"u",ro=br?Li.allocUnsafeSlow:Uint8Array,Ef=br?Li:Uint8Array,Pf=256,Af=br?4294967296:2144337920;let io,R,_e,y=0,Qt,Ie=null;const yy=61440,vy=/[\u0080-\uFFFF]/,st=Symbol("record-id");class xy extends _r{constructor(r){super(r),this.offset=0;let n,o,c,f,l;r=r||{};let d=Ef.prototype.utf8Write?function(T,F,w){return R.utf8Write(T,F,w)}:Ti&&Ti.encodeInto?function(T,F){return Ti.encodeInto(T,R.subarray(F)).written}:!1,g=this,x=r.structures||r.saveStructures,v=r.maxSharedStructures;if(v==null&&(v=x?128:0),v>8190)throw new Error("Maximum maxSharedStructure is 8190");let S=r.sequential;S&&(v=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let M,B,G=r.sharedValues,Z;if(G){Z=Object.create(null);for(let T=0,F=G.length;T<F;T++)Z[G[T]]=T}let V=[],ke=0,Ne=0;this.mapEncode=function(T,F){if(this._keyMap&&!this._mapped)switch(T.constructor.name){case"Array":T=T.map(w=>this.encodeKeys(w));break}return this.encode(T,F)},this.encode=function(T,F){if(R||(R=new ro(8192),_e=new DataView(R.buffer,0,8192),y=0),Qt=R.length-10,Qt-y<2048?(R=new ro(R.length),_e=new DataView(R.buffer,0,R.length),Qt=R.length-10,y=0):F===Df&&(y=y+7&2147483640),n=y,g.useSelfDescribedHeader&&(_e.setUint32(y,3654940416),y+=3),l=g.structuredClone?new Map:null,g.bundleStrings&&typeof T!="string"?(Ie=[],Ie.size=1/0):Ie=null,o=g.structures,o){if(o.uninitialized){let L=g.getShared()||{};g.structures=o=L.structures||[],g.sharedVersion=L.version;let O=g.sharedValues=L.packedValues;if(O){Z={};for(let K=0,X=O.length;K<X;K++)Z[O[K]]=K}}let w=o.length;if(w>v&&!S&&(w=v),!o.transitions){o.transitions=Object.create(null);for(let L=0;L<w;L++){let O=o[L];if(!O)continue;let K,X=o.transitions;for(let Q=0,Y=O.length;Q<Y;Q++){X[st]===void 0&&(X[st]=L);let oe=O[Q];K=X[oe],K||(K=X[oe]=Object.create(null)),X=K}X[st]=L|1048576}}S||(o.nextId=w)}if(c&&(c=!1),f=o||[],B=Z,r.pack){let w=new Map;if(w.values=[],w.encoder=g,w.maxValues=r.maxPrivatePackedValues||(Z?16:1/0),w.objectMap=Z||!1,w.samplingPackedValues=M,ki(T,w),w.values.length>0){R[y++]=216,R[y++]=51,It(4);let L=w.values;N(L),It(0),It(0),B=Object.create(Z||null);for(let O=0,K=L.length;O<K;O++)B[L[O]]=O}}io=F&oo;try{if(io)return;if(N(T),Ie&&Mf(n,N),g.offset=y,l&&l.idsToInsert){y+=l.idsToInsert.length*2,y>Qt&&xe(y),g.offset=y;let w=Sy(R.subarray(n,y),l.idsToInsert);return l=null,w}return F&Df?(R.start=n,R.end=y,R):R.subarray(n,y)}finally{if(o){if(Ne<10&&Ne++,o.length>v&&(o.length=v),ke>1e4)o.transitions=null,Ne=0,ke=0,V.length>0&&(V=[]);else if(V.length>0&&!S){for(let w=0,L=V.length;w<L;w++)V[w][st]=void 0;V=[]}}if(c&&g.saveShared){g.structures.length>v&&(g.structures=g.structures.slice(0,v));let w=R.subarray(n,y);return g.updateSharedData()===!1?g.encode(T):w}F&Ry&&(y=n)}},this.findCommonStringsToPack=()=>(M=new Map,Z||(Z=Object.create(null)),T=>{let F=T&&T.threshold||4,w=this.pack?T.maxPrivatePackedValues||16:0;G||(G=this.sharedValues=[]);for(let[L,O]of M)O.count>F&&(Z[L]=w++,G.push(L),c=!0);for(;this.saveShared&&this.updateSharedData()===!1;);M=null});const N=T=>{y>Qt&&(R=xe(y));var F=typeof T,w;if(F==="string"){if(B){let X=B[T];if(X>=0){X<16?R[y++]=X+224:(R[y++]=198,X&1?N(15-X>>1):N(X-16>>1));return}else if(M&&!r.pack){let Q=M.get(T);Q?Q.count++:M.set(T,{count:1})}}let L=T.length;if(Ie&&L>=4&&L<1024){if((Ie.size+=L)>yy){let Q,Y=(Ie[0]?Ie[0].length*3+Ie[1].length:0)+10;y+Y>Qt&&(R=xe(y+Y)),R[y++]=217,R[y++]=223,R[y++]=249,R[y++]=Ie.position?132:130,R[y++]=26,Q=y-n,y+=4,Ie.position&&Mf(n,N),Ie=["",""],Ie.size=0,Ie.position=Q}let X=vy.test(T);Ie[X?0:1]+=T,R[y++]=X?206:207,N(L);return}let O;L<32?O=1:L<256?O=2:L<65536?O=3:O=5;let K=L*3;if(y+K>Qt&&(R=xe(y+K)),L<64||!d){let X,Q,Y,oe=y+O;for(X=0;X<L;X++)Q=T.charCodeAt(X),Q<128?R[oe++]=Q:Q<2048?(R[oe++]=Q>>6|192,R[oe++]=Q&63|128):(Q&64512)===55296&&((Y=T.charCodeAt(X+1))&64512)===56320?(Q=65536+((Q&1023)<<10)+(Y&1023),X++,R[oe++]=Q>>18|240,R[oe++]=Q>>12&63|128,R[oe++]=Q>>6&63|128,R[oe++]=Q&63|128):(R[oe++]=Q>>12|224,R[oe++]=Q>>6&63|128,R[oe++]=Q&63|128);w=oe-y-O}else w=d(T,y+O,K);w<24?R[y++]=96|w:w<256?(O<2&&R.copyWithin(y+2,y+1,y+1+w),R[y++]=120,R[y++]=w):w<65536?(O<3&&R.copyWithin(y+3,y+2,y+2+w),R[y++]=121,R[y++]=w>>8,R[y++]=w&255):(O<5&&R.copyWithin(y+5,y+3,y+3+w),R[y++]=122,_e.setUint32(y,w),y+=4),y+=w}else if(F==="number")if(!this.alwaysUseFloat&&T>>>0===T)T<24?R[y++]=T:T<256?(R[y++]=24,R[y++]=T):T<65536?(R[y++]=25,R[y++]=T>>8,R[y++]=T&255):(R[y++]=26,_e.setUint32(y,T),y+=4);else if(!this.alwaysUseFloat&&T>>0===T)T>=-24?R[y++]=31-T:T>=-256?(R[y++]=56,R[y++]=~T):T>=-65536?(R[y++]=57,_e.setUint16(y,~T),y+=2):(R[y++]=58,_e.setUint32(y,~T),y+=4);else{let L;if((L=this.useFloat32)>0&&T<4294967296&&T>=-2147483648){R[y++]=250,_e.setFloat32(y,T);let O;if(L<4||(O=T*Io[(R[y]&127)<<1|R[y+1]>>7])>>0===O){y+=4;return}else y--}R[y++]=251,_e.setFloat64(y,T),y+=8}else if(F==="object")if(!T)R[y++]=246;else{if(l){let O=l.get(T);if(O){if(R[y++]=216,R[y++]=29,R[y++]=25,!O.references){let K=l.idsToInsert||(l.idsToInsert=[]);O.references=[],K.push(O)}O.references.push(y-n),y+=2;return}else l.set(T,{offset:y-n})}let L=T.constructor;if(L===Object)ot(T,!0);else if(L===Array){w=T.length,w<24?R[y++]=128|w:It(w);for(let O=0;O<w;O++)N(T[O])}else if(L===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(R[y++]=217,R[y++]=1,R[y++]=3),w=T.size,w<24?R[y++]=160|w:w<256?(R[y++]=184,R[y++]=w):w<65536?(R[y++]=185,R[y++]=w>>8,R[y++]=w&255):(R[y++]=186,_e.setUint32(y,w),y+=4),g.keyMap)for(let[O,K]of T)N(g.encodeKey(O)),N(K);else for(let[O,K]of T)N(O),N(K);else{for(let O=0,K=Co.length;O<K;O++){let X=Iu[O];if(T instanceof X){let Q=Co[O],Y=Q.tag;Y==null&&(Y=Q.getTag&&Q.getTag.call(this,T)),Y<24?R[y++]=192|Y:Y<256?(R[y++]=216,R[y++]=Y):Y<65536?(R[y++]=217,R[y++]=Y>>8,R[y++]=Y&255):Y>-1&&(R[y++]=218,_e.setUint32(y,Y),y+=4),Q.encode.call(this,T,N,xe);return}}if(T[Symbol.iterator]){if(io){let O=new Error("Iterable should be serialized as iterator");throw O.iteratorNotHandled=!0,O}R[y++]=159;for(let O of T)N(O);R[y++]=255;return}if(T[Symbol.asyncIterator]||so(T)){let O=new Error("Iterable/blob should be serialized as iterator");throw O.iteratorNotHandled=!0,O}if(this.useToJSON&&T.toJSON){const O=T.toJSON();if(O!==T)return N(O)}ot(T,!T.hasOwnProperty)}}else if(F==="boolean")R[y++]=T?245:244;else if(F==="bigint"){if(T<BigInt(1)<<BigInt(64)&&T>=0)R[y++]=27,_e.setBigUint64(y,T);else if(T>-(BigInt(1)<<BigInt(64))&&T<0)R[y++]=59,_e.setBigUint64(y,-T-BigInt(1));else if(this.largeBigIntToFloat)R[y++]=251,_e.setFloat64(y,Number(T));else throw new RangeError(T+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");y+=8}else if(F==="undefined")R[y++]=247;else throw new Error("Unknown type: "+F)},ot=this.useRecords===!1?this.variableMapSize?T=>{let F=Object.keys(T),w=Object.values(T),L=F.length;if(L<24?R[y++]=160|L:L<256?(R[y++]=184,R[y++]=L):L<65536?(R[y++]=185,R[y++]=L>>8,R[y++]=L&255):(R[y++]=186,_e.setUint32(y,L),y+=4),g.keyMap)for(let O=0;O<L;O++)N(g.encodeKey(F[O])),N(w[O]);else for(let O=0;O<L;O++)N(F[O]),N(w[O])}:(T,F)=>{R[y++]=185;let w=y-n;y+=2;let L=0;if(g.keyMap)for(let O in T)(F||T.hasOwnProperty(O))&&(N(g.encodeKey(O)),N(T[O]),L++);else for(let O in T)(F||T.hasOwnProperty(O))&&(N(O),N(T[O]),L++);R[w+++n]=L>>8,R[w+n]=L&255}:(T,F)=>{let w,L=f.transitions||(f.transitions=Object.create(null)),O=0,K=0,X,Q;if(this.keyMap){Q=Object.keys(T).map(oe=>this.encodeKey(oe)),K=Q.length;for(let oe=0;oe<K;oe++){let Rr=Q[oe];w=L[Rr],w||(w=L[Rr]=Object.create(null),O++),L=w}}else for(let oe in T)(F||T.hasOwnProperty(oe))&&(w=L[oe],w||(L[st]&1048576&&(X=L[st]&65535),w=L[oe]=Object.create(null),O++),L=w,K++);let Y=L[st];if(Y!==void 0)Y&=65535,R[y++]=217,R[y++]=Y>>8|224,R[y++]=Y&255;else if(Q||(Q=L.__keys__||(L.__keys__=Object.keys(T))),X===void 0?(Y=f.nextId++,Y||(Y=0,f.nextId=1),Y>=Pf&&(f.nextId=(Y=v)+1)):Y=X,f[Y]=Q,Y<v){R[y++]=217,R[y++]=Y>>8|224,R[y++]=Y&255,L=f.transitions;for(let oe=0;oe<K;oe++)(L[st]===void 0||L[st]&1048576)&&(L[st]=Y),L=L[Q[oe]];L[st]=Y|1048576,c=!0}else{if(L[st]=Y,_e.setUint32(y,3655335680),y+=3,O&&(ke+=Ne*O),V.length>=Pf-v&&(V.shift()[st]=void 0),V.push(L),It(K+2),N(57344+Y),N(Q),F===null)return;for(let oe in T)(F||T.hasOwnProperty(oe))&&N(T[oe]);return}if(K<24?R[y++]=128|K:It(K),F!==null)for(let oe in T)(F||T.hasOwnProperty(oe))&&N(T[oe])},xe=T=>{let F;if(T>16777216){if(T-n>Af)throw new Error("Encoded buffer would be larger than maximum buffer size");F=Math.min(Af,Math.round(Math.max((T-n)*(T>67108864?1.25:2),4194304)/4096)*4096)}else F=(Math.max(T-n<<2,R.length-1)>>12)+1<<12;let w=new ro(F);return _e=new DataView(w.buffer,0,F),R.copy?R.copy(w,0,n,T):w.set(R.slice(n,T)),y-=n,n=0,Qt=w.length-10,R=w};let Ke=100,at=1e3;this.encodeAsIterable=function(T,F){return Cr(T,F,ct)},this.encodeAsAsyncIterable=function(T,F){return Cr(T,F,Sr)};function*ct(T,F,w){let L=T.constructor;if(L===Object){let O=g.useRecords!==!1;O?ot(T,null):If(Object.keys(T).length,160);for(let K in T){let X=T[K];O||N(K),X&&typeof X=="object"?F[K]?yield*ct(X,F[K]):yield*en(X,F,K):N(X)}}else if(L===Array){let O=T.length;It(O);for(let K=0;K<O;K++){let X=T[K];X&&(typeof X=="object"||y-n>Ke)?F.element?yield*ct(X,F.element):yield*en(X,F,"element"):N(X)}}else if(T[Symbol.iterator]){R[y++]=159;for(let O of T)O&&(typeof O=="object"||y-n>Ke)?F.element?yield*ct(O,F.element):yield*en(O,F,"element"):N(O);R[y++]=255}else so(T)?(If(T.size,64),yield R.subarray(n,y),yield T,tn()):T[Symbol.asyncIterator]?(R[y++]=159,yield R.subarray(n,y),yield T,tn(),R[y++]=255):N(T);w&&y>n?yield R.subarray(n,y):y-n>Ke&&(yield R.subarray(n,y),tn())}function*en(T,F,w){let L=y-n;try{N(T),y-n>Ke&&(yield R.subarray(n,y),tn())}catch(O){if(O.iteratorNotHandled)F[w]={},y=n+L,yield*ct.call(this,T,F[w]);else throw O}}function tn(){Ke=at,g.encode(null,oo)}function Cr(T,F,w){return F&&F.chunkThreshold?Ke=at=F.chunkThreshold:Ke=100,T&&typeof T=="object"?(g.encode(null,oo),w(T,g.iterateProperties||(g.iterateProperties={}),!0)):[g.encode(T)]}async function*Sr(T,F){for(let w of ct(T,F,!0)){let L=w.constructor;if(L===Ef||L===Uint8Array)yield w;else if(so(w)){let O=w.stream().getReader(),K;for(;!(K=await O.read()).done;)yield K.value}else if(w[Symbol.asyncIterator])for await(let O of w)tn(),O?yield*Sr(O,F.async||(F.async={})):yield g.encode(O);else yield w}}}useBuffer(r){R=r,_e=new DataView(R.buffer,R.byteOffset,R.byteLength),y=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let r=this.sharedVersion||0;this.sharedVersion=r+1;let n=this.structures.slice(0),o=new Ou(n,this.sharedValues,this.sharedVersion),c=this.saveShared(o,f=>(f&&f.version||0)==r);return c===!1?(o=this.getShared()||{},this.structures=o.structures||[],this.sharedValues=o.packedValues,this.sharedVersion=o.version,this.structures.nextId=this.structures.length):n.forEach((f,l)=>this.structures[l]=f),c}}function If(s,r){s<24?R[y++]=r|s:s<256?(R[y++]=r|24,R[y++]=s):s<65536?(R[y++]=r|25,R[y++]=s>>8,R[y++]=s&255):(R[y++]=r|26,_e.setUint32(y,s),y+=4)}class Ou{constructor(r,n,o){this.structures=r,this.packedValues=n,this.version=o}}function It(s){s<24?R[y++]=128|s:s<256?(R[y++]=152,R[y++]=s):s<65536?(R[y++]=153,R[y++]=s>>8,R[y++]=s&255):(R[y++]=154,_e.setUint32(y,s),y+=4)}const by=typeof Blob>"u"?function(){}:Blob;function so(s){if(s instanceof by)return!0;let r=s[Symbol.toStringTag];return r==="Blob"||r==="File"}function ki(s,r){switch(typeof s){case"string":if(s.length>3){if(r.objectMap[s]>-1||r.values.length>=r.maxValues)return;let o=r.get(s);if(o)++o.count==2&&r.values.push(s);else if(r.set(s,{count:1}),r.samplingPackedValues){let c=r.samplingPackedValues.get(s);c?c.count++:r.samplingPackedValues.set(s,{count:1})}}break;case"object":if(s)if(s instanceof Array)for(let o=0,c=s.length;o<c;o++)ki(s[o],r);else{let o=!r.encoder.useRecords;for(var n in s)s.hasOwnProperty(n)&&(o&&ki(n,r),ki(s[n],r))}break;case"function":console.log(s)}}const Cy=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;Iu=[Date,Set,Error,RegExp,gn,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,Ou];Co=[{tag:1,encode(s,r){let n=s.getTime()/1e3;(this.useTimestamp32||s.getMilliseconds()===0)&&n>=0&&n<4294967296?(R[y++]=26,_e.setUint32(y,n),y+=4):(R[y++]=251,_e.setFloat64(y,n),y+=8)}},{tag:258,encode(s,r){let n=Array.from(s);r(n)}},{tag:27,encode(s,r){r([s.name,s.message])}},{tag:27,encode(s,r){r(["RegExp",s.source,s.flags])}},{getTag(s){return s.tag},encode(s,r){r(s.value)}},{encode(s,r,n){Of(s,n)}},{getTag(s){if(s.constructor===Uint8Array&&(this.tagUint8Array||br&&this.tagUint8Array!==!1))return 64},encode(s,r,n){Of(s,n)}},At(68,1),At(69,2),At(70,4),At(71,8),At(72,1),At(77,2),At(78,4),At(79,8),At(85,4),At(86,8),{encode(s,r){let n=s.packedValues||[],o=s.structures||[];if(n.values.length>0){R[y++]=216,R[y++]=51,It(4);let c=n.values;r(c),It(0),It(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let f=0,l=c.length;f<l;f++)packedObjectMap[c[f]]=f}if(o){_e.setUint32(y,3655335424),y+=3;let c=o.slice(0);c.unshift(57344),c.push(new gn(s.version,1399353956)),r(c)}else r(new gn(s.version,1399353956))}}];function At(s,r){return!Cy&&r>1&&(s-=4),{tag:s,encode:function(o,c){let f=o.byteLength,l=o.byteOffset||0,d=o.buffer||o;c(br?Li.from(d,l,f):new Uint8Array(d,l,f))}}}function Of(s,r){let n=s.byteLength;n<24?R[y++]=64+n:n<256?(R[y++]=88,R[y++]=n):n<65536?(R[y++]=89,R[y++]=n>>8,R[y++]=n&255):(R[y++]=90,_e.setUint32(y,n),y+=4),y+n>=R.length&&r(y+n),R.set(s.buffer?s:new Uint8Array(s),y),y+=n}function Sy(s,r){let n,o=r.length*2,c=s.length-o;r.sort((f,l)=>f.offset>l.offset?1:-1);for(let f=0;f<r.length;f++){let l=r[f];l.id=f;for(let d of l.references)s[d++]=f>>8,s[d]=f&255}for(;n=r.pop();){let f=n.offset;s.copyWithin(f+o,f,c),o-=2;let l=f+o;s[l++]=216,s[l++]=28,c=f}return s}function Mf(s,r){_e.setUint32(Ie.position+s,y-Ie.position-s+1);let n=Ie;Ie=null,r(n[0]),r(n[1])}let Mo=new xy({useRecords:!1});Mo.encode;Mo.encodeAsIterable;Mo.encodeAsAsyncIterable;const Df=512,Ry=1024,oo=2048;function _n(s,r,n,o){Object.defineProperty(s,r,{get:n,set:o,enumerable:!0,configurable:!0})}class Mu{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=r=>{const n=[],o=r.byteLength,c=Math.ceil(o/this.chunkedMTU);let f=0,l=0;for(;l<o;){const d=Math.min(o,l+this.chunkedMTU),g=r.slice(l,d),x={__peerData:this._dataCount,n:f,data:g,total:c};n.push(x),l=d,f++}return this._dataCount++,n}}}function Ty(s){let r=0;for(const c of s)r+=c.byteLength;const n=new Uint8Array(r);let o=0;for(const c of s)n.set(c,o),o+=c.byteLength;return n}const ao=bf.default||bf,lr=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const s=this.getBrowser(),r=this.getVersion();return this.supportedBrowsers.includes(s)?s==="chrome"?r>=this.minChromeVersion:s==="firefox"?r>=this.minFirefoxVersion:s==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1}getBrowser(){return ao.browserDetails.browser}getVersion(){return ao.browserDetails.version||0}isUnifiedPlanSupported(){const s=this.getBrowser(),r=ao.browserDetails.version||0;if(s==="chrome"&&r<this.minChromeVersion)return!1;if(s==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,o=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),o=!0}catch{}finally{n&&n.close()}return o}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},ky=s=>!s||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(s),Du=()=>Math.random().toString(36).slice(2),wf={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Ey extends Mu{noop(){}blobToArrayBuffer(r,n){const o=new FileReader;return o.onload=function(c){c.target&&n(c.target.result)},o.readAsArrayBuffer(r),o}binaryStringToArrayBuffer(r){const n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...r){super(...r),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=wf,this.browser=lr.getBrowser(),this.browserVersion=lr.getVersion(),this.pack=Gf,this.unpack=jf,this.supports=function(){const n={browser:lr.isBrowserSupported(),webRTC:lr.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let o;try{o=new RTCPeerConnection(wf),n.audioVideo=!0;let c;try{c=o.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!c.ordered;try{c.binaryType="blob",n.binaryBlob=!lr.isIOS}catch{}}catch{}finally{c&&c.close()}}catch{}finally{o&&o.close()}return n}(),this.validateId=ky,this.randomToken=Du}}const Ze=new Ey,Py="PeerJS: ";var Lf;(function(s){s[s.Disabled=0]="Disabled",s[s.Errors=1]="Errors",s[s.Warnings=2]="Warnings",s[s.All=3]="All"})(Lf||(Lf={}));class Ay{get logLevel(){return this._logLevel}set logLevel(r){this._logLevel=r}log(...r){this._logLevel>=3&&this._print(3,...r)}warn(...r){this._logLevel>=2&&this._print(2,...r)}error(...r){this._logLevel>=1&&this._print(1,...r)}setLogFunction(r){this._print=r}_print(r,...n){const o=[Py,...n];for(const c in o)o[c]instanceof Error&&(o[c]="("+o[c].name+") "+o[c].message);r>=3?console.log(...o):r>=2?console.warn("WARNING",...o):r>=1&&console.error("ERROR",...o)}constructor(){this._logLevel=0}}var W=new Ay,Do={},Iy=Object.prototype.hasOwnProperty,Ve="~";function yr(){}Object.create&&(yr.prototype=Object.create(null),new yr().__proto__||(Ve=!1));function Oy(s,r,n){this.fn=s,this.context=r,this.once=n||!1}function wu(s,r,n,o,c){if(typeof n!="function")throw new TypeError("The listener must be a function");var f=new Oy(n,o||s,c),l=Ve?Ve+r:r;return s._events[l]?s._events[l].fn?s._events[l]=[s._events[l],f]:s._events[l].push(f):(s._events[l]=f,s._eventsCount++),s}function Ei(s,r){--s._eventsCount===0?s._events=new yr:delete s._events[r]}function $e(){this._events=new yr,this._eventsCount=0}$e.prototype.eventNames=function(){var r=[],n,o;if(this._eventsCount===0)return r;for(o in n=this._events)Iy.call(n,o)&&r.push(Ve?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(n)):r};$e.prototype.listeners=function(r){var n=Ve?Ve+r:r,o=this._events[n];if(!o)return[];if(o.fn)return[o.fn];for(var c=0,f=o.length,l=new Array(f);c<f;c++)l[c]=o[c].fn;return l};$e.prototype.listenerCount=function(r){var n=Ve?Ve+r:r,o=this._events[n];return o?o.fn?1:o.length:0};$e.prototype.emit=function(r,n,o,c,f,l){var d=Ve?Ve+r:r;if(!this._events[d])return!1;var g=this._events[d],x=arguments.length,v,S;if(g.fn){switch(g.once&&this.removeListener(r,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,n),!0;case 3:return g.fn.call(g.context,n,o),!0;case 4:return g.fn.call(g.context,n,o,c),!0;case 5:return g.fn.call(g.context,n,o,c,f),!0;case 6:return g.fn.call(g.context,n,o,c,f,l),!0}for(S=1,v=new Array(x-1);S<x;S++)v[S-1]=arguments[S];g.fn.apply(g.context,v)}else{var M=g.length,B;for(S=0;S<M;S++)switch(g[S].once&&this.removeListener(r,g[S].fn,void 0,!0),x){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,n);break;case 3:g[S].fn.call(g[S].context,n,o);break;case 4:g[S].fn.call(g[S].context,n,o,c);break;default:if(!v)for(B=1,v=new Array(x-1);B<x;B++)v[B-1]=arguments[B];g[S].fn.apply(g[S].context,v)}}return!0};$e.prototype.on=function(r,n,o){return wu(this,r,n,o,!1)};$e.prototype.once=function(r,n,o){return wu(this,r,n,o,!0)};$e.prototype.removeListener=function(r,n,o,c){var f=Ve?Ve+r:r;if(!this._events[f])return this;if(!n)return Ei(this,f),this;var l=this._events[f];if(l.fn)l.fn===n&&(!c||l.once)&&(!o||l.context===o)&&Ei(this,f);else{for(var d=0,g=[],x=l.length;d<x;d++)(l[d].fn!==n||c&&!l[d].once||o&&l[d].context!==o)&&g.push(l[d]);g.length?this._events[f]=g.length===1?g[0]:g:Ei(this,f)}return this};$e.prototype.removeAllListeners=function(r){var n;return r?(n=Ve?Ve+r:r,this._events[n]&&Ei(this,n)):(this._events=new yr,this._eventsCount=0),this};$e.prototype.off=$e.prototype.removeListener;$e.prototype.addListener=$e.prototype.on;$e.prefixed=Ve;$e.EventEmitter=$e;Do=$e;var yn={};_n(yn,"ConnectionType",()=>Dt);_n(yn,"PeerErrorType",()=>Ce);_n(yn,"BaseConnectionErrorType",()=>vr);_n(yn,"DataConnectionErrorType",()=>xr);_n(yn,"SerializationType",()=>Nn);_n(yn,"SocketEventType",()=>Mt);_n(yn,"ServerMessageType",()=>we);var Dt;(function(s){s.Data="data",s.Media="media"})(Dt||(Dt={}));var Ce;(function(s){s.BrowserIncompatible="browser-incompatible",s.Disconnected="disconnected",s.InvalidID="invalid-id",s.InvalidKey="invalid-key",s.Network="network",s.PeerUnavailable="peer-unavailable",s.SslUnavailable="ssl-unavailable",s.ServerError="server-error",s.SocketError="socket-error",s.SocketClosed="socket-closed",s.UnavailableID="unavailable-id",s.WebRTC="webrtc"})(Ce||(Ce={}));var vr;(function(s){s.NegotiationFailed="negotiation-failed",s.ConnectionClosed="connection-closed"})(vr||(vr={}));var xr;(function(s){s.NotOpenYet="not-open-yet",s.MessageToBig="message-too-big"})(xr||(xr={}));var Nn;(function(s){s.Binary="binary",s.BinaryUTF8="binary-utf8",s.JSON="json",s.None="raw"})(Nn||(Nn={}));var Mt;(function(s){s.Message="message",s.Disconnected="disconnected",s.Error="error",s.Close="close"})(Mt||(Mt={}));var we;(function(s){s.Heartbeat="HEARTBEAT",s.Candidate="CANDIDATE",s.Offer="OFFER",s.Answer="ANSWER",s.Open="OPEN",s.Error="ERROR",s.IdTaken="ID-TAKEN",s.InvalidKey="INVALID-KEY",s.Leave="LEAVE",s.Expire="EXPIRE"})(we||(we={}));var wo={};wo=JSON.parse('{"name":"peerjs","version":"1.5.2","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-cbor":"dist/serializer.cbor.mjs","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-cbor":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/Cbor.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","cbor-x":"1.5.4","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^8.0.0"},"alias":{"process":false,"buffer":false}}');class My extends Do.EventEmitter{constructor(r,n,o,c,f,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const d=r?"wss://":"ws://";this._baseUrl=d+n+":"+o+c+"peerjs?key="+f}start(r,n){this._id=r;const o=`${this._baseUrl}&id=${r}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+wo.version),this._disconnected=!1,this._socket.onmessage=c=>{let f;try{f=JSON.parse(c.data),W.log("Server message received:",f)}catch{W.log("Invalid server message",c.data);return}this.emit(Mt.Message,f)},this._socket.onclose=c=>{this._disconnected||(W.log("Socket closed.",c),this._cleanup(),this._disconnected=!0,this.emit(Mt.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),W.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){W.log("Cannot send heartbeat, because socket closed");return}const r=JSON.stringify({type:we.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const r=[...this._messagesQueue];this._messagesQueue=[];for(const n of r)this.send(n)}send(r){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit(Mt.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(r);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Lu{constructor(r){this.connection=r}startConnection(r){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Dt.Media&&r._stream&&this._addTracksToConnection(r._stream,n),r.originator){const o=this.connection,c={ordered:!!r.reliable},f=n.createDataChannel(o.label,c);o._initializeDataChannel(f),this._makeOffer()}else this.handleSDP("OFFER",r.sdp)}_startPeerConnection(){W.log("Creating RTCPeerConnection.");const r=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(r),r}_setupListeners(r){const n=this.connection.peer,o=this.connection.connectionId,c=this.connection.type,f=this.connection.provider;W.log("Listening for ICE candidates."),r.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(W.log(`Received ICE candidates for ${n}:`,l.candidate),f.socket.send({type:we.Candidate,payload:{candidate:l.candidate,type:c,connectionId:o},dst:n}))},r.oniceconnectionstatechange=()=>{switch(r.iceConnectionState){case"failed":W.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(vr.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":W.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(vr.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":W.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":r.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",r.iceConnectionState)},W.log("Listening for data channel"),r.ondatachannel=l=>{W.log("Received data channel");const d=l.channel;f.getConnection(n,o)._initializeDataChannel(d)},W.log("Listening for remote stream"),r.ontrack=l=>{W.log("Received remote stream");const d=l.streams[0],g=f.getConnection(n,o);if(g.type===Dt.Media){const x=g;this._addStreamToMediaConnection(d,x)}}}cleanup(){W.log("Cleaning up PeerConnection to "+this.connection.peer);const r=this.connection.peerConnection;if(!r)return;this.connection.peerConnection=null,r.onicecandidate=r.oniceconnectionstatechange=r.ondatachannel=r.ontrack=()=>{};const n=r.signalingState!=="closed";let o=!1;const c=this.connection.dataChannel;c&&(o=!!c.readyState&&c.readyState!=="closed"),(n||o)&&r.close()}async _makeOffer(){const r=this.connection.peerConnection,n=this.connection.provider;try{const o=await r.createOffer(this.connection.options.constraints);W.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp);try{await r.setLocalDescription(o),W.log("Set localDescription:",o,`for:${this.connection.peer}`);let c={sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Dt.Data){const f=this.connection;c={...c,label:f.label,reliable:f.reliable,serialization:f.serialization}}n.socket.send({type:we.Offer,payload:c,dst:this.connection.peer})}catch(c){c!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Ce.WebRTC,c),W.log("Failed to setLocalDescription, ",c))}}catch(o){n.emitError(Ce.WebRTC,o),W.log("Failed to createOffer, ",o)}}async _makeAnswer(){const r=this.connection.peerConnection,n=this.connection.provider;try{const o=await r.createAnswer();W.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp);try{await r.setLocalDescription(o),W.log("Set localDescription:",o,`for:${this.connection.peer}`),n.socket.send({type:we.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(c){n.emitError(Ce.WebRTC,c),W.log("Failed to setLocalDescription, ",c)}}catch(o){n.emitError(Ce.WebRTC,o),W.log("Failed to create answer, ",o)}}async handleSDP(r,n){n=new RTCSessionDescription(n);const o=this.connection.peerConnection,c=this.connection.provider;W.log("Setting remote description",n);const f=this;try{await o.setRemoteDescription(n),W.log(`Set remoteDescription:${r} for:${this.connection.peer}`),r==="OFFER"&&await f._makeAnswer()}catch(l){c.emitError(Ce.WebRTC,l),W.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(r){W.log("handleCandidate:",r);try{await this.connection.peerConnection.addIceCandidate(r),W.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Ce.WebRTC,n),W.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(r,n){if(W.log(`add tracks from stream ${r.id} to peer connection`),!n.addTrack)return W.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");r.getTracks().forEach(o=>{n.addTrack(o,r)})}_addStreamToMediaConnection(r,n){W.log(`add stream ${r.id} to media connection ${n.connectionId}`),n.addStream(r)}}class Bu extends Do.EventEmitter{emitError(r,n){W.error("Error:",n),this.emit("error",new Dy(`${r}`,n))}}class Dy extends Error{constructor(r,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=r}}class Uu extends Bu{get open(){return this._open}constructor(r,n,o){super(),this.peer=r,this.provider=n,this.options=o,this._open=!1,this.metadata=o.metadata}}var So;const pr=class pr extends Uu{get type(){return Dt.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(r,n,o){super(r,n,o),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||pr.ID_PREFIX+Ze.randomToken(),this._negotiator=new Lu(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(r){this.dataChannel=r,this.dataChannel.onopen=()=>{W.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{W.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(r){W.log("Receiving stream",r),this._remoteStream=r,super.emit("stream",r)}handleMessage(r){const n=r.type,o=r.payload;switch(r.type){case we.Answer:this._negotiator.handleSDP(n,o.sdp),this._open=!0;break;case we.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:W.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(r,n={}){if(this._localStream){W.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:r});const o=this.provider._getMessages(this.connectionId);for(const c of o)this.handleMessage(c);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};So=new WeakMap,fr(pr,So,pr.ID_PREFIX="mc_");let Oi=pr;class wy{constructor(r){this._options=r}_buildRequest(r){const n=this._options.secure?"https":"http",{host:o,port:c,path:f,key:l}=this._options,d=new URL(`${n}://${o}:${c}${f}${l}/${r}`);return d.searchParams.set("ts",`${Date.now()}${Math.random()}`),d.searchParams.set("version",wo.version),fetch(d.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const r=await this._buildRequest("id");if(r.status!==200)throw new Error(`Error. Status:${r.status}`);return r.text()}catch(r){W.error("Error retrieving ID",r);let n="";throw this._options.path==="/"&&this._options.host!==Ze.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const r=await this._buildRequest("peers");if(r.status!==200){if(r.status===401){let n="";throw this._options.host===Ze.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${r.status}`)}return r.json()}catch(r){throw W.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r)}}}var Ro,To;const pn=class pn extends Uu{get type(){return Dt.Data}constructor(r,n,o){super(r,n,o),this.connectionId=this.options.connectionId||pn.ID_PREFIX+Du(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Lu(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(r){this.dataChannel=r,this.dataChannel.onopen=()=>{W.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{W.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{W.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(r){if(r!=null&&r.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(r,n=!1){if(!this.open){this.emitError(xr.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(r,n)}async handleMessage(r){const n=r.payload;switch(r.type){case we.Answer:await this._negotiator.handleSDP(r.type,n.sdp);break;case we.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:W.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}}};Ro=new WeakMap,To=new WeakMap,fr(pn,Ro,pn.ID_PREFIX="dc_"),fr(pn,To,pn.MAX_BUFFERED_AMOUNT=8388608);let Mi=pn;class Lo extends Mi{get bufferSize(){return this._bufferSize}_initializeDataChannel(r){super._initializeDataChannel(r),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)}_trySend(r){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Mi.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(n){return W.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(r){if(r!=null&&r.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...r){super(...r),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class co extends Lo{close(r){super.close(r),this._chunkedData={}}constructor(r,n,o){super(r,n,o),this.chunker=new Mu,this.serialization=Nn.Binary,this._chunkedData={}}_handleDataMessage({data:r}){const n=jf(r),o=n.__peerData;if(o){if(o.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(r){const n=r.__peerData,o=this._chunkedData[n]||{data:[],count:0,total:r.total};if(o.data[r.n]=new Uint8Array(r.data),o.count++,this._chunkedData[n]=o,o.total===o.count){delete this._chunkedData[n];const c=Ty(o.data);this._handleDataMessage({data:c})}}_send(r,n){const o=Gf(r);if(o instanceof Promise)return this._send_blob(o);if(!n&&o.byteLength>this.chunker.chunkedMTU){this._sendChunks(o);return}this._bufferedSend(o)}async _send_blob(r){const n=await r;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(r){const n=this.chunker.chunk(r);W.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const o of n)this.send(o,!0)}}class Ly extends Lo{_handleDataMessage({data:r}){super.emit("data",r)}_send(r,n){this._bufferedSend(r)}constructor(...r){super(...r),this.serialization=Nn.None}}class By extends Lo{_handleDataMessage({data:r}){const n=this.parse(this.decoder.decode(r)),o=n.__peerData;if(o&&o.type==="close"){this.close();return}this.emit("data",n)}_send(r,n){const o=this.encoder.encode(this.stringify(r));if(o.byteLength>=Ze.chunkedMTU){this.emitError(xr.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(o)}constructor(...r){super(...r),this.serialization=Nn.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var ko;const dr=class dr extends Bu{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const r=Object.create(null);for(const[n,o]of this._connections)r[n]=o;return r}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(r,n){super(),this._serializers={raw:Ly,json:By,binary:co,"binary-utf8":co,default:co},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let o;if(r&&r.constructor==Object?n=r:r&&(o=r.toString()),n={debug:0,host:Ze.CLOUD_HOST,port:Ze.CLOUD_PORT,path:"/",key:dr.DEFAULT_KEY,token:Ze.randomToken(),config:Ze.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ze.CLOUD_HOST?this._options.secure=Ze.isSecure():this._options.host==Ze.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&W.setLogFunction(this._options.logFunction),W.logLevel=this._options.debug||0,this._api=new wy(n),this._socket=this._createServerConnection(),!Ze.supports.audioVideo&&!Ze.supports.data){this._delayedAbort(Ce.BrowserIncompatible,"The current browser does not support WebRTC");return}if(o&&!Ze.validateId(o)){this._delayedAbort(Ce.InvalidID,`ID "${o}" is invalid`);return}o?this._initialize(o):this._api.retrieveId().then(c=>this._initialize(c)).catch(c=>this._abort(Ce.ServerError,c))}_createServerConnection(){const r=new My(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Mt.Message,n=>{this._handleMessage(n)}),r.on(Mt.Error,n=>{this._abort(Ce.SocketError,n)}),r.on(Mt.Disconnected,()=>{this.disconnected||(this.emitError(Ce.Network,"Lost connection to server."),this.disconnect())}),r.on(Mt.Close,()=>{this.disconnected||this._abort(Ce.SocketClosed,"Underlying socket is already closed.")}),r}_initialize(r){this._id=r,this.socket.start(r,this._options.token)}_handleMessage(r){const n=r.type,o=r.payload,c=r.src;switch(n){case we.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case we.Error:this._abort(Ce.ServerError,o.msg);break;case we.IdTaken:this._abort(Ce.UnavailableID,`ID "${this.id}" is taken`);break;case we.InvalidKey:this._abort(Ce.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case we.Leave:W.log(`Received leave message from ${c}`),this._cleanupPeer(c),this._connections.delete(c);break;case we.Expire:this.emitError(Ce.PeerUnavailable,`Could not connect to peer ${c}`);break;case we.Offer:{const f=o.connectionId;let l=this.getConnection(c,f);if(l&&(l.close(),W.warn(`Offer received for existing Connection ID:${f}`)),o.type===Dt.Media){const g=new Oi(c,this,{connectionId:f,_payload:o,metadata:o.metadata});l=g,this._addConnection(c,l),this.emit("call",g)}else if(o.type===Dt.Data){const g=new this._serializers[o.serialization](c,this,{connectionId:f,_payload:o,metadata:o.metadata,label:o.label,serialization:o.serialization,reliable:o.reliable});l=g,this._addConnection(c,l),this.emit("connection",g)}else{W.warn(`Received malformed connection type:${o.type}`);return}const d=this._getMessages(f);for(const g of d)l.handleMessage(g);break}default:{if(!o){W.warn(`You received a malformed message from ${c} of type ${n}`);return}const f=o.connectionId,l=this.getConnection(c,f);l&&l.peerConnection?l.handleMessage(r):f?this._storeMessage(f,r):W.warn("You received an unrecognized message:",r);break}}}_storeMessage(r,n){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(n)}_getMessages(r){const n=this._lostMessages.get(r);return n?(this._lostMessages.delete(r),n):[]}connect(r,n={}){if(n={serialization:"default",...n},this.disconnected){W.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ce.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const o=new this._serializers[n.serialization](r,this,n);return this._addConnection(r,o),o}call(r,n,o={}){if(this.disconnected){W.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ce.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){W.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const c=new Oi(r,this,{...o,_stream:n});return this._addConnection(r,c),c}_addConnection(r,n){W.log(`add connection ${n.type}:${n.connectionId} to peerId:${r}`),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(n)}_removeConnection(r){const n=this._connections.get(r.peer);if(n){const o=n.indexOf(r);o!==-1&&n.splice(o,1)}this._lostMessages.delete(r.connectionId)}getConnection(r,n){const o=this._connections.get(r);if(!o)return null;for(const c of o)if(c.connectionId===n)return c;return null}_delayedAbort(r,n){setTimeout(()=>{this._abort(r,n)},0)}_abort(r,n){W.error("Aborting!"),this.emitError(r,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(W.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const r of this._connections.keys())this._cleanupPeer(r),this._connections.delete(r);this.socket.removeAllListeners()}_cleanupPeer(r){const n=this._connections.get(r);if(n)for(const o of n)o.close()}disconnect(){if(this.disconnected)return;const r=this.id;W.log(`Disconnect peer with ID:${r}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}reconnect(){if(this.disconnected&&!this.destroyed)W.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)W.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(r=n=>{}){this._api.listAllPeers().then(n=>r(n)).catch(n=>this._abort(Ce.ServerError,n))}};ko=new WeakMap,fr(dr,ko,dr.DEFAULT_KEY="peerjs");let Di=dr;class Bf extends Nf{constructor(n){super();Rt(this,"id","");Rt(this,"peer",null);Rt(this,"connections",{});Rt(this,"connected",!1);this.id=n}static generateId(){return K_("A",10,{exclude:"ILOVW"})}async host(){return new Promise((n,o)=>{this.peer=new Di(this.id),this.peer.on("open",()=>{this.connected=!0,n()}),this.peer.on("close",()=>{this.connected=!1}),this.peer.on("error",c=>{this.connected=!1,this.peer=null,o(c)}),this.peer.on("connection",c=>{this.connections[c.peer]=c,this.setupConnection(c)})})}async join(){return new Promise((n,o)=>{this.peer=new Di,this.peer.on("open",()=>{const c=this.peer.connect(this.id);this.connections[c.peer]=c,c.on("open",()=>{this.connected=!0,this.setupConnection(c),n()}),c.on("close",()=>{this.emit("connection-closed"),this.connected=!1,this.peer=null}),c.on("error",f=>{console.error(f)})}),this.peer.on("error",c=>{this.connected=!1,this.peer=null,o(c)})})}isConnected(){return this.connected}peerId(){var n;return(n=this==null?void 0:this.peer)==null?void 0:n.id}broadcast(n,o={},c=[],f=[]){const l={type:n,data:o};for(const d in this.connections)this.connections[d].peer!==this.peerId()&&(c.length===0||c.includes(this.connections[d].peer))&&f.includes(this.connections[d].peer)===!1&&this.connections[d].send(l)}message(n,o,c={}){return this.broadcast(o,c,[n])}messageHost(n,o={}){return this.broadcast(n,o,[this.id])}setupConnection(n){n.on("data",o=>{this.receiveData(n,o)}),n.on("close",()=>{this.receiveClose(n)}),n.peer!==this.peerId()&&n.on("open",()=>{this.emit("connection-joined",n.peer)})}receiveData(n,o){this.emit("message",n.peer,o)}receiveClose(n){delete this.connections[n.peer],this.emit("disconnection",n.peer)}}const Uy=k_("game",{state:()=>({host:!1,playerId:null,currentRound:1,showVotes:!1,votes:{},players:{},playerIds:[]}),getters:{},actions:{setHost(s){this.host=s},setCurrentRound(s){this.currentRound=s,this.votes={}},setRoundVotes(s,r,n){this.votes[s]===void 0&&(this.votes[s]={1:{},2:{}}),this.votes[s][r]=n},addPlayer(s){this.playerIds.push(s)},removePlayer(s){const r=this.playerIds.indexOf(s);r>-1&&(this.playerIds.splice(r,1),delete this.votes[s],delete this.players[s])},updateInfo(s,r){this.players[s]=r},setShowVotes(s){this.showVotes=s},setVotes(s){for(const r in s)this.votes[r]=s[r]},updateVotes(s,r){this.votes[s]=r},setPlayers(s){this.players=s},setPlayerIds(s){this.playerIds=s}}}),Uf={e:null,c:null,u:null},Ff={sp:null};let Ny=class extends Nf{constructor(n){super();Rt(this,"engine");Rt(this,"id");Rt(this,"host",!1);Rt(this,"gameStore");Rt(this,"userStore");Rt(this,"queueSync");this.id=n,this.engine=new Bf("PLANNING-POKER-"+n),this.gameStore=Uy(),this.userStore=E_(),this.queueSync=Ln.throttle(this.sync.bind(this),100,{leading:!1,trailing:!0})}static generateRoomId(){return Bf.generateId()}async createRoom(){await this.engine.host(),this.host=!0,this.gameStore.playerId=this.engine.peerId(),this.userStore.id=this.engine.peerId(),this.gameStore.addPlayer(this.gameStore.playerId),this.engine.on("connection-joined",this.onPlayerJoined.bind(this)),this.engine.on("disconnection",this.onPlayerLeave.bind(this)),this.engine.on("message",this.onMessage.bind(this))}async joinRoom(){await this.engine.join(),this.gameStore.playerId=this.engine.peerId(),this.userStore.id=this.engine.peerId(),this.engine.on("message",this.onMessage.bind(this)),this.engine.on("connection-closed",this.onConnectionClosed.bind(this)),this.sendInfo()}reset(){this.gameStore.setCurrentRound(1),this.clearVotes()}startRound(n){}clearRoundVotes(){this.gameStore.playerIds.forEach(n=>{this.gameStore.currentRound===1&&this.gameStore.setRoundVotes(n,1,Ln.cloneDeep(Uf)),this.gameStore.currentRound===2&&this.gameStore.setRoundVotes(n,2,Ln.cloneDeep(Ff))}),this.sync()}clearVotes(){this.gameStore.playerIds.forEach(n=>{this.clearVotesForPlayer(n)}),this.sync([],[],!0)}clearVotesForPlayer(n){this.gameStore.setRoundVotes(n,1,Ln.cloneDeep(Uf)),this.gameStore.setRoundVotes(n,2,Ln.cloneDeep(Ff))}sync(n=[],o=[],c=!1){this.queueSync.cancel(),o.push(this.engine.peerId());const f=Ln.cloneDeep(this.gameStore.players);f[this.engine.peerId()]={name:this.userStore.name,id:this.userStore.id,config:{role:this.userStore.config.role}};const l={showVotes:this.gameStore.showVotes,votes:this.gameStore.votes,players:f,playerIds:this.gameStore.playerIds,forced:c};this.engine.broadcast("state",l,n,o)}onPlayerJoined(n){this.gameStore.addPlayer(n),this.clearVotesForPlayer(n),this.queueSync([],[],!0)}onPlayerLeave(n){this.gameStore.removePlayer(n),this.queueSync()}onMessage(n,o){switch(o.type){case"player-info":this.receiveInfo(n,o.data);break;case"state":this.receiveState(n,o.data);break;case"player-votes":this.receiveVotes(n,o.data);break}}onConnectionClosed(){this.emit("room-closed")}sendInfo(){this.engine.messageHost("player-info",{name:this.userStore.name,id:this.userStore.id,config:{role:this.userStore.config.role}})}receiveInfo(n,o){this.gameStore.updateInfo(n,o),this.queueSync([],[],!0)}receiveState(n,o){console.log("receiveState",o),delete o.players[this.gameStore.playerId],o.forced===!1&&delete o.votes[this.gameStore.playerId],this.gameStore.setShowVotes(o.showVotes),this.gameStore.setVotes(o.votes),this.gameStore.setPlayers(o.players),this.gameStore.setPlayerIds(o.playerIds),this.emit("receive-state")}sendVotes(n){this.host===!0?this.receiveVotes(this.engine.peerId(),n):this.engine.messageHost("player-votes",n)}receiveVotes(n,o){this.gameStore.updateVotes(n,o),this.queueSync([],[n])}};export{Ny as P,Uy as u};
